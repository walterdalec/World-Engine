/*! For license information please see main.b2b77c06.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:o,_owner:l.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,h(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,o={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!j.hasOwnProperty(a)&&(o[a]=t[a]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var c=Array(s),d=0;d<s;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===o[a]&&(o[a]=s[a]);return{$$typeof:n,type:e,key:i,ref:l,props:o,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,a,o,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return i=i(s=e),e=""===o?"."+P(s,0):o,w(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),R(i,t,a,"",function(e){return e})):null!=i&&(T(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(s=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var d=o+P(l=e[c],c);s+=R(l,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)s+=R(l=l.value,t,a,d=o+P(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],a=0;return R(e,r,"","",function(e){return t.call(n,e,a++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},I={transition:null},z={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function B(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=v,t.StrictMode=o,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.act=B,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),o=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)k.call(t,c)&&!j.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){s=Array(c);for(var d=0;d<c;d++)s[d]=arguments[d+2];a.children=s}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=B,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var l=2*(r+1)-1,s=e[l],c=l+1,d=e[c];if(0>o(s,n))c<a&&0>o(d,s)?(e[r]=d,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<a&&0>o(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var c=[],d=[],u=1,p=null,f=3,m=!1,h=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,x(e),!h)if(null!==r(c))h=!0,I(k);else{var t=r(d);null!==t&&z(w,t.startTime-e)}}function k(e,n){h=!1,g&&(g=!1,b(T),T=-1),m=!0;var o=f;try{for(x(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!R());){var i=p.callback;if("function"===typeof i){p.callback=null,f=p.priorityLevel;var l=i(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?p.callback=l:p===r(c)&&a(c),x(n)}else a(c);p=r(c)}if(null!==p)var s=!0;else{var u=r(d);null!==u&&z(w,u.startTime-n),s=!1}return s}finally{p=null,f=o,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,j=!1,C=null,T=-1,E=5,P=-1;function R(){return!(t.unstable_now()-P<E)}function N(){if(null!==C){var e=t.unstable_now();P=e;var n=!0;try{n=C(!0,e)}finally{n?S():(j=!1,C=null)}}else j=!1}if("function"===typeof v)S=function(){v(N)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,L=M.port2;M.port1.onmessage=N,S=function(){L.postMessage(null)}}else S=function(){y(N,0)};function I(e){C=e,j||(j=!0,S())}function z(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>i?(e.sortIndex=o,n(d,e),null===r(c)&&e===r(d)&&(g?(b(T),T=-1):g=!0,z(w,o-i))):(e.sortIndex=l,n(c,e),h||m||(h=!0,I(k))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),a=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function h(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!u.call(m,e)||!u.call(f,e)&&(p.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);g[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}var A,O=Object.assign;function D(e){if(void 0===A)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||""}return"\n"+A+e}var _=!1;function W(e,t){if(!e||_)return"";_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==o[l]){var s="\n"+a[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function F(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case C:return"Profiler";case j:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){J(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=he(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,je=null;function Ce(e){if(e=va(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Te(e){Se?je?je.push(e):je=[e]:Se=e}function Ee(){if(Se){var e=Se,t=je;if(je=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Pe(e,t){return e(t)}function Re(){}var Ne=!1;function Me(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Pe(e,t,n)}finally{Ne=!1,(null!==Se||null!==je)&&(Re(),Ee())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(de){Ie=!1}function Be(e,t,n,r,a,o,i,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ae=!1,Oe=null,De=!1,_e=null,We={onError:function(e){Ae=!0,Oe=e}};function Fe(e,t,n,r,a,o,i,l,s){Ae=!1,Oe=null,Be.apply(We,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ve(a),e;if(i===r)return Ve(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,s=a.child;s;){if(s===n){l=!0,n=a,r=i;break}if(s===r){l=!0,r=a,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,r=a;break}if(s===r){l=!0,r=i,n=a;break}s=s.sibling}if(!l)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Ke=a.unstable_requestPaint,Je=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/st|0)|0},lt=Math.log,st=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~a;0!==l?r=ut(l):0!==(o&=i)&&(r=ut(o))}else 0!==(i=n&~a)?r=ut(i):0!==o&&(r=ut(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,jt,Ct,Tt=!1,Et=[],Pt=null,Rt=null,Nt=null,Mt=new Map,Lt=new Map,It=[],zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function At(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ot(e){var t=ba(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void Ct(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=va(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function _t(e,t,n){Dt(e)&&n.delete(t)}function Wt(){Tt=!1,null!==Pt&&Dt(Pt)&&(Pt=null),null!==Rt&&Dt(Rt)&&(Rt=null),null!==Nt&&Dt(Nt)&&(Nt=null),Mt.forEach(_t),Lt.forEach(_t)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Ht(e){function t(t){return Ft(t,e)}if(0<Et.length){Ft(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&Ft(Pt,e),null!==Rt&&Ft(Rt,e),null!==Nt&&Ft(Nt,e),Mt.forEach(t),Lt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ot(n),null===n.blockedOn&&It.shift()}var Ut=x.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var a=vt,o=Ut.transition;Ut.transition=null;try{vt=1,qt(e,t,n,r)}finally{vt=a,Ut.transition=o}}function Qt(e,t,n,r){var a=vt,o=Ut.transition;Ut.transition=null;try{vt=4,qt(e,t,n,r)}finally{vt=a,Ut.transition=o}}function qt(e,t,n,r){if(Vt){var a=$t(e,t,n,r);if(null===a)Vr(e,t,r,Yt,n),Bt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Pt=At(Pt,e,t,n,r,a),!0;case"dragenter":return Rt=At(Rt,e,t,n,r,a),!0;case"mouseover":return Nt=At(Nt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Mt.set(o,At(Mt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Lt.set(o,At(Lt.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Bt(e,r),4&t&&-1<zt.indexOf(e)){for(;null!==a;){var o=va(a);if(null!==o&&wt(o),null===(o=$t(e,t,n,r))&&Vr(e,t,r,Yt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Yt=null;function $t(e,t,n,r){if(Yt=null,null!==(e=ba(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,ln,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=O({},cn,{view:0,detail:0}),pn=an(un),fn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,ln=e.screenY-sn.screenY):ln=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(fn),hn=an(O({},fn,{dataTransfer:0})),gn=an(O({},un,{relatedTarget:0})),yn=an(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=an(bn),xn=an(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return jn}var Tn=O({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Tn),Pn=an(O({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Nn=an(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=O({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Mn),In=[9,13,27,32],zn=d&&"CompositionEvent"in window,Bn=null;d&&"documentMode"in document&&(Bn=document.documentMode);var An=d&&"TextEvent"in window&&!Bn,On=d&&(!zn||Bn&&8<Bn&&11>=Bn),Dn=String.fromCharCode(32),_n=!1;function Wn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,qn=null;function Yn(e){Dr(e,0)}function $n(e){if(q(xa(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),qn=Qn=null)}function nr(e){if("value"===e.propertyName&&$n(qn)){var t=[];Gn(t,qn,e,we(e)),Me(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(qn)}function or(e,t){if("click"===e)return $n(t)}function ir(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!u.call(t,a)||!lr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=dr(n,o);var i=dr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&sr(br,r)||(br=r,0<(r=Qr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},jr={};function Cr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Sr[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=Cr("animationend"),Er=Cr("animationiteration"),Pr=Cr("animationstart"),Rr=Cr("transitionend"),Nr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Nr.set(e,t),s(t,[e])}for(var Ir=0;Ir<Mr.length;Ir++){var zr=Mr[Ir];Lr(zr.toLowerCase(),"on"+(zr[0].toUpperCase()+zr.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(Er,"onAnimationIteration"),Lr(Pr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ar=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,l,s,c){if(Fe.apply(this,arguments),Ae){if(!Ae)throw Error(o(198));var d=Oe;Ae=!1,Oe=null,De||(De=!0,_e=d)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==o&&a.isPropagationStopped())break e;Or(a,l,c),o=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,c=l.currentTarget,l=l.listener,s!==o&&a.isPropagationStopped())break e;Or(a,l,c),o=s}}}if(De)throw e=_e,De=!1,_e=null,e}function _r(e,t){var n=t[ha];void 0===n&&(n=t[ha]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Fr]){e[Fr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ar.has(t)||Wr(t,!1,e),Wr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Wr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Kt(t)){case 1:var a=Gt;break;case 4:a=Qt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=ba(l)))return;if(5===(s=i.tag)||6===s){r=o=i;continue e}l=l.parentNode}}r=r.return}Me(function(){var r=o,a=we(n),i=[];e:{var l=Nr.get(e);if(void 0!==l){var s=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Rn;break;case Tr:case Er:case Pr:s=yn;break;case Rr:s=Nn;break;case"scroll":s=pn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Pn}var d=0!==(4&t),u=!d&&"scroll"===e,p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=r;null!==m;){var h=(f=m).stateNode;if(5===f.tag&&null!==h&&(f=h,null!==p&&(null!=(h=Le(m,p))&&d.push(Gr(m,h,f)))),u)break;m=m.return}0<d.length&&(l=new s(l,c,null,n,a),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[ma])&&(s||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(d=mn,h="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Pn,h="onPointerLeave",p="onPointerEnter",m="pointer"),u=null==s?l:xa(s),f=null==c?l:xa(c),(l=new d(h,m+"leave",s,n,a)).target=u,l.relatedTarget=f,h=null,ba(a)===r&&((d=new d(p,m+"enter",c,n,a)).target=f,d.relatedTarget=u,h=d),u=h,s&&c)e:{for(p=c,m=0,f=d=s;f;f=qr(f))m++;for(f=0,h=p;h;h=qr(h))f++;for(;0<m-f;)d=qr(d),m--;for(;0<f-m;)p=qr(p),f--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=qr(d),p=qr(p)}d=null}else d=null;null!==s&&Yr(i,l,s,d,!1),null!==c&&null!==u&&Yr(i,u,c,d,!0)}if("select"===(s=(l=r?xa(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var g=Kn;else if(Vn(l))if(Jn)g=ir;else{g=ar;var y=rr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(i,g,n,a):(y&&y(e,l,r),"focusout"===e&&(y=l._wrapperState)&&y.controlled&&"number"===l.type&&ee(l,"number",l.value)),y=r?xa(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,xr(i,n,a);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":xr(i,n,a)}var b;if(zn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?Wn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(On&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(b=en()):(Xt="value"in(Jt=a)?Jt.value:Jt.textContent,Hn=!0)),0<(y=Qr(r,v)).length&&(v=new xn(v,e,null,n,a),i.push({event:v,listeners:y}),b?v.data=b:null!==(b=Fn(n))&&(v.data=b))),(b=An?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(_n=!0,Dn);case"textInput":return(e=t.data)===Dn&&_n?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!zn&&Wn(e,t)?(e=en(),Zt=Xt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=b))}Dr(i,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Le(e,n))&&r.unshift(Gr(e,o,a)),null!=(o=Le(e,t))&&r.push(Gr(e,o,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==c&&(l=c,a?null!=(s=Le(n,o))&&i.unshift(Gr(n,s,l)):a||null!=(s=Le(n,o))&&i.push(Gr(n,s,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var $r=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Kr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(la)}:ra;function la(e){setTimeout(function(){throw e})}function sa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ht(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),pa="__reactFiber$"+ua,fa="__reactProps$"+ua,ma="__reactContainer$"+ua,ha="__reactEvents$"+ua,ga="__reactListeners$"+ua,ya="__reactHandles$"+ua;function ba(e){var t=e[pa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[pa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[pa])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function va(e){return!(e=e[pa]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wa(e){return e[fa]||null}var ka=[],Sa=-1;function ja(e){return{current:e}}function Ca(e){0>Sa||(e.current=ka[Sa],ka[Sa]=null,Sa--)}function Ta(e,t){Sa++,ka[Sa]=e.current,e.current=t}var Ea={},Pa=ja(Ea),Ra=ja(!1),Na=Ea;function Ma(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function La(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Ca(Ra),Ca(Pa)}function za(e,t,n){if(Pa.current!==Ea)throw Error(o(168));Ta(Pa,t),Ta(Ra,n)}function Ba(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,U(e)||"Unknown",a));return O({},n,r)}function Aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Na=Pa.current,Ta(Pa,e),Ta(Ra,Ra.current),!0}function Oa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ba(e,t,Na),r.__reactInternalMemoizedMergedChildContext=e,Ca(Ra),Ca(Pa),Ta(Pa,e)):Ca(Ra),Ta(Ra,n)}var Da=null,_a=!1,Wa=!1;function Fa(e){null===Da?Da=[e]:Da.push(e)}function Ha(){if(!Wa&&null!==Da){Wa=!0;var e=0,t=vt;try{var n=Da;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Da=null,_a=!1}catch(a){throw null!==Da&&(Da=Da.slice(e+1)),qe(Ze,Ha),a}finally{vt=t,Wa=!1}}return null}var Ua=[],Va=0,Ga=null,Qa=0,qa=[],Ya=0,$a=null,Ka=1,Ja="";function Xa(e,t){Ua[Va++]=Qa,Ua[Va++]=Ga,Ga=e,Qa=t}function Za(e,t,n){qa[Ya++]=Ka,qa[Ya++]=Ja,qa[Ya++]=$a,$a=e;var r=Ka;e=Ja;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ka=1<<32-it(t)+a|n<<a|r,Ja=o+e}else Ka=1<<o|n<<a|r,Ja=e}function eo(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function to(e){for(;e===Ga;)Ga=Ua[--Va],Ua[Va]=null,Qa=Ua[--Va],Ua[Va]=null;for(;e===$a;)$a=qa[--Ya],qa[Ya]=null,Ja=qa[--Ya],qa[Ya]=null,Ka=qa[--Ya],qa[Ya]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function lo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$a?{id:Ka,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function so(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!lo(e,t)){if(so(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&lo(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(so(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function po(e){if(e!==no)return!1;if(!ao)return uo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(so(e))throw fo(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ca(e.nextSibling)}function mo(){ro=no=null,ao=!1}function ho(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&vo(o)===t.type)?((r=a(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=zc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Bc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=zc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case k:return(t=Dc(t,e.mode,n)).return=e,t;case L:return p(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=Bc(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?d(e,t,n,r):null;case L:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||B(n))return null!==a?null:u(e,t,n,r,null);bo(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case L:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||B(r))return u(t,e=e.get(n)||null,r,a,null);bo(t,r)}return null}function h(a,o,l,s){for(var c=null,d=null,u=o,h=o=0,g=null;null!==u&&h<l.length;h++){u.index>h?(g=u,u=null):g=u.sibling;var y=f(a,u,l[h],s);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(a,u),o=i(y,o,h),null===d?c=y:d.sibling=y,d=y,u=g}if(h===l.length)return n(a,u),ao&&Xa(a,h),c;if(null===u){for(;h<l.length;h++)null!==(u=p(a,l[h],s))&&(o=i(u,o,h),null===d?c=u:d.sibling=u,d=u);return ao&&Xa(a,h),c}for(u=r(a,u);h<l.length;h++)null!==(g=m(u,a,h,l[h],s))&&(e&&null!==g.alternate&&u.delete(null===g.key?h:g.key),o=i(g,o,h),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),ao&&Xa(a,h),c}function g(a,l,s,c){var d=B(s);if("function"!==typeof d)throw Error(o(150));if(null==(s=d.call(s)))throw Error(o(151));for(var u=d=null,h=l,g=l=0,y=null,b=s.next();null!==h&&!b.done;g++,b=s.next()){h.index>g?(y=h,h=null):y=h.sibling;var v=f(a,h,b.value,c);if(null===v){null===h&&(h=y);break}e&&h&&null===v.alternate&&t(a,h),l=i(v,l,g),null===u?d=v:u.sibling=v,u=v,h=y}if(b.done)return n(a,h),ao&&Xa(a,g),d;if(null===h){for(;!b.done;g++,b=s.next())null!==(b=p(a,b.value,c))&&(l=i(b,l,g),null===u?d=b:u.sibling=b,u=b);return ao&&Xa(a,g),d}for(h=r(a,h);!b.done;g++,b=s.next())null!==(b=m(h,a,g,b.value,c))&&(e&&null!==b.alternate&&h.delete(null===b.key?g:b.key),l=i(b,l,g),null===u?d=b:u.sibling=b,u=b);return e&&h.forEach(function(e){return t(a,e)}),ao&&Xa(a,g),d}return function e(r,o,i,s){if("object"===typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=o;null!==d;){if(d.key===c){if((c=i.type)===S){if(7===d.tag){n(r,d.sibling),(o=a(d,i.props.children)).return=r,r=o;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&vo(c)===d.type){n(r,d.sibling),(o=a(d,i.props)).ref=yo(r,d,i),o.return=r,r=o;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===S?((o=Bc(i.props.children,r.mode,s,i.key)).return=r,r=o):((s=zc(i.type,i.key,i.props,null,r.mode,s)).ref=yo(r,o,i),s.return=r,r=s)}return l(r);case k:e:{for(d=i.key;null!==o;){if(o.key===d){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Dc(i,r.mode,s)).return=r,r=o}return l(r);case L:return e(r,o,(d=i._init)(i._payload),s)}if(te(i))return h(r,o,i,s);if(B(i))return g(r,o,i,s);bo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Oc(i,r.mode,s)).return=r,r=o),l(r)):n(r,o)}}var wo=xo(!0),ko=xo(!1),So=ja(null),jo=null,Co=null,To=null;function Eo(){To=Co=jo=null}function Po(e){var t=So.current;Ca(So),e._currentValue=t}function Ro(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function No(e,t){jo=e,To=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===jo)throw Error(o(308));Co=e,jo.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Lo=null;function Io(e){null===Lo?Lo=[e]:Lo.push(e)}function zo(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Io(t)):(n.next=a.next,a.next=n),t.interleaved=n,Bo(e,r)}function Bo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ps)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Bo(e,n)}return null===(a=r.interleaved)?(t.next=t,Io(r)):(t.next=a.next,a.next=t),r.interleaved=t,Bo(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var a=e.updateQueue;Ao=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var s=l,c=s.next;s.next=null,null===i?o=c:i.next=c,i=s;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=s))}if(null!==o){var u=a.baseState;for(i=0,d=c=s=null,l=o;;){var p=l.lane,f=l.eventTime;if((r&p)===p){null!==d&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,h=l;switch(p=t,f=n,h.tag){case 1:if("function"===typeof(m=h.payload)){u=m.call(f,u,p);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=h.payload)?m.call(f,u,p):m)||void 0===p)break e;u=O({},u,p);break e;case 2:Ao=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=f,s=u):d=d.next=f,i|=p;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(p=l).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===d&&(s=u),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);As|=i,e.lanes=i,e.memoizedState=u}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var Go={},Qo=ja(Go),qo=ja(Go),Yo=ja(Go);function $o(e){if(e===Go)throw Error(o(174));return e}function Ko(e,t){switch(Ta(Yo,t),Ta(qo,e),Ta(Qo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Qo),Ta(Qo,t)}function Jo(){Ca(Qo),Ca(qo),Ca(Yo)}function Xo(e){$o(Yo.current);var t=$o(Qo.current),n=se(t,e.type);t!==n&&(Ta(qo,e),Ta(Qo,n))}function Zo(e){qo.current===e&&(Ca(Qo),Ca(qo))}var ei=ja(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=x.ReactCurrentDispatcher,oi=x.ReactCurrentBatchConfig,ii=0,li=null,si=null,ci=null,di=!1,ui=!1,pi=0,fi=0;function mi(){throw Error(o(321))}function hi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,a,i){if(ii=i,li=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Zi:el,e=n(r,a),ui){i=0;do{if(ui=!1,pi=0,25<=i)throw Error(o(301));i+=1,ci=si=null,t.updateQueue=null,ai.current=tl,e=n(r,a)}while(ui)}if(ai.current=Xi,t=null!==si&&null!==si.next,ii=0,ci=si=li=null,di=!1,t)throw Error(o(300));return e}function yi(){var e=0!==pi;return pi=0,e}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?li.memoizedState=ci=e:ci=ci.next=e,ci}function vi(){if(null===si){var e=li.alternate;e=null!==e?e.memoizedState:null}else e=si.next;var t=null===ci?li.memoizedState:ci.next;if(null!==t)ci=t,si=e;else{if(null===e)throw Error(o(310));e={memoizedState:(si=e).memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},null===ci?li.memoizedState=ci=e:ci=ci.next=e}return ci}function xi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=vi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=si,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var s=l=null,c=null,d=i;do{var u=d.lane;if((ii&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(s=c=p,l=r):c=c.next=p,li.lanes|=u,As|=u}d=d.next}while(null!==d&&d!==i);null===c?l=r:c.next=s,lr(r,t.memoizedState)||(vl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,li.lanes|=i,As|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=vi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);lr(i,t.memoizedState)||(vl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Si(){}function ji(e,t){var n=li,r=vi(),a=t(),i=!lr(r.memoizedState,a);if(i&&(r.memoizedState=a,vl=!0),r=r.queue,Ai(Ei.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Mi(9,Ti.bind(null,n,r,a,t),void 0,null),null===Rs)throw Error(o(349));0!==(30&ii)||Ci(n,t,a)}return a}function Ci(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ti(e,t,n,r){t.value=n,t.getSnapshot=r,Pi(t)&&Ri(e)}function Ei(e,t,n){return n(function(){Pi(t)&&Ri(e)})}function Pi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ri(e){var t=Bo(e,1);null!==t&&nc(t,e,1,-1)}function Ni(e){var t=bi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,li,e),[t.memoizedState,e]}function Mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Li(){return vi().memoizedState}function Ii(e,t,n,r){var a=bi();li.flags|=e,a.memoizedState=Mi(1|t,n,void 0,void 0===r?null:r)}function zi(e,t,n,r){var a=vi();r=void 0===r?null:r;var o=void 0;if(null!==si){var i=si.memoizedState;if(o=i.destroy,null!==r&&hi(r,i.deps))return void(a.memoizedState=Mi(t,n,o,r))}li.flags|=e,a.memoizedState=Mi(1|t,n,o,r)}function Bi(e,t){return Ii(8390656,8,e,t)}function Ai(e,t){return zi(2048,8,e,t)}function Oi(e,t){return zi(4,2,e,t)}function Di(e,t){return zi(4,4,e,t)}function _i(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zi(4,4,_i.bind(null,t,e),n)}function Fi(){}function Hi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ui(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=n):(lr(n,t)||(n=ht(),li.lanes|=n,As|=n,e.baseState=!0),t)}function Gi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{vt=n,oi.transition=r}}function Qi(){return vi().memoizedState}function qi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e))Ki(t,n);else if(null!==(n=zo(e,t,n,r))){nc(n,e,r,ec()),Ji(n,t,r)}}function Yi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($i(e))Ki(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,lr(l,i)){var s=t.interleaved;return null===s?(a.next=a,Io(t)):(a.next=s.next,s.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=zo(e,t,a,r))&&(nc(n,e,r,a=ec()),Ji(n,t,r))}}function $i(e){var t=e.alternate;return e===li||null!==t&&t===li}function Ki(e,t){ui=di=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Xi={readContext:Mo,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Zi={readContext:Mo,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Mo,useEffect:Bi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,_i.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=bi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qi.bind(null,li,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:Ni,useDebugValue:Fi,useDeferredValue:function(e){return bi().memoizedState=e},useTransition:function(){var e=Ni(!1),t=e[0];return e=Gi.bind(null,e[1]),bi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=li,a=bi();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rs)throw Error(o(349));0!==(30&ii)||Ci(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Bi(Ei.bind(null,r,i,e),[e]),r.flags|=2048,Mi(9,Ti.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bi(),t=Rs.identifierPrefix;if(ao){var n=Ja;t=":"+t+"R"+(n=(Ka&~(1<<32-it(Ka)-1)).toString(32)+n),0<(n=pi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},el={readContext:Mo,useCallback:Hi,useContext:Mo,useEffect:Ai,useImperativeHandle:Wi,useInsertionEffect:Oi,useLayoutEffect:Di,useMemo:Ui,useReducer:wi,useRef:Li,useState:function(){return wi(xi)},useDebugValue:Fi,useDeferredValue:function(e){return Vi(vi(),si.memoizedState,e)},useTransition:function(){return[wi(xi)[0],vi().memoizedState]},useMutableSource:Si,useSyncExternalStore:ji,useId:Qi,unstable_isNewReconciler:!1},tl={readContext:Mo,useCallback:Hi,useContext:Mo,useEffect:Ai,useImperativeHandle:Wi,useInsertionEffect:Oi,useLayoutEffect:Di,useMemo:Ui,useReducer:ki,useRef:Li,useState:function(){return ki(xi)},useDebugValue:Fi,useDeferredValue:function(e){var t=vi();return null===si?t.memoizedState=e:Vi(t,si.memoizedState,e)},useTransition:function(){return[ki(xi)[0],vi().memoizedState]},useMutableSource:Si,useSyncExternalStore:ji,useId:Qi,unstable_isNewReconciler:!1};function nl(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rl(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=_o(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Wo(e,o,a))&&(nc(t,e,a,r),Fo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=_o(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Wo(e,o,a))&&(nc(t,e,a,r),Fo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=_o(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Wo(e,a,r))&&(nc(t,e,r,n),Fo(t,e,r))}};function ol(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(a,o))}function il(e,t,n){var r=!1,a=Ea,o=t.contextType;return"object"===typeof o&&null!==o?o=Mo(o):(a=La(t)?Na:Pa.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ma(e,a):Ea),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ll(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function sl(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=Mo(o):(o=La(t)?Na:Pa.current,a.context=Ma(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rl(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&al.enqueueReplaceState(a,a.state,null),Uo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function cl(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ul(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pl="function"===typeof WeakMap?WeakMap:Map;function fl(e,t,n){(n=_o(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,Gs=r),ul(0,t)},n}function ml(e,t,n){(n=_o(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ul(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ul(0,t),"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pl;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yl(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=_o(-1,1)).tag=2,Wo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bl=x.ReactCurrentOwner,vl=!1;function xl(e,t,n,r){t.child=null===e?ko(t,null,n,r):wo(t,e.child,n,r)}function wl(e,t,n,r,a){n=n.render;var o=t.ref;return No(t,a),r=gi(e,t,n,r,o,a),n=yi(),null===e||vl?(ao&&n&&eo(t),t.flags|=1,xl(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vl(e,t,a))}function kl(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sl(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(i,r)&&e.ref===t.ref)return Vl(e,t,a)}return t.flags|=1,(e=Ic(o,r)).ref=t.ref,e.return=t,t.child=e}function Sl(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(sr(o,r)&&e.ref===t.ref){if(vl=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Vl(e,t,a);0!==(131072&e.flags)&&(vl=!0)}}return Tl(e,t,n,r,a)}function jl(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ta(Is,Ls),Ls|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ta(Is,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ta(Is,Ls),Ls|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ta(Is,Ls),Ls|=r;return xl(e,t,a,n),t.child}function Cl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tl(e,t,n,r,a){var o=La(n)?Na:Pa.current;return o=Ma(t,o),No(t,a),n=gi(e,t,n,r,o,a),r=yi(),null===e||vl?(ao&&r&&eo(t),t.flags|=1,xl(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vl(e,t,a))}function El(e,t,n,r,a){if(La(n)){var o=!0;Aa(t)}else o=!1;if(No(t,a),null===t.stateNode)Ul(e,t),il(t,n,r),sl(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var s=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Mo(c):c=Ma(t,c=La(n)?Na:Pa.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||s!==c)&&ll(t,i,r,c),Ao=!1;var p=t.memoizedState;i.state=p,Uo(t,r,i,a),s=t.memoizedState,l!==r||p!==s||Ra.current||Ao?("function"===typeof d&&(rl(t,n,d,r),s=t.memoizedState),(l=Ao||ol(t,n,l,r,p,s,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=c,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Do(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:nl(t.type,l),i.props=c,u=t.pendingProps,p=i.context,"object"===typeof(s=n.contextType)&&null!==s?s=Mo(s):s=Ma(t,s=La(n)?Na:Pa.current);var f=n.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||p!==s)&&ll(t,i,r,s),Ao=!1,p=t.memoizedState,i.state=p,Uo(t,r,i,a);var m=t.memoizedState;l!==u||p!==m||Ra.current||Ao?("function"===typeof f&&(rl(t,n,f,r),m=t.memoizedState),(c=Ao||ol(t,n,c,r,p,m,s)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=s,r=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,o,a)}function Pl(e,t,n,r,a,o){Cl(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Oa(t,n,!1),Vl(e,t,o);r=t.stateNode,bl.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,l,o)):xl(e,t,l,o),t.memoizedState=r.state,a&&Oa(t,n,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?za(0,t.pendingContext,t.pendingContext!==t.context):t.context&&za(0,t.context,!1),Ko(e,t.containerInfo)}function Nl(e,t,n,r,a){return mo(),ho(a),t.flags|=256,xl(e,t,n,r),t.child}var Ml,Ll,Il,zl,Bl={dehydrated:null,treeContext:null,retryLane:0};function Al(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ol(e,t,n){var r,a=t.pendingProps,i=ei.current,l=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ta(ei,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=a.children,e=a.fallback,l?(a=t.mode,l=t.child,s={mode:"hidden",children:s},0===(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Ac(s,a,0,null),e=Bc(e,a,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Al(n),t.memoizedState=Bl,e):Dl(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,l){if(n)return 256&t.flags?(t.flags&=-257,_l(e,t,l,r=dl(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Ac({mode:"visible",children:r.children},a,0,null),(i=Bc(i,a,l,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,l),t.child.memoizedState=Al(l),t.memoizedState=Bl,i);if(0===(1&t.mode))return _l(e,t,l,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var s=r.dgst;return r=s,_l(e,t,l,r=dl(i=Error(o(419)),r,void 0))}if(s=0!==(l&e.childLanes),vl||s){if(null!==(r=Rs)){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|l))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Bo(e,a),nc(r,e,a,-1))}return hc(),_l(e,t,l,r=dl(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(qa[Ya++]=Ka,qa[Ya++]=Ja,qa[Ya++]=$a,Ka=e.id,Ja=e.overflow,$a=t),t=Dl(t,r.children),t.flags|=4096,t)}(e,t,s,a,r,i,n);if(l){l=a.fallback,s=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&s)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?l=Ic(r,l):(l=Bc(l,s,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,s=null===(s=e.child.memoizedState)?Al(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=Bl,a}return e=(l=e.child).sibling,a=Ic(l,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Dl(e,t){return(t=Ac({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function _l(e,t,n,r){return null!==r&&ho(r),wo(t,e.child,null,n),(e=Dl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ro(e.return,t,n)}function Fl(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Hl(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(xl(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wl(e,n,t);else if(19===e.tag)Wl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ta(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fl(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fl(t,!0,n,null,o);break;case"together":Fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),As|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gl(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ql(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ql(t),null;case 1:case 17:return La(t.type)&&Ia(),Ql(t),null;case 3:return r=t.stateNode,Jo(),Ca(Ra),Ca(Pa),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ic(oo),oo=null))),Ll(e,t),Ql(t),null;case 5:Zo(t);var a=$o(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Il(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ql(t),null}if(e=$o(Qo.current),po(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[pa]=t,r[fa]=i,e=0!==(1&t.mode),n){case"dialog":_r("cancel",r),_r("close",r);break;case"iframe":case"object":case"embed":_r("load",r);break;case"video":case"audio":for(a=0;a<Br.length;a++)_r(Br[a],r);break;case"source":_r("error",r);break;case"img":case"image":case"link":_r("error",r),_r("load",r);break;case"details":_r("toggle",r);break;case"input":K(r,i),_r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_r("invalid",r);break;case"textarea":ae(r,i),_r("invalid",r)}for(var s in be(n,i),a=null,i)if(i.hasOwnProperty(s)){var c=i[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",""+c]):l.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&_r("scroll",r)}switch(n){case"input":Q(r),Z(r,i,!0);break;case"textarea":Q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[pa]=t,e[fa]=r,Ml(e,t,!1,!1),t.stateNode=e;e:{switch(s=ve(n,r),n){case"dialog":_r("cancel",e),_r("close",e),a=r;break;case"iframe":case"object":case"embed":_r("load",e),a=r;break;case"video":case"audio":for(a=0;a<Br.length;a++)_r(Br[a],e);a=r;break;case"source":_r("error",e),a=r;break;case"img":case"image":case"link":_r("error",e),_r("load",e),a=r;break;case"details":_r("toggle",e),a=r;break;case"input":K(e,r),a=$(e,r),_r("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=O({},r,{value:void 0}),_r("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),_r("invalid",e)}for(i in be(n,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&pe(e,d):"number"===typeof d&&pe(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&_r("scroll",e):null!=d&&v(e,i,d,s))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ql(t),null;case 6:if(e&&null!=t.stateNode)zl(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=$o(Yo.current),$o(Qo.current),po(t)){if(r=t.stateNode,n=t.memoizedProps,r[pa]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pa]=t,t.stateNode=r}return Ql(t),null;case 13:if(Ca(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),mo(),t.flags|=98560,i=!1;else if(i=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[pa]=t}else mo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ql(t),i=!1}else null!==oo&&(ic(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===zs&&(zs=3):hc())),null!==t.updateQueue&&(t.flags|=4),Ql(t),null);case 4:return Jo(),Ll(e,t),null===e&&Hr(t.stateNode.containerInfo),Ql(t),null;case 10:return Po(t.type._context),Ql(t),null;case 19:if(Ca(ei),null===(i=t.memoizedState))return Ql(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Gl(i,!1);else{if(0!==zs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ti(e))){for(t.flags|=128,Gl(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ta(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Hs&&(t.flags|=128,r=!0,Gl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!ao)return Ql(t),null}else 2*Je()-i.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=128,r=!0,Gl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ei.current,Ta(ei,r?1&n|2:1&n),t):(Ql(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ls)&&(Ql(t),6&t.subtreeFlags&&(t.flags|=8192)):Ql(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Yl(e,t){switch(to(t),t.tag){case 1:return La(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Ca(Ra),Ca(Pa),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ca(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));mo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(ei),null;case 4:return Jo(),null;case 10:return Po(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ml=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ll=function(){},Il=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,$o(Qo.current);var o,i=null;switch(n){case"input":a=$(e,a),r=$(e,r),i=[];break;case"select":a=O({},a,{value:void 0}),r=O({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in be(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var s=a[d];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(s=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==s&&(null!=c||null!=s))if("style"===d)if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&_r("scroll",e),i||s===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},zl=function(e,t,n,r){n!==r&&(t.flags|=4)};var $l=!1,Kl=!1,Jl="function"===typeof WeakSet?WeakSet:Set,Xl=null;function Zl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){jc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&es(t,n,o)}a=a.next}while(a!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[fa],delete t[ha],delete t[ga],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function is(e){return 5===e.tag||3===e.tag||4===e.tag}function ls(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||is(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ds=null,us=!1;function ps(e,t,n){for(n=n.child;null!==n;)fs(e,t,n),n=n.sibling}function fs(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(l){}switch(n.tag){case 5:Kl||Zl(n,t);case 6:var r=ds,a=us;ds=null,ps(e,t,n),us=a,null!==(ds=r)&&(us?(e=ds,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ds.removeChild(n.stateNode));break;case 18:null!==ds&&(us?(e=ds,n=n.stateNode,8===e.nodeType?sa(e.parentNode,n):1===e.nodeType&&sa(e,n),Ht(e)):sa(ds,n.stateNode));break;case 4:r=ds,a=us,ds=n.stateNode.containerInfo,us=!0,ps(e,t,n),ds=r,us=a;break;case 0:case 11:case 14:case 15:if(!Kl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&es(n,t,i),a=a.next}while(a!==r)}ps(e,t,n);break;case 1:if(!Kl&&(Zl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){jc(n,t,l)}ps(e,t,n);break;case 21:ps(e,t,n);break;case 22:1&n.mode?(Kl=(r=Kl)||null!==n.memoizedState,ps(e,t,n),Kl=r):ps(e,t,n);break;default:ps(e,t,n)}}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jl),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:ds=s.stateNode,us=!1;break e;case 3:case 4:ds=s.stateNode.containerInfo,us=!0;break e}s=s.return}if(null===ds)throw Error(o(160));fs(i,l,a),ds=null,us=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){jc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gs(t,e),t=t.sibling}function gs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(g){jc(e,e.return,g)}try{ns(5,e,e.return)}catch(g){jc(e,e.return,g)}}break;case 1:hs(t,e),ys(e),512&r&&null!==n&&Zl(n,n.return);break;case 5:if(hs(t,e),ys(e),512&r&&null!==n&&Zl(n,n.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(g){jc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,l=null!==n?n.memoizedProps:i,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===i.type&&null!=i.name&&J(a,i),ve(s,l);var d=ve(s,i);for(l=0;l<c.length;l+=2){var u=c[l],p=c[l+1];"style"===u?ge(a,p):"dangerouslySetInnerHTML"===u?ue(a,p):"children"===u?pe(a,p):v(a,u,p,d)}switch(s){case"input":X(a,i);break;case"textarea":oe(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){jc(e,e.return,g)}}break;case 6:if(hs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){jc(e,e.return,g)}}break;case 3:if(hs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){jc(e,e.return,g)}break;case 4:default:hs(t,e),ys(e);break;case 13:hs(t,e),ys(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Fs=Je())),4&r&&ms(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Kl=(d=Kl)||u,hs(t,e),Kl=d):hs(t,e),ys(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xl=e,u=e.child;null!==u;){for(p=Xl=u;null!==Xl;){switch(m=(f=Xl).child,f.tag){case 0:case 11:case 14:case 15:ns(4,f,f.return);break;case 1:Zl(f,f.return);var h=f.stateNode;if("function"===typeof h.componentWillUnmount){r=f,n=f.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){jc(r,n,g)}}break;case 5:Zl(f,f.return);break;case 22:if(null!==f.memoizedState){ws(p);continue}}null!==m?(m.return=f,Xl=m):ws(p)}u=u.sibling}e:for(u=null,p=e;;){if(5===p.tag){if(null===u){u=p;try{a=p.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=p.stateNode,l=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=he("display",l))}catch(g){jc(e,e.return,g)}}}else if(6===p.tag){if(null===u)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(g){jc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:hs(t,e),ys(e),4&r&&ms(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(is(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(pe(a,""),r.flags&=-33),cs(e,ls(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ss(e,ls(e),i);break;default:throw Error(o(161))}}catch(l){jc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bs(e,t,n){Xl=e,vs(e,t,n)}function vs(e,t,n){for(var r=0!==(1&e.mode);null!==Xl;){var a=Xl,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||$l;if(!i){var l=a.alternate,s=null!==l&&null!==l.memoizedState||Kl;l=$l;var c=Kl;if($l=i,(Kl=s)&&!c)for(Xl=a;null!==Xl;)s=(i=Xl).child,22===i.tag&&null!==i.memoizedState?ks(a):null!==s?(s.return=i,Xl=s):ks(a);for(;null!==o;)Xl=o,vs(o,t,n),o=o.sibling;Xl=a,$l=l,Kl=c}xs(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Xl=o):xs(e)}}function xs(e){for(;null!==Xl;){var t=Xl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Kl||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Kl)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:nl(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Vo(t,i,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var p=u.dehydrated;null!==p&&Ht(p)}}}break;default:throw Error(o(163))}Kl||512&t.flags&&as(t)}catch(f){jc(t,t.return,f)}}if(t===e){Xl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xl=n;break}Xl=t.return}}function ws(e){for(;null!==Xl;){var t=Xl;if(t===e){Xl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xl=n;break}Xl=t.return}}function ks(e){for(;null!==Xl;){var t=Xl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){jc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(s){jc(t,a,s)}}var o=t.return;try{as(t)}catch(s){jc(t,o,s)}break;case 5:var i=t.return;try{as(t)}catch(s){jc(t,i,s)}}}catch(s){jc(t,t.return,s)}if(t===e){Xl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Xl=l;break}Xl=t.return}}var Ss,js=Math.ceil,Cs=x.ReactCurrentDispatcher,Ts=x.ReactCurrentOwner,Es=x.ReactCurrentBatchConfig,Ps=0,Rs=null,Ns=null,Ms=0,Ls=0,Is=ja(0),zs=0,Bs=null,As=0,Os=0,Ds=0,_s=null,Ws=null,Fs=0,Hs=1/0,Us=null,Vs=!1,Gs=null,Qs=null,qs=!1,Ys=null,$s=0,Ks=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Ps)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ps)&&0!==Ms?Ms&-Ms:null!==go.transition?(0===Zs&&(Zs=ht()),Zs):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,r){if(50<Ks)throw Ks=0,Js=null,Error(o(185));yt(e,n,r),0!==(2&Ps)&&e===Rs||(e===Rs&&(0===(2&Ps)&&(Os|=n),4===zs&&lc(e,Ms)),rc(e,r),1===n&&0===Ps&&0===(1&t.mode)&&(Hs=Je()+500,_a&&Ha()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),l=1<<i,s=a[i];-1===s?0!==(l&n)&&0===(l&r)||(a[i]=ft(l,t)):s<=t&&(e.expiredLanes|=l),o&=~l}}(e,t);var r=pt(e,e===Rs?Ms:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){_a=!0,Fa(e)}(sc.bind(null,e)):Fa(sc.bind(null,e)),ia(function(){0===(6&Ps)&&Ha()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xs=-1,Zs=0,0!==(6&Ps))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=pt(e,e===Rs?Ms:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Ps;Ps|=2;var i=mc();for(Rs===e&&Ms===t||(Us=null,Hs=Je()+500,pc(e,t));;)try{bc();break}catch(s){fc(e,s)}Eo(),Cs.current=i,Ps=a,null!==Ns?t=0:(Rs=null,Ms=0,t=zs)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Bs,pc(e,0),lc(e,r),rc(e,Je()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!lr(o(),a))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=mt(e))&&(r=i,t=oc(e,i))),1===t))throw n=Bs,pc(e,0),lc(e,r),rc(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Ws,Us);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Fs+500-Je())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Ws,Us),t);break}wc(e,Ws,Us);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-it(r);i=1<<l,(l=t[l])>a&&(a=l),r&=~i}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*js(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Ws,Us),r);break}wc(e,Ws,Us);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=_s;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ws,Ws=n,null!==t&&ic(t)),e}function ic(e){null===Ws?Ws=e:Ws.push.apply(Ws,e)}function lc(e,t){for(t&=~Ds,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Ps))throw Error(o(327));kc();var t=pt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Bs,pc(e,0),lc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ws,Us),rc(e,Je()),null}function cc(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Hs=Je()+500,_a&&Ha())}}function dc(e){null!==Ys&&0===Ys.tag&&0===(6&Ps)&&kc();var t=Ps;Ps|=1;var n=Es.transition,r=vt;try{if(Es.transition=null,vt=1,e)return e()}finally{vt=r,Es.transition=n,0===(6&(Ps=t))&&Ha()}}function uc(){Ls=Is.current,Ca(Is)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ia();break;case 3:Jo(),Ca(Ra),Ca(Pa),ri();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:Ca(ei);break;case 10:Po(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Rs=e,Ns=e=Ic(e.current,null),Ms=Ls=t,zs=0,Bs=null,Ds=Os=As=0,Ws=_s=null,null!==Lo){for(t=0;t<Lo.length;t++)if(null!==(r=(n=Lo[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}Lo=null}return e}function fc(e,t){for(;;){var n=Ns;try{if(Eo(),ai.current=Xi,di){for(var r=li.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}di=!1}if(ii=0,ci=si=li=null,ui=!1,pi=0,Ts.current=null,null===n||null===n.return){zs=1,Bs=t,Ns=null;break}e:{var i=e,l=n.return,s=n,c=t;if(t=Ms,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=s,p=u.tag;if(0===(1&u.mode)&&(0===p||11===p||15===p)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=gl(l);if(null!==m){m.flags&=-257,yl(m,l,s,0,t),1&m.mode&&hl(i,d,t),c=d;var h=(t=m).updateQueue;if(null===h){var g=new Set;g.add(c),t.updateQueue=g}else h.add(c);break e}if(0===(1&t)){hl(i,d,t),hc();break e}c=Error(o(426))}else if(ao&&1&s.mode){var y=gl(l);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yl(y,l,s,0,t),ho(cl(c,s));break e}}i=c=cl(c,s),4!==zs&&(zs=2),null===_s?_s=[i]:_s.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ho(i,fl(0,c,t));break e;case 1:s=c;var b=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Qs||!Qs.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Ho(i,ml(i,s,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function mc(){var e=Cs.current;return Cs.current=Xi,null===e?Xi:e}function hc(){0!==zs&&3!==zs&&2!==zs||(zs=4),null===Rs||0===(268435455&As)&&0===(268435455&Os)||lc(Rs,Ms)}function gc(e,t){var n=Ps;Ps|=2;var r=mc();for(Rs===e&&Ms===t||(Us=null,pc(e,t));;)try{yc();break}catch(a){fc(e,a)}if(Eo(),Ps=n,Cs.current=r,null!==Ns)throw Error(o(261));return Rs=null,Ms=0,zs}function yc(){for(;null!==Ns;)vc(Ns)}function bc(){for(;null!==Ns&&!$e();)vc(Ns)}function vc(e){var t=Ss(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?xc(e):Ns=t,Ts.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ql(n,t,Ls)))return void(Ns=n)}else{if(null!==(n=Yl(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return zs=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===zs&&(zs=5)}function wc(e,t,n){var r=vt,a=Es.transition;try{Es.transition=null,vt=1,function(e,t,n,r){do{kc()}while(null!==Ys);if(0!==(6&Ps))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Rs&&(Ns=Rs=null,Ms=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qs||(qs=!0,Rc(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Es.transition,Es.transition=null;var l=vt;vt=1;var s=Ps;Ps|=4,Ts.current=null,function(e,t){if(ea=Vt,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var l=0,s=-1,c=-1,d=0,u=0,p=e,f=null;t:for(;;){for(var m;p!==n||0!==a&&3!==p.nodeType||(s=l+a),p!==i||0!==r&&3!==p.nodeType||(c=l+r),3===p.nodeType&&(l+=p.nodeValue.length),null!==(m=p.firstChild);)f=p,p=m;for(;;){if(p===e)break t;if(f===n&&++d===a&&(s=l),f===i&&++u===r&&(c=l),null!==(m=p.nextSibling))break;f=(p=f).parentNode}p=m}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Vt=!1,Xl=t;null!==Xl;)if(e=(t=Xl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xl=e;else for(;null!==Xl;){t=Xl;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,y=h.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:nl(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xl=e;break}Xl=t.return}h=ts,ts=!1}(e,n),gs(n,e),mr(ta),Vt=!!ea,ta=ea=null,e.current=n,bs(n,e,a),Ke(),Ps=s,vt=l,Es.transition=i}else e.current=n;if(qs&&(qs=!1,Ys=e,$s=a),i=e.pendingLanes,0===i&&(Qs=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Vs)throw Vs=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Js?Ks++:(Ks=0,Js=e):Ks=0,Ha()}(e,t,n,r)}finally{Es.transition=a,vt=r}return null}function kc(){if(null!==Ys){var e=xt($s),t=Es.transition,n=vt;try{if(Es.transition=null,vt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ps))throw Error(o(331));var a=Ps;for(Ps|=4,Xl=e.current;null!==Xl;){var i=Xl,l=i.child;if(0!==(16&Xl.flags)){var s=i.deletions;if(null!==s){for(var c=0;c<s.length;c++){var d=s[c];for(Xl=d;null!==Xl;){var u=Xl;switch(u.tag){case 0:case 11:case 15:ns(8,u,i)}var p=u.child;if(null!==p)p.return=u,Xl=p;else for(;null!==Xl;){var f=(u=Xl).sibling,m=u.return;if(os(u),u===d){Xl=null;break}if(null!==f){f.return=m,Xl=f;break}Xl=m}}}var h=i.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Xl=l;else e:for(;null!==Xl;){if(0!==(2048&(i=Xl).flags))switch(i.tag){case 0:case 11:case 15:ns(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Xl=b;break e}Xl=i.return}}var v=e.current;for(Xl=v;null!==Xl;){var x=(l=Xl).child;if(0!==(2064&l.subtreeFlags)&&null!==x)x.return=l,Xl=x;else e:for(l=v;null!==Xl;){if(0!==(2048&(s=Xl).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(k){jc(s,s.return,k)}if(s===l){Xl=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xl=w;break e}Xl=s.return}}if(Ps=a,Ha(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{vt=n,Es.transition=t}}return!1}function Sc(e,t,n){e=Wo(e,t=fl(0,t=cl(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){t=Wo(t,e=ml(t,e=cl(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Ms&n)===n&&(4===zs||3===zs&&(130023424&Ms)===Ms&&500>Je()-Fs?pc(e,0):Ds|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Bo(e,t))&&(yt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Rc(e,t){return qe(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Nc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,a,i){var l=2;if(r=e,"function"===typeof e)Lc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case S:return Bc(n.children,a,i,t);case j:l=8,a|=8;break;case C:return(e=Mc(12,n,t,2|a)).elementType=C,e.lanes=i,e;case R:return(e=Mc(13,n,t,a)).elementType=R,e.lanes=i,e;case N:return(e=Mc(19,n,t,a)).elementType=N,e.lanes=i,e;case I:return Ac(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:l=10;break e;case E:l=9;break e;case P:l=11;break e;case M:l=14;break e;case L:l=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(l,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Bc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Ac(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _c(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,a,o,i,l,s){return e=new _c(e,t,n,l,s),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Fc(e){if(!e)return Ea;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(La(n))return Ba(e,n,t)}return t}function Hc(e,t,n,r,a,o,i,l,s){return(e=Wc(n,r,!0,e,0,o,0,l,s)).context=Fc(null),n=e.current,(o=_o(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Wo(n,o,a),e.current.lanes=a,yt(e,a,r),rc(e,r),e}function Uc(e,t,n,r){var a=t.current,o=ec(),i=tc(a);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=_o(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Wo(a,t,i))&&(nc(e,a,i,o),Fo(e,a,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ra.current)vl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vl=!1,function(e,t,n){switch(t.tag){case 3:Rl(t),mo();break;case 5:Xo(t);break;case 1:La(t.type)&&Aa(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ta(So,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ta(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ol(e,t,n):(Ta(ei,1&ei.current),null!==(e=Vl(e,t,n))?e.sibling:null);Ta(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ta(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,jl(e,t,n)}return Vl(e,t,n)}(e,t,n);vl=0!==(131072&e.flags)}else vl=!1,ao&&0!==(1048576&t.flags)&&Za(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ul(e,t),e=t.pendingProps;var a=Ma(t,Pa.current);No(t,n),a=gi(null,t,r,e,a,n);var i=yi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(r)?(i=!0,Aa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Oo(t),a.updater=al,t.stateNode=a,a._reactInternals=t,sl(t,r,e,n),t=Pl(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),xl(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===M)return 14}return 2}(r),e=nl(r,e),a){case 0:t=Tl(null,t,r,e,n);break e;case 1:t=El(null,t,r,e,n);break e;case 11:t=wl(null,t,r,e,n);break e;case 14:t=kl(null,t,r,nl(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Tl(e,t,r,a=t.elementType===r?a:nl(r,a),n);case 1:return r=t.type,a=t.pendingProps,El(e,t,r,a=t.elementType===r?a:nl(r,a),n);case 3:e:{if(Rl(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Do(e,t),Uo(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Nl(e,t,r,n,a=cl(Error(o(423)),t));break e}if(r!==a){t=Nl(e,t,r,n,a=cl(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mo(),r===a){t=Vl(e,t,n);break e}xl(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,l=a.children,na(r,a)?l=null:null!==i&&na(r,i)&&(t.flags|=32),Cl(e,t),xl(e,t,l,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ol(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):xl(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,wl(e,t,r,a=t.elementType===r?a:nl(r,a),n);case 7:return xl(e,t,t.pendingProps,n),t.child;case 8:case 12:return xl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Ta(So,r._currentValue),r._currentValue=l,null!==i)if(lr(i.value,l)){if(i.children===a.children&&!Ra.current){t=Vl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){l=i.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=_o(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ro(i.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(o(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Ro(l,n,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}xl(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,No(t,n),r=r(a=Mo(a)),t.flags|=1,xl(e,t,r,n),t.child;case 14:return a=nl(r=t.type,t.pendingProps),kl(e,t,r,a=nl(r.type,a),n);case 15:return Sl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:nl(r,a),Ul(e,t),t.tag=1,La(r)?(e=!0,Aa(t)):e=!1,No(t,n),il(t,r,a),sl(t,r,a,n),Pl(null,t,r,!0,e,n);case 19:return Hl(e,t,n);case 22:return jl(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var l=a;a=function(){var e=Vc(i);l.call(e)}}Uc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Vc(i);o.call(e)}}var i=Hc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ma]=i.current,Hr(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var l=r;r=function(){var e=Vc(s);l.call(e)}}var s=Wc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=s,e[ma]=s.current,Hr(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,s,n,r)}),s}(n,t,e,a,r);return Vc(i)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Uc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[ma]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Je()),0===(6&Ps)&&(Hs=Je()+500,Ha()))}break;case 13:dc(function(){var t=Bo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Qc(e,1)}},kt=function(e){if(13===e.tag){var t=Bo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Bo(e,t);if(null!==n)nc(n,e,t,ec());Qc(e,t)}},jt=function(){return vt},Ct=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(o(90));q(r),X(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=cc,Re=dc;var ed={usingClientEntryPoint:!1,Events:[va,xa,wa,Te,Ee,cc]},td={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{at=rd.inject(nd),ot=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(o(299));var n=!1,r="",a=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,r,a),e[ma]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",l=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,i,l),e[ma]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=n(43),c=n(391),d=n(579);function u(e){let{onNewCampaign:t,onLoadCampaign:n,onCharacterCreator:r,onNameGenerator:a,onSpellGenerator:o,onSpellAssignment:i,onHealingSystem:c,onPortraitStudio:u}=e;const[p,f]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[g,y]=(0,s.useState)("campaigns"),[b,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{x(),k()},[]);const x=()=>{try{let e=w();f(e);const t=localStorage.getItem("world-engine-campaigns"),n=localStorage.getItem("world-engine-campaigns-backup");!t&&n&&e.length>0&&alert("\u26a0\ufe0f Primary save was missing, but your campaigns were recovered from backup!")}catch(e){console.error("Error loading campaigns:",e),f([])}},w=()=>{try{let e=JSON.parse(localStorage.getItem("world-engine-campaigns")||"[]");if(0===e.length){const t=JSON.parse(localStorage.getItem("world-engine-campaigns-backup")||"{}");t.campaigns&&t.campaigns.length>0&&(e=t.campaigns,localStorage.setItem("world-engine-campaigns",JSON.stringify(e)),console.log("Recovered campaigns from backup storage"))}if(0===e.length){const t=JSON.parse(sessionStorage.getItem("world-engine-campaigns-session")||"[]");t.length>0&&(e=t,localStorage.setItem("world-engine-campaigns",JSON.stringify(e)),console.log("Recovered campaigns from session storage"))}return e}catch(e){return console.error("Error recovering campaigns:",e),[]}},k=()=>{try{const e=localStorage.getItem("world-engine-characters");e&&h(JSON.parse(e))}catch(e){console.error("Error loading characters:",e)}},S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=e=>({padding:"12px 24px",background:"none",border:"none",color:e?"#3b82f6":"#94a3b8",fontSize:"1.1rem",fontWeight:e?"600":"400",cursor:"pointer",borderBottom:e?"2px solid #3b82f6":"2px solid transparent",transition:"all 0.2s ease"}),C={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",marginBottom:"30px"},T={background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"20px",transition:"all 0.2s ease",cursor:"pointer"},E=l(l({},T),{},{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",border:"1px solid #10b981",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"120px"}),P={background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.2s ease"},R=l(l({},P),{},{background:"#dc2626",marginLeft:"8px"}),N=e=>{let{character:t,onClose:n}=e;const r={background:"#0f172a",padding:"12px",borderRadius:"8px",textAlign:"center",border:"1px solid #334155"};return(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},onClick:n,children:(0,d.jsxs)("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"30px",maxWidth:"600px",maxHeight:"80vh",width:"100%",overflowY:"auto",color:"#f8fafc"},onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,d.jsx)("h2",{style:{margin:0,color:"#3b82f6"},children:t.name}),(0,d.jsx)("button",{onClick:n,style:{background:"#374151",color:"#f8fafc",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"16px"},children:"\u2715"})]}),(0,d.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,d.jsx)("p",{style:{margin:"5px 0",fontSize:"18px"},children:(0,d.jsxs)("strong",{children:[t.race," ",t.characterClass]})}),(0,d.jsxs)("p",{style:{margin:"5px 0",color:"#94a3b8"},children:["Level ",t.level]}),(0,d.jsxs)("p",{style:{margin:"5px 0",color:"#64748b",fontSize:"14px"},children:["Created: ",S(t.createdAt)]})]}),t.data&&(0,d.jsxs)(d.Fragment,{children:[t.data.pronouns&&(0,d.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:"Pronouns"}),(0,d.jsx)("p",{style:{margin:0,color:"#e2e8f0"},children:t.data.pronouns})]}),t.data.background&&(0,d.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:"Background"}),(0,d.jsx)("p",{style:{margin:0,color:"#e2e8f0"},children:t.data.background})]}),t.data.stats&&(0,d.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 12px 0",color:"#8b5cf6"},children:"Ability Scores"}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"15px",margin:"20px 0"},children:Object.entries(t.data.stats).map(e=>{let[t,n]=e;const a=Number(n);return(0,d.jsxs)("div",{style:r,children:[(0,d.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px",color:"#94a3b8",marginBottom:"4px"},children:t.toUpperCase()}),(0,d.jsx)("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#f1f5f9"},children:a}),(0,d.jsxs)("div",{style:{fontSize:"12px",color:"#64748b"},children:[a>=10?"+":"",Math.floor((a-10)/2)]})]},t)})})]}),t.data.traits&&t.data.traits.length>0&&(0,d.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 12px 0",color:"#8b5cf6"},children:"Traits"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.data.traits.map((e,t)=>(0,d.jsx)("span",{style:{background:"#0f172a",color:"#e2e8f0",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",border:"1px solid #334155"},children:e},t))})]}),(t.data.knownCantrips&&t.data.knownCantrips.length>0||t.data.knownSpells&&t.data.knownSpells.length>0)&&(0,d.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 12px 0",color:"#8b5cf6"},children:"Spells & Magic"}),t.data.level&&(0,d.jsxs)("p",{style:{margin:"0 0 8px 0",color:"#94a3b8",fontSize:"14px"},children:["Level ",t.data.level," Character"]}),t.data.knownCantrips&&t.data.knownCantrips.length>0&&(0,d.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,d.jsx)("h5",{style:{margin:"0 0 6px 0",color:"#ec4899"},children:"Known Cantrips:"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:t.data.knownCantrips.map((e,t)=>(0,d.jsx)("span",{style:{background:"#ec4899",color:"white",padding:"3px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"bold"},children:e},t))})]}),t.data.knownSpells&&t.data.knownSpells.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{style:{margin:"0 0 6px 0",color:"#3b82f6"},children:"Known Spells:"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:t.data.knownSpells.map((e,t)=>(0,d.jsx)("span",{style:{background:"#3b82f6",color:"white",padding:"3px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"bold"},children:e},t))})]})]}),t.data.mode&&(0,d.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:"Creation Method"}),(0,d.jsx)("p",{style:{margin:0,color:"#e2e8f0"},children:"POINT_BUY"===t.data.mode?"Point Buy System":"Dice Roll"})]})]}),(0,d.jsx)("div",{style:{marginTop:"20px",textAlign:"center"},children:(0,d.jsx)("button",{onClick:n,style:l(l({},P),{},{background:"#059669",padding:"10px 20px",fontSize:"16px"}),children:"Close"})})]})})};return(0,d.jsxs)("div",{style:{background:"linear-gradient(135deg, #0c1426 0%, #1e293b 100%)",minHeight:"100vh",color:"#f8fafc",fontFamily:"system-ui, -apple-system, sans-serif"},children:[(0,d.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",borderBottom:"1px solid #334155"},children:[(0,d.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"bold",margin:"0 0 10px 0",background:"linear-gradient(45deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"World Engine"}),(0,d.jsx)("p",{style:{fontSize:"1.2rem",color:"#94a3b8",margin:0},children:"Campaign & Character Management"}),(0,d.jsxs)("div",{style:{marginTop:"20px",display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[(0,d.jsx)("button",{onClick:()=>{try{const e={campaigns:p,characters:m,exportDate:(new Date).toISOString(),version:"2.0",worldEngineVersion:"v1.0.0"},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="world-engine-backup-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),alert("\u2705 Backup downloaded successfully!")}catch(e){console.error("Error downloading backup:",e),alert("\u274c Failed to download backup")}},style:l(l({},P),{},{background:"#059669",display:"flex",alignItems:"center",gap:"6px"}),children:"\ud83d\udcbe Download Backup"}),(0,d.jsxs)("label",{style:l(l({},P),{},{background:"#7c3aed",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"}),children:["\ud83d\udcc2 Import Backup",(0,d.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{try{var t,n,r;const a=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);a.campaigns&&Array.isArray(a.campaigns)&&(localStorage.setItem("world-engine-campaigns",JSON.stringify(a.campaigns)),localStorage.setItem("world-engine-campaigns-backup",JSON.stringify(a)),f(a.campaigns)),a.characters&&Array.isArray(a.characters)&&(localStorage.setItem("world-engine-characters",JSON.stringify(a.characters)),localStorage.setItem("world-engine-characters-backup",JSON.stringify(a.characters)),h(a.characters)),alert("\u2705 Backup imported successfully!\nCampaigns: ".concat((null===(n=a.campaigns)||void 0===n?void 0:n.length)||0,"\nCharacters: ").concat((null===(r=a.characters)||void 0===r?void 0:r.length)||0))}catch(a){console.error("Error importing backup:",a),alert("\u274c Invalid backup file format")}},r.readAsText(n),e.target.value=""},style:{display:"none"}})]}),(0,d.jsx)("button",{onClick:()=>{try{const e=w();f(e);const t=localStorage.getItem("world-engine-characters-backup");if(t){const e=JSON.parse(t);Array.isArray(e)&&(localStorage.setItem("world-engine-characters",JSON.stringify(e)),h(e))}alert("\ud83d\udd04 Recovery attempt completed!\nRecovered ".concat(e.length," campaigns"))}catch(e){console.error("Error during recovery:",e),alert("\u274c Recovery failed")}},style:l(l({},P),{},{background:"#dc2626",display:"flex",alignItems:"center",gap:"6px"}),children:"\ud83d\udd04 Force Recovery"})]}),(0,d.jsx)("p",{style:{fontSize:"0.85rem",color:"#64748b",marginTop:"12px",fontStyle:"italic"},children:"\ud83d\udca1 Auto-saves every 10 campaign saves \u2022 Backup before major changes"})]}),(0,d.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"40px 20px"},children:[(0,d.jsxs)("div",{style:{display:"flex",marginBottom:"30px",borderBottom:"1px solid #334155"},children:[(0,d.jsx)("button",{style:j("campaigns"===g),onClick:()=>y("campaigns"),children:"Campaigns"}),(0,d.jsx)("button",{style:j("characters"===g),onClick:()=>y("characters"),children:"Character Library"})]}),"campaigns"===g&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:C,children:[(0,d.jsxs)("div",{style:E,onClick:t,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"+"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"New Campaign"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Start a new adventure"})]}),p.map(e=>(0,d.jsxs)("div",{style:T,children:[(0,d.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#f1f5f9"},children:e.name}),(0,d.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#94a3b8",fontSize:"0.9rem"},children:["World: ",e.worldPreset||"Custom"]}),(0,d.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#94a3b8",fontSize:"0.9rem"},children:["Seed: ",e.seed.substring(0,20),"..."]}),(0,d.jsxs)("p",{style:{margin:"0 0 15px 0",color:"#64748b",fontSize:"0.8rem"},children:["Last played: ",S(e.lastPlayed)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{style:P,onClick:()=>n(e),children:"Load Campaign"}),(0,d.jsx)("button",{style:R,onClick:t=>{t.stopPropagation(),confirm("Delete this campaign?")&&(e=>{const t=p.filter(t=>t.id!==e);f(t),localStorage.setItem("world-engine-campaigns",JSON.stringify(t))})(e.id)},children:"Delete"})]})]},e.id))]}),0===p.length&&(0,d.jsx)("div",{style:{textAlign:"center",color:"#64748b",fontSize:"1.1rem",marginTop:"60px"},children:(0,d.jsx)("p",{children:"No campaigns yet. Create your first campaign to begin!"})})]}),"characters"===g&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:C,children:[(0,d.jsxs)("div",{style:E,onClick:r,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"\u2694\ufe0f"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Create Character"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Build a new character"})]}),(0,d.jsxs)("div",{style:E,onClick:a,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"\ud83d\udcdc"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Name Generator"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Generate fantasy names"})]}),(0,d.jsxs)("div",{style:E,onClick:o,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"\u2728"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Spell Generator"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Create custom spells"})]}),(0,d.jsxs)("div",{style:E,onClick:i,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"\ud83d\udcdc"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Assign Spells"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Give spells to characters"})]}),(0,d.jsxs)("div",{style:E,onClick:c,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"\u2695\ufe0f"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Healing System"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Manage party health & healing"})]}),(0,d.jsxs)("div",{style:E,onClick:u,children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"\ud83c\udfa8"}),(0,d.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Portrait Studio"}),(0,d.jsx)("p",{style:{margin:0,opacity:.9},children:"Create character portraits"})]}),m.map(e=>(0,d.jsxs)("div",{style:T,children:[(0,d.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#f1f5f9"},children:e.name}),(0,d.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#94a3b8",fontSize:"0.9rem"},children:[e.race," ",e.characterClass]}),(0,d.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#94a3b8",fontSize:"0.9rem"},children:["Level ",e.level]}),(0,d.jsxs)("p",{style:{margin:"0 0 15px 0",color:"#64748b",fontSize:"0.8rem"},children:["Created: ",S(e.createdAt)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{style:P,onClick:()=>v(e),children:"View Character"}),(0,d.jsx)("button",{style:R,onClick:t=>{t.stopPropagation(),confirm("Delete this character?")&&(e=>{const t=m.filter(t=>t.id!==e);h(t),localStorage.setItem("world-engine-characters",JSON.stringify(t))})(e.id)},children:"Delete"})]})]},e.id))]}),0===m.length&&(0,d.jsx)("div",{style:{textAlign:"center",color:"#64748b",fontSize:"1.1rem",marginTop:"60px"},children:(0,d.jsx)("p",{children:"No saved characters yet. Create your first character!"})})]})]}),b&&(0,d.jsx)(N,{character:b,onClose:()=>v(null)})]})}function p(e){var t,n,r,a,o;let{eng:i,onNext:l}=e;const[c,u]=(0,s.useState)([]),[p,f]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[g,y]=(0,s.useState)((null===i||void 0===i||null===(t=i.state)||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.seed)||"");console.log("WorldSetupScreen render:",{presets:c,chosen:p}),(0,s.useEffect)(()=>{!async function(){try{var e,t,n,r;console.log("Loading presets..."),await(null===i||void 0===i||null===(e=i.loadWorldPresets)||void 0===e?void 0:e.call(i));const a=(null===i||void 0===i||null===(t=i.state)||void 0===t||null===(n=t.meta)||void 0===n||null===(r=n.presets)||void 0===r?void 0:r.list)||[];u(a),console.log("Loaded presets:",a)}catch(a){console.error("Failed to load presets",a),h("Could not load world presets.")}}()},[i]),(0,s.useEffect)(()=>{var e,t;const n=(null===i||void 0===i||null===(e=i.state)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.seed)||"";n&&n!==g&&y(n)},[null===i||void 0===i||null===(r=i.state)||void 0===r||null===(a=r.meta)||void 0===a?void 0:a.seed]),(0,s.useEffect)(()=>{var e;const t=null===(e=c.find(e=>e.name===p))||void 0===e?void 0:e.seed;var n;!g&&t&&(y(t),null===i||void 0===i||null===(n=i.setSeed)||void 0===n||n.call(i,t))},[p,c]);const b=(0,s.useMemo)(()=>()=>{var e;const t=Date.now().toString(36),n=Math.random().toString(36).slice(2,8),r="".concat(t,"-").concat(n);y(r),null===i||void 0===i||null===(e=i.setSeed)||void 0===e||e.call(i,r)},[i]),v=c.find(e=>(null===e||void 0===e?void 0:e.name)===p);return(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"World Setup"}),m&&(0,d.jsx)("div",{style:{color:"red"},children:m}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{children:"Choose a preset world: "}),(0,d.jsxs)("select",{value:p,onChange:e=>{var t;const n=e.target.value;f(n),null===i||void 0===i||null===(t=i.applyPresetByName)||void 0===t||t.call(i,n)},children:[(0,d.jsx)("option",{value:"",children:"-- none --"}),c.map(e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.name))]}),(0,d.jsxs)("div",{style:{marginTop:12},children:[(0,d.jsx)("label",{htmlFor:"seed",children:"World seed: "}),(0,d.jsx)("input",{id:"seed",type:"text",value:g,onChange:e=>{var t;y(e.target.value),null===i||void 0===i||null===(t=i.setSeed)||void 0===t||t.call(i,e.target.value)},placeholder:"random-seed",style:{width:260}}),(0,d.jsx)("button",{type:"button",style:{marginLeft:8},onClick:b,children:"Randomize"})]}),(null===v||void 0===v?void 0:v.description)&&(0,d.jsx)("p",{style:{marginTop:8,opacity:.8},children:v.description}),null!==v&&void 0!==v&&null!==(o=v.factions)&&void 0!==o&&o.length?(0,d.jsxs)("div",{style:{marginTop:6,fontSize:12},children:["Factions: ",v.factions.join(" \u2022 ")]}):null]}),(0,d.jsx)("button",{onClick:l,disabled:!p&&!g,children:"Next: Create Characters"})]})}const f=[{name:"Kira Stormwind",pronouns:"she/her",species:"Stormcaller",archetype:"Storm Herald",background:"A former temple acolyte who left their old life behind after a mystical awakening. Now they seek knowledge in the wider world, wielding storm magic passed down through generations.",stats:{STR:10,DEX:14,CON:12,INT:15,WIS:13,CHA:11},traits:["Observant","Silver Tongue","Swift"],portraitUrl:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"},{name:"Marcus Ironforge",pronouns:"he/him",species:"Alloy",archetype:"Dust Warden",background:"Born in the crystal caves, they were raised by wise elders and learned the ways of crafting. Their greatest challenge was mastering the fusion of magic and metal that defines their people.",stats:{STR:13,DEX:11,CON:15,INT:14,WIS:12,CHA:8},traits:["Clever","Iron Will","Stoic"],portraitUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"},{name:"Zara Nightwhisper",pronouns:"they/them",species:"Voidkin",archetype:"Wind Sage",background:"A wandering soul from the shadow realm who fought in great battles against the encroaching darkness. Their destiny was forever changed when they discovered their connection to the void grants them unique abilities.",stats:{STR:9,DEX:15,CON:11,INT:12,WIS:14,CHA:13},traits:["Cunning","Lucky","Observant"],portraitUrl:"https://images.unsplash.com/photo-1494790108755-2616c4b43e69?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"},{name:"Theron Greenbough",pronouns:"he/him",species:"Sylvanborn",archetype:"Greenwarden",background:"A guardian of the ancient forests who communes with the spirits of nature. After witnessing the corruption of his homeland, he seeks allies to restore the natural balance.",stats:{STR:12,DEX:13,CON:14,INT:10,WIS:16,CHA:9},traits:["Nature's Friend","Keen Senses","Patient"],portraitUrl:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"}];const m=function(e){var t;let{eng:n,party:r,setParty:a,onStart:o,onCreateNew:i}=e;const[l,c]=(0,s.useState)([]),[u,p]=(0,s.useState)("saved"),[m,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{console.log("CharacterLibrary: Loading saved characters...");try{let e=JSON.parse(localStorage.getItem("world-engine-characters")||"[]");if(0===e.length){const t=JSON.parse(localStorage.getItem("world-engine-characters-backup")||"[]");t.length>0&&(console.log("Restoring from backup:",t.length,"characters"),e=t,localStorage.setItem("world-engine-characters",JSON.stringify(e)))}console.log("CharacterLibrary: Loaded characters:",e.length,"total"),c(e),e.length>0&&localStorage.setItem("world-engine-characters-backup",JSON.stringify(e))}catch(e){console.error("Error loading saved characters:",e),c([])}},[]);const g=e=>{r.length>=4?alert("Party is full! Maximum 4 characters."):r.some(t=>t.name===e.name)?alert("Character already in party!"):a([...r,e])},y="string"===typeof n.state.meta.presets.loaded?n.state.meta.presets.loaded:null===(t=n.state.meta.presets.loaded)||void 0===t?void 0:t.name,b=e=>{let{character:t,onClose:n}=e;return(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,d.jsxs)("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",borderRadius:"12px",padding:"2rem",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto",color:"#e2e8f0",position:"relative"},children:[(0,d.jsx)("button",{onClick:n,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",color:"#94a3b8",fontSize:"1.5rem",cursor:"pointer",padding:"0.5rem"},children:"\xd7"}),(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h2",{style:{margin:"0 0 0.5rem",color:"#f1f5f9",fontSize:"2rem",fontWeight:"bold"},children:t.name}),(0,d.jsxs)("div",{style:{color:"#94a3b8",fontSize:"1.1rem"},children:[t.data.pronouns," \u2022 ",t.race," ",t.characterClass]}),(0,d.jsxs)("div",{style:{color:"#64748b",fontSize:"0.9rem",marginTop:"0.5rem"},children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{color:"#e2e8f0",marginBottom:"1rem"},children:"Ability Scores"}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:Object.entries(t.data.stats).map(e=>{let[t,n]=e;return(0,d.jsxs)("div",{style:{textAlign:"center",padding:"1rem",background:"rgba(15, 23, 42, 0.5)",borderRadius:"8px",border:"1px solid #334155"},children:[(0,d.jsx)("div",{style:{fontSize:"0.9rem",color:"#94a3b8",marginBottom:"0.5rem"},children:t}),(0,d.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f1f5f9"},children:n})]},t)})})]}),t.data.traits&&t.data.traits.length>0&&(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{color:"#e2e8f0",marginBottom:"1rem"},children:"Traits"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:t.data.traits.map((e,t)=>(0,d.jsx)("span",{style:{padding:"0.5rem 1rem",background:"#3b82f6",color:"white",borderRadius:"20px",fontSize:"0.9rem"},children:e},t))})]}),t.data.background&&(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{color:"#e2e8f0",marginBottom:"1rem"},children:"Background"}),(0,d.jsx)("div",{style:{padding:"1rem",background:"rgba(15, 23, 42, 0.5)",borderRadius:"8px",border:"1px solid #334155",color:"#94a3b8",lineHeight:"1.6"},children:t.data.background})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,d.jsx)("button",{onClick:()=>{g(t.data),n()},style:{padding:"0.75rem 1.5rem",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Add to Party"}),(0,d.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this character? This cannot be undone.")&&((e=>{if(!window.confirm("Are you sure you want to delete this character? This cannot be undone."))return;const t=l.filter(t=>t.id!==e);c(t),localStorage.setItem("world-engine-characters",JSON.stringify(t)),localStorage.setItem("world-engine-characters-backup",JSON.stringify(t)),console.log("Deleted character ".concat(e,", remaining:"),t.length)})(t.id),n())},style:{padding:"0.75rem 1.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Delete Character"})]})]})})};return(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"#e2e8f0"},children:[(0,d.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #334155",background:"rgba(15, 23, 42, 0.8)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:"Character Library"}),(0,d.jsxs)("p",{style:{margin:"0.5rem 0 0",opacity:.8},children:["Selected World: ",(0,d.jsx)("span",{style:{color:"#60a5fa",fontWeight:"bold"},children:y||"None"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,d.jsx)("button",{onClick:()=>{const e=JSON.stringify(l,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="world-engine-characters-".concat((new Date).toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(n)},disabled:0===l.length,style:{padding:"0.5rem 1rem",background:0===l.length?"#374151":"#059669",color:"white",border:"none",borderRadius:"4px",cursor:0===l.length?"not-allowed":"pointer",fontSize:"0.9rem"},children:"Export Characters"}),(0,d.jsxs)("label",{style:{padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:["Import Characters",(0,d.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{try{var t;const n=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);Array.isArray(n)?(c(n),localStorage.setItem("world-engine-characters",JSON.stringify(n)),localStorage.setItem("world-engine-characters-backup",JSON.stringify(n)),alert("Successfully imported ".concat(n.length," characters!"))):alert("Invalid file format. Please select a valid character export file.")}catch(n){console.error("Import error:",n),alert("Error importing characters. Please check the file format.")}},r.readAsText(n),e.target.value=""},style:{display:"none"}})]})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flex:1},children:[(0,d.jsxs)("div",{style:{flex:2,padding:"1.5rem",borderRight:"1px solid #334155",overflowY:"auto"},children:[(0,d.jsxs)("div",{style:{display:"flex",marginBottom:"1.5rem",borderBottom:"1px solid #334155"},children:[(0,d.jsxs)("button",{onClick:()=>p("saved"),style:{padding:"0.75rem 1.5rem",background:"saved"===u?"#3b82f6":"transparent",color:"saved"===u?"white":"#94a3b8",border:"none",borderBottom:"saved"===u?"2px solid #3b82f6":"2px solid transparent",cursor:"pointer",fontSize:"1rem"},children:["Saved Characters (",l.length,")"]}),(0,d.jsxs)("button",{onClick:()=>p("presets"),style:{padding:"0.75rem 1.5rem",background:"presets"===u?"#3b82f6":"transparent",color:"presets"===u?"white":"#94a3b8",border:"none",borderBottom:"presets"===u?"2px solid #3b82f6":"2px solid transparent",cursor:"pointer",fontSize:"1rem"},children:["Preset Characters (",f.length,")"]})]}),(0,d.jsx)("button",{onClick:i,style:{width:"100%",padding:"0.75rem",marginBottom:"1.5rem",background:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"1rem",cursor:"pointer",fontWeight:"bold"},children:"Create New Character"}),(0,d.jsx)("div",{style:{display:"grid",gap:"1rem"},children:"saved"===u?0===l.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontStyle:"italic"},children:"No saved characters yet. Create your first character!"}):l.map(e=>(0,d.jsx)("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px",padding:"1rem"},children:(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{margin:"0 0 0.5rem",color:"#f1f5f9"},children:e.name}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0",color:"#94a3b8",fontSize:"0.9rem"},children:[e.race," ",e.characterClass]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0",color:"#64748b",fontSize:"0.8rem"},children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,d.jsx)("button",{onClick:()=>g(e.data),style:{padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"},children:"Add to Party"}),(0,d.jsx)("button",{onClick:()=>h(e),style:{padding:"0.5rem 1rem",background:"#64748b",color:"white",border:"none",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"},children:"View Details"})]})]})},e.id)):f.map((e,t)=>(0,d.jsx)("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px",padding:"1rem"},children:(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.portraitUrl&&(0,d.jsx)("img",{src:e.portraitUrl,alt:e.name,style:{width:"60px",height:"60px",borderRadius:"50%",objectFit:"cover"}}),(0,d.jsxs)("div",{style:{flex:1},children:[(0,d.jsx)("h3",{style:{margin:"0 0 0.5rem",color:"#f1f5f9"},children:e.name}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0",color:"#94a3b8",fontSize:"0.9rem"},children:[e.species," ",e.archetype]}),(0,d.jsx)("p",{style:{margin:"0.5rem 0 0",color:"#64748b",fontSize:"0.8rem",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.background})]}),(0,d.jsx)("button",{onClick:()=>g(e),style:{padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"},children:"Add to Party"})]})},t))})]}),(0,d.jsxs)("div",{style:{flex:1,padding:"1.5rem",background:"rgba(15, 23, 42, 0.5)"},children:[(0,d.jsxs)("h2",{style:{marginBottom:"1rem"},children:["Current Party (",r.length,"/4)"]}),0===r.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontStyle:"italic"},children:"No characters in party. Add characters to get started!"}):(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:r.map((e,t)=>(0,d.jsx)("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px",padding:"1rem"},children:(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.25rem",color:"#f1f5f9"},children:e.name}),(0,d.jsxs)("p",{style:{margin:"0",color:"#94a3b8",fontSize:"0.8rem"},children:[e.species," ",e.archetype]})]}),(0,d.jsx)("button",{onClick:()=>(e=>{a(r.filter((t,n)=>n!==e))})(t),style:{padding:"0.25rem 0.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"4px",fontSize:"0.7rem",cursor:"pointer"},children:"Remove"})]})},t))}),(0,d.jsx)("button",{onClick:o,disabled:0===r.length,style:{width:"100%",padding:"1rem",marginTop:"1.5rem",background:0===r.length?"#374151":"#059669",color:0===r.length?"#6b7280":"white",border:"none",borderRadius:"6px",fontSize:"1.1rem",fontWeight:"bold",cursor:0===r.length?"not-allowed":"pointer"},children:0===r.length?"Add Characters to Start":"Start Adventure"})]})]}),m&&(0,d.jsx)(b,{character:m,onClose:()=>h(null)})]})},h={Greenwarden:{name:"Greenwarden",description:"Protectors of the sacred groves, wielding nature magic and plant allies.",statModifiers:{strength:2,constitution:3,wisdom:4,intelligence:2,dexterity:1,charisma:2},primaryStats:["Wisdom","Constitution"],abilities:["Commune with Plants","Nature's Shield","Healing Touch"],equipment:["Ironwood Staff","Living Armor","Seed Pouch"],faction:"The Rootspeakers"},"Thorn Knight":{name:"Thorn Knight",description:"Warriors who bond with thorned plants, masters of aggressive defense.",statModifiers:{strength:4,constitution:4,wisdom:1,intelligence:1,dexterity:2,charisma:2},primaryStats:["Strength","Constitution"],abilities:["Thorn Armor","Spike Strike","Guardian's Stance"],equipment:["Thorn Blade","Barkskin Mail","Shield of Briars"],faction:"Thornweave Syndicate"},"Sapling Adept":{name:"Sapling Adept",description:"Young mages learning to channel the growth energies of spirit plants.",statModifiers:{strength:1,constitution:2,wisdom:3,intelligence:4,dexterity:3,charisma:1},primaryStats:["Intelligence","Wisdom"],abilities:["Growth Burst","Plant Familiar","Verdant Bolt"],equipment:["Sapling Wand","Apprentice Robes","Botanical Tome"],faction:"The Rootspeakers"},Bloomcaller:{name:"Bloomcaller",description:"Diplomatic negotiators who can speak with all forms of plant life.",statModifiers:{strength:1,constitution:2,wisdom:3,intelligence:2,dexterity:2,charisma:4},primaryStats:["Charisma","Wisdom"],abilities:["Plant Speech","Soothing Pollen","Bloom Command"],equipment:["Flower Crown","Silk Robes","Diplomatic Sash"],faction:"Valebright Court"},Ashblade:{name:"Ashblade",description:"Warriors who forge weapons from the bones and ash of the wasteland.",statModifiers:{strength:4,constitution:3,wisdom:1,intelligence:1,dexterity:3,charisma:2},primaryStats:["Strength","Dexterity"],abilities:["Ash Strike","Heat Resistance","Bone Weapon"],equipment:["Ashforged Blade","Bone Mail","Ember Cloak"],faction:"The Cindermarch"},"Cinder Mystic":{name:"Cinder Mystic",description:"Spellcasters who draw power from the remnant fires of the Great Burning.",statModifiers:{strength:1,constitution:2,wisdom:4,intelligence:4,dexterity:2,charisma:1},primaryStats:["Intelligence","Wisdom"],abilities:["Cinder Bolt","Flame Ward","Ash Scrying"],equipment:["Ember Staff","Cinderwoven Robes","Fire Gem"],faction:"Ember Cult"},"Dust Ranger":{name:"Dust Ranger",description:"Scouts and survivors who know every secret of the wasteland.",statModifiers:{strength:2,constitution:3,wisdom:3,intelligence:2,dexterity:4,charisma:1},primaryStats:["Dexterity","Wisdom"],abilities:["Track in Ash","Sandstorm Cloak","Desert Navigation"],equipment:["Recurved Bow","Desert Garb","Survival Pack"],faction:"Duskward Nomads"},Bonechanter:{name:"Bonechanter",description:"Necromantic priests who sing to the bones of the ancient dead.",statModifiers:{strength:1,constitution:2,wisdom:3,intelligence:3,dexterity:1,charisma:4},primaryStats:["Charisma","Wisdom"],abilities:["Bone Song","Speak with Dead","Ossify"],equipment:["Bone Flute","Death Shroud","Skull Talisman"],faction:"Bonechanters"},Stormcaller:{name:"Stormcaller",description:"Elemental mages who command lightning and wind magic.",statModifiers:{strength:1,constitution:2,wisdom:3,intelligence:4,dexterity:3,charisma:1},primaryStats:["Intelligence","Dexterity"],abilities:["Lightning Bolt","Wind Walk","Storm Shield"],equipment:["Storm Rod","Sky Silk Robes","Weather Compass"],faction:"Stormcaller Guild"},Voidwing:{name:"Voidwing",description:"Sky pirates who master aerial combat and void magic.",statModifiers:{strength:3,constitution:2,wisdom:1,intelligence:2,dexterity:4,charisma:2},primaryStats:["Dexterity","Strength"],abilities:["Void Step","Sky Strike","Gravity Defiance"],equipment:["Void Cutlass","Flight Harness","Pirate's Coat"],faction:"Voidwing Pirates"},"Sky Knight":{name:"Sky Knight",description:"Noble warriors who ride winged mounts and uphold celestial codes.",statModifiers:{strength:4,constitution:3,wisdom:2,intelligence:2,dexterity:2,charisma:3},primaryStats:["Strength","Charisma"],abilities:["Mount Bond","Celestial Strike","Knight's Valor"],equipment:["Sky Lance","Celestial Plate","Noble Seal"],faction:"Celestial Observatory"},"Wind Sage":{name:"Wind Sage",description:"Scholarly monks who study the patterns of air and aether.",statModifiers:{strength:1,constitution:2,wisdom:4,intelligence:3,dexterity:3,charisma:1},primaryStats:["Wisdom","Intelligence"],abilities:["Aether Sight","Wind Meditation","Air Walk"],equipment:["Meditation Staff","Wind Robes","Aether Crystal"],faction:"The Windwright Consortium"}},g=[{name:"Verdance",seed:"verdance-seed-001",description:"A lush frontier of spirit plants, deep roots, and hidden sects.",factions:["Hollowshade Clan","Valebright Court","Thornweave Syndicate","The Rootspeakers"],classes:["Greenwarden","Thorn Knight","Sapling Adept","Bloomcaller"],lore:"In the heart of the Verdance, ancient spirit plants pulse with ethereal light, their roots forming vast networks beneath the forest floor that whisper secrets across continents. The Hollowshade Clan has learned to walk between shadow and root, using umbral magic to commune with the deepest, oldest growths. They believe the plants hold memories of the world's first age, when magic flowed freely through all living things."},{name:"Ashenreach",seed:"ashenreach-seed-002",description:"A scorched expanse of ash dunes, ember cults, and bone singers.",factions:["Ember Cult","Bonechanters","Duskward Nomads","The Cindermarch"],classes:["Ashblade","Cinder Mystic","Dust Ranger","Bonechanter"],lore:"The Ashenreach was not always a wasteland. Once, it was the Golden Empire of Solmere, a realm of crystal spires and sun-blessed fields. But the Great Burning came without warning\u2014whether by dragon fire, fallen star, or the Empire's own hubris, none can say for certain."},{name:"Skyvault",seed:"skyvault-seed-003",description:"Floating citadels and shattered islands drifting in endless skies.",factions:["Stormcaller Guild","Voidwing Pirates","Celestial Observatory","The Windwright Consortium"],classes:["Stormcaller","Voidwing","Sky Knight","Wind Sage"],lore:"When the ancient world shattered in the Sundering, entire continents were cast into the sky, held aloft by veins of raw aetheric force. Now the Skyvault stretches across three layers of heaven."}];function y(e){let t=0;for(let n=9;n<=e;n++)t+=n<=14?1:n<=16?2:3;return t}const b={STR:8,DEX:8,CON:8,INT:8,WIS:8,CHA:8};function v(e,t,n){const r=Math.floor(e/2)+1,a=Math.floor((Math.max(t,n)-10)/2);return Math.max(1,r+Math.max(0,a))}function x(e,t,n){if(e<2)return 0;const r=Math.max(0,e-1),a=Math.floor((Math.max(t,n)-12)/2);return Math.max(0,r+Math.max(0,a))}function w(e){return e<2?0:e<4?1:e<6?2:e<8?3:e<10?4:e<12?5:e<14?6:e<16?7:e<18?8:9}function k(e){return["wizard","sorcerer","warlock"].includes(e.toLowerCase())?"wizard":["cleric","druid","ranger","paladin"].includes(e.toLowerCase())?"cleric":["bard"].includes(e.toLowerCase())?"mixed":"none"}const S={Brave:{name:"Brave",description:"Resistant to fear and intimidation effects. +2 bonus to courage-based checks.",mechanicalEffect:"fear_resistance",bonus:{type:"courage",value:2}},Clever:{name:"Clever",description:"Quick thinking in complex situations. +2 bonus to puzzle-solving and investigation.",mechanicalEffect:"intelligence_bonus",bonus:{type:"investigation",value:2}},Cunning:{name:"Cunning",description:"Skilled at deception and misdirection. +2 bonus to stealth and deception checks.",mechanicalEffect:"deception_bonus",bonus:{type:"stealth",value:2}},Empathic:{name:"Empathic",description:"Deeply understands others' emotions. +2 bonus to persuasion and healing checks.",mechanicalEffect:"social_bonus",bonus:{type:"persuasion",value:2}},Stoic:{name:"Stoic",description:"Unshaken by pain or hardship. +2 bonus to endurance and resistance checks.",mechanicalEffect:"endurance_bonus",bonus:{type:"endurance",value:2}},Lucky:{name:"Lucky",description:"Fortune favors you. Once per encounter, reroll any failed check.",mechanicalEffect:"reroll_ability",bonus:{type:"reroll",value:1}},Observant:{name:"Observant",description:"Notice details others miss. +2 bonus to perception and awareness checks.",mechanicalEffect:"perception_bonus",bonus:{type:"perception",value:2}},"Silver Tongue":{name:"Silver Tongue",description:"Naturally persuasive speaker. +2 bonus to all social interaction checks.",mechanicalEffect:"social_master",bonus:{type:"social",value:2}},"Iron Will":{name:"Iron Will",description:"Mental fortitude against magical effects. +2 bonus to resist mental magic.",mechanicalEffect:"mental_resistance",bonus:{type:"mental_defense",value:2}},Swift:{name:"Swift",description:"Faster movement and reflexes. +2 bonus to speed and reaction checks.",mechanicalEffect:"speed_bonus",bonus:{type:"speed",value:2}},"Nature's Friend":{name:"Nature's Friend",description:"Animals and plants respond favorably. +2 bonus to nature-based interactions.",mechanicalEffect:"nature_bonus",bonus:{type:"nature",value:2}},"Keen Senses":{name:"Keen Senses",description:"Enhanced sensory perception. +2 bonus to detect hidden things or dangers.",mechanicalEffect:"detection_bonus",bonus:{type:"detection",value:2}},Patient:{name:"Patient",description:"Calm and methodical approach. +2 bonus to sustained concentration tasks.",mechanicalEffect:"concentration_bonus",bonus:{type:"concentration",value:2}},Resilient:{name:"Resilient",description:"Exceptionally tough constitution. +2 HP per level beyond normal.",mechanicalEffect:"hp_bonus",bonus:{type:"hp_per_level",value:2}},Hardy:{name:"Hardy",description:"Natural toughness and endurance. +1 HP per level beyond normal.",mechanicalEffect:"hp_bonus_small",bonus:{type:"hp_per_level",value:1}},Frail:{name:"Frail",description:"Delicate constitution, but often comes with other gifts. -2 HP per level.",mechanicalEffect:"hp_penalty",bonus:{type:"hp_per_level",value:-2}}},j=Object.keys(S),C={Human:{automatic:[],forbidden:[],preferred:["Brave","Clever","Silver Tongue"],description:"Adaptable and versatile, humans can develop any traits through experience."},Sylvanborn:{automatic:["Nature's Friend"],forbidden:["Cunning"],preferred:["Observant","Keen Senses","Patient"],description:"Forest dwellers with an innate connection to nature."},Alloy:{automatic:["Iron Will"],forbidden:["Empathic","Silver Tongue"],preferred:["Stoic","Patient","Clever"],description:"Mechanical beings with logical minds but limited emotional range."},Draketh:{automatic:["Brave"],forbidden:["Patient"],preferred:["Swift","Silver Tongue","Stoic"],description:"Proud dragon-descendants who rarely back down from challenges."},Voidkin:{automatic:["Observant"],forbidden:["Nature's Friend"],preferred:["Clever","Iron Will","Cunning"],description:"Shadow-touched beings with enhanced perception but unnatural aura."},Crystalborn:{automatic:["Stoic"],forbidden:["Swift"],preferred:["Iron Will","Patient","Keen Senses"],description:"Living crystal beings with incredible mental fortitude."},Stormcaller:{automatic:["Swift"],forbidden:["Patient"],preferred:["Brave","Observant","Silver Tongue"],description:"Sky-born people infused with elemental storm energy."}},T={Greenwarden:{automatic:["Nature's Friend"],forbidden:[],preferred:["Patient","Observant","Empathic"],description:"Nature's guardians with deep environmental connections."},"Thorn Knight":{automatic:["Brave"],forbidden:["Cunning"],preferred:["Stoic","Iron Will","Swift"],description:"Honorable warriors who face threats head-on."},"Sapling Adept":{automatic:["Patient"],forbidden:[],preferred:["Clever","Observant","Nature's Friend"],description:"Scholarly nature mages who study growth and renewal."},"Bloom Caller":{automatic:["Empathic"],forbidden:[],preferred:["Silver Tongue","Nature's Friend","Patient"],description:"Charismatic druids who inspire growth and healing."},"Dust Warden":{automatic:["Stoic"],forbidden:["Empathic"],preferred:["Brave","Iron Will","Observant"],description:"Ash-realm guardians hardened by harsh environments."},Cindermage:{automatic:["Clever"],forbidden:[],preferred:["Iron Will","Patient","Observant"],description:"Fire scholars who manipulate destructive forces."},"Ash Walker":{automatic:["Swift"],forbidden:["Patient"],preferred:["Observant","Cunning","Keen Senses"],description:"Desert scouts who move quickly through dangerous terrain."},"Ember Knight":{automatic:["Brave"],forbidden:["Cunning"],preferred:["Silver Tongue","Stoic","Iron Will"],description:"Noble flame warriors with strong moral codes."},"Storm Herald":{automatic:["Silver Tongue"],forbidden:[],preferred:["Swift","Brave","Observant"],description:"Sky leaders who command through charisma and storm power."},"Wind Sage":{automatic:["Keen Senses"],forbidden:[],preferred:["Clever","Patient","Iron Will"],description:"Aerial mystics with enhanced perception and wisdom."},"Cloud Walker":{automatic:["Swift"],forbidden:["Stoic"],preferred:["Observant","Lucky","Silver Tongue"],description:"Agile sky dancers who embrace freedom and movement."},"Sky Guardian":{automatic:["Brave"],forbidden:[],preferred:["Iron Will","Stoic","Observant"],description:"Stalwart defenders of the aerial realms."}},E=["Human","Sylvanborn","Alloy","Draketh","Voidkin","Crystalborn","Stormcaller"],P=["she/her","he/him","they/them","xe/xir","ze/hir","fae/faer"],R=Object.keys(h),N={Human:{STR:1,CHA:1,CON:-1,WIS:-1},Sylvanborn:{DEX:2,WIS:1,STR:-2,CON:-1},Alloy:{CON:2,INT:1,DEX:-2,CHA:-1},Draketh:{STR:2,CHA:1,DEX:-1,WIS:-2},Voidkin:{INT:2,WIS:1,STR:-1,CHA:-2},Crystalborn:{CON:1,INT:2,DEX:-1,CHA:-2},Stormcaller:{DEX:1,CHA:2,CON:-1,STR:-2}},M={};Object.entries(h).forEach(e=>{let[t,n]=e;M[t]={STR:n.statModifiers.strength||0,DEX:n.statModifiers.dexterity||0,CON:n.statModifiers.constitution||0,INT:n.statModifiers.intelligence||0,WIS:n.statModifiers.wisdom||0,CHA:n.statModifiers.charisma||0}});const L=["A former {profession} who left their old life behind after {event}. Now they seek {goal} in the wider world.","Born in {location}, they were raised by {guardian} and learned the ways of {skill}. Their greatest challenge was {challenge}.","Once served as {role} until {tragedy} changed everything. Now they wander, carrying {burden} and seeking {redemption}.","Discovered their {talent} at a young age in {homeland}. After {incident}, they must now {quest}.","A {descriptor} soul from {origin} who {past_action}. Their destiny was forever changed when {turning_point}."],I={profession:["merchant","soldier","scholar","artisan","noble","farmer","sailor","miner"],event:["a great betrayal","a mystical awakening","a terrible loss","a divine vision","a forbidden discovery"],goal:["redemption","knowledge","vengeance","peace","power","understanding","justice"],location:["the mountains","the deep forests","a bustling city","a remote village","the desert wastes","coastal towns"],guardian:["wise elders","a mysterious mentor","ancient spirits","temple priests","nomadic tribes"],skill:["combat","magic","diplomacy","survival","crafting","healing"],challenge:["surviving in the wilderness","uncovering dark secrets","protecting their community","mastering their abilities"],role:["a royal guard","a temple acolyte","a guild member","a traveling performer","a court advisor"],tragedy:["war came to their lands","a plague struck","they were falsely accused","dark forces emerged"],burden:["ancient knowledge","a family secret","a cursed artifact","the weight of prophecy"],redemption:["to right past wrongs","to prove their worth","to save their people","to break an ancient curse"],talent:["gift for magic","exceptional strength","keen insight","natural charisma","connection to nature"],homeland:["the crystal caves","the floating islands","the shadow realm","the golden plains"],incident:["the great storm","a dragon's attack","political upheaval","a mystical convergence"],quest:["find their true purpose","restore balance","uncover their heritage","save their homeland"],descriptor:["wandering","noble","mysterious","brave","cunning","wise","fierce"],origin:["distant lands","humble beginnings","royal bloodline","ancient lineage","forgotten realms"],past_action:["fought in great battles","studied forbidden lore","communed with spirits","crafted legendary items"],turning_point:["they discovered their true nature","fate intervened","they made a fateful choice","destiny called"]},z=[{name:"Kira Stormwind",pronouns:"she/her",species:"Stormcaller",archetype:"Mystic",background:"A former temple acolyte who left their old life behind after a mystical awakening. Now they seek knowledge in the wider world, wielding storm magic passed down through generations.",stats:{STR:10,DEX:14,CON:12,INT:15,WIS:13,CHA:11},traits:["Observant","Silver Tongue","Swift"],portraitUrl:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"},{name:"Marcus Ironforge",pronouns:"he/him",species:"Alloy",archetype:"Artificer",background:"Born in the crystal caves, they were raised by wise elders and learned the ways of crafting. Their greatest challenge was mastering the fusion of magic and metal that defines their people.",stats:{STR:13,DEX:11,CON:15,INT:14,WIS:12,CHA:8},traits:["Clever","Iron Will","Stoic"],portraitUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"},{name:"Zara Nightwhisper",pronouns:"they/them",species:"Voidkin",archetype:"Rogue",background:"A wandering soul from the shadow realm who fought in great battles against the encroaching darkness. Their destiny was forever changed when they discovered their connection to the void grants them unique abilities.",stats:{STR:9,DEX:15,CON:11,INT:12,WIS:14,CHA:13},traits:["Cunning","Lucky","Observant"],portraitUrl:"https://images.unsplash.com/photo-1494790108755-2616c4b43e69?w=300&h=300&fit=crop&crop=face",mode:"POINT_BUY"}];function B(e,t){if(e>=H)return!1;const n=e+1,r=y(e);return t>=y(n)-r}const A={display:"grid",gap:16,gridTemplateColumns:"1fr 420px",padding:24,alignItems:"start"},O={border:"1px solid #cbd5e1",borderRadius:12,padding:16,background:"#0b0e12",color:"#e5e7eb"},D={margin:"8px 0 4px",opacity:.9};function _(e,t){return Math.floor(Math.random()*(t-e+1))+e}function W(e){return Math.floor((e-8)/2)}function F(e,t,n,r){var a,o;let i=e;i+=(null===(a=N[n])||void 0===a?void 0:a[t])||0;return i+=(null===(o=M[r])||void 0===o?void 0:o[t])||0,Math.max(3,Math.min(i,22))}const H=20;function U(){var e,t;const[n,r]=(0,s.useState)({name:"",pronouns:"",species:"",archetype:"",background:"",stats:l({},b),traits:[],portraitUrl:"",mode:"POINT_BUY",level:1,knownSpells:[],knownCantrips:[]}),a=27-(0,s.useMemo)(()=>{let e=0;return Object.keys(n.stats).forEach(t=>{e+=y(n.stats[t])}),e},[n.stats]);function o(e,t){r(n=>l(l({},n),{},{[e]:t}))}function i(){const e=new Set;if(n.species){const t=C[n.species];t&&t.automatic.forEach(t=>e.add(t))}if(n.archetype){const t=T[n.archetype];t&&t.automatic.forEach(t=>e.add(t))}return Array.from(e)}function c(e){if(n.species){const t=C[n.species];if(null!==t&&void 0!==t&&t.forbidden&&t.forbidden.includes(e))return!0}if(n.archetype){const t=T[n.archetype];if(null!==t&&void 0!==t&&t.forbidden&&t.forbidden.includes(e))return!0}return!1}s.useEffect(()=>{const e=i(),t=new Set(n.traits);let a=!1;e.forEach(e=>{t.has(e)||(t.add(e),a=!0)}),Array.from(t).forEach(e=>{c(e)&&(t.delete(e),a=!0)}),a&&r(e=>l(l({},e),{},{traits:Array.from(t)}))},[n.species,n.archetype]);const u=(0,s.useMemo)(()=>{const e=n.level||1,t=F(n.stats.CON,"CON",n.species,n.archetype),r=F(n.stats.STR,"STR",n.species,n.archetype),a=F(n.stats.DEX,"DEX",n.species,n.archetype);let o=W(t),i=0;i="Thorn Knight"===n.archetype||"Crystal Guardian"===n.archetype||"Ironclad"===n.archetype?3:"Ashblade"===n.archetype||"Stormbreaker"===n.archetype||"Voidhunter"===n.archetype||"Greenwarden"===n.archetype||"Guardian"===n.archetype||"Warrior"===n.archetype?2:"Ranger"===n.archetype||"Rogue"===n.archetype||"Artificer"===n.archetype||"Healer"===n.archetype||"Bloomcaller"===n.archetype||"Mystic"===n.archetype?1:0;let l=0;"Alloy"===n.species||"Draketh"===n.species?l=2:"Crystalborn"===n.species||"Human"===n.species?l=1:"Voidkin"===n.species?l=0:"Sylvanborn"===n.species?l=-1:"Stormcaller"===n.species&&(l=0);let s=0;n.traits.includes("Resilient")&&(s+=2),n.traits.includes("Hardy")&&(s+=1),n.traits.includes("Frail")&&(s-=2);const c=Math.max(1,o+i+l+s),d=10+c*(e-1);let u=0;e>=16?u+=2:e>=8&&(u+=1);const p=n.archetype;"Thorn Knight"===p||"Ashblade"===p||"Ironclad"===p||"Stormbreaker"===p||"Voidhunter"===p||"Crystal Guardian"===p?e>=15?u+=2:e>=7&&(u+=1):"Greenwarden"===p||"Guardian"===p||"Warrior"===p?e>=10&&(u+=1):"Ranger"!==p&&"Rogue"!==p&&"Artificer"!==p||e>=15&&(u+=1),"Alloy"===n.species?e>=12&&(u+=1):"Draketh"===n.species?e>=15&&(u+=1):"Crystalborn"===n.species&&e>=15&&(u+=1),u=Math.min(u,5);return{level:e,hp:d,ac:10+W(a)+u,carry:15*r,naturalACBonus:u,totalHPPerLevel:c,classHPBonus:i,raceHPBonus:l,traitHPBonus:s}},[n.stats,n.species,n.archetype,n.level,n.traits]);return(0,d.jsxs)("div",{style:A,children:[(0,d.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,d.jsxs)("div",{style:O,children:[(0,d.jsx)("h2",{style:D,children:"Identity"}),(0,d.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,d.jsx)(V,{label:"Name",value:n.name,onChange:e=>o("name",e)}),(0,d.jsx)(G,{label:"Pronouns",value:n.pronouns,onChange:e=>o("pronouns",e),options:P}),(0,d.jsx)(G,{label:"Species",value:n.species,onChange:e=>o("species",e),options:E}),n.species&&N[n.species]&&(0,d.jsxs)("div",{style:{fontSize:12,opacity:.7,marginTop:-4},children:["Racial modifiers: ",Object.entries(N[n.species]).map(e=>{let[t,n]=e;return"".concat(t," ").concat(n>0?"+":"").concat(n)}).join(", ")]}),(0,d.jsx)(G,{label:"Class",value:n.archetype,onChange:e=>o("archetype",e),options:R}),(0,d.jsxs)("div",{style:{display:"grid",gap:4},children:[(0,d.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,d.jsx)("span",{children:"Level"})}),(0,d.jsx)("input",{type:"number",min:"1",max:"20",value:n.level||1,onChange:e=>o("level",parseInt(e.target.value)||1),style:{padding:"8px",border:"1px solid #374151",borderRadius:"4px",background:"#1f2937",color:"#f9fafb",fontSize:"14px"}})]}),(0,d.jsxs)("div",{style:{display:"grid",gap:4},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)("span",{children:"Background"}),(0,d.jsx)("button",{onClick:()=>o("background",L[Math.floor(Math.random()*L.length)].replace(/\{(\w+)\}/g,(e,t)=>{const n=I[t];return n?n[Math.floor(Math.random()*n.length)]:e})),style:{padding:"4px 8px",fontSize:"12px",background:"#374151",color:"#e5e7eb",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Generate Random"})]}),(0,d.jsx)("textarea",{value:n.background,onChange:e=>o("background",e.target.value),placeholder:"One-paragraph origin story...",rows:4,style:{padding:8,borderRadius:8,border:"1px solid #334155",background:"#0f172a",color:"#e5e7eb",resize:"vertical"}})]}),(0,d.jsx)(V,{label:"Portrait URL",value:n.portraitUrl||"",onChange:e=>o("portraitUrl",e),placeholder:"http(s)://\u2026"})]})]}),(0,d.jsxs)("div",{style:O,children:[(0,d.jsx)("h2",{style:D,children:"Abilities"}),(0,d.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:8},children:[(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",checked:"POINT_BUY"===n.mode,onChange:()=>o("mode","POINT_BUY")})," Point Buy"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",checked:"ROLL"===n.mode,onChange:()=>o("mode","ROLL")})," Roll (4d6 drop lowest)"]}),"ROLL"===n.mode&&(0,d.jsx)("button",{onClick:function(){const e=l({},b);Object.keys(e).forEach(t=>{e[t]=function(){const e=[_(1,6),_(1,6),_(1,6),_(1,6)];return e.sort((e,t)=>t-e),e[0]+e[1]+e[2]}()}),r(t=>l(l({},t),{},{stats:e}))},style:{marginLeft:"auto"},children:"Roll All"})]}),"POINT_BUY"===n.mode&&(0,d.jsxs)("div",{style:{marginBottom:8,opacity:.9},children:["Points left: ",(0,d.jsx)("strong",{children:a})," (Pool: ",27,", range ",8,"\u2013",H,")",(0,d.jsx)("div",{style:{fontSize:12,marginTop:4,opacity:.7},children:"Cost: 8-13 = 1 point each, 14-15 = 2 points each, 16-20 = 3 points each"})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:Object.keys(n.stats).map(e=>{const t=n.stats[e],o=F(t,e,n.species,n.archetype),i=function(e,t,n){var r,a;const o=(null===(r=N[t])||void 0===r?void 0:r[e])||0,i=(null===(a=M[n])||void 0===a?void 0:a[e])||0;let l="";return o>0&&(l+=" +".concat(o," racial")),o<0&&(l+=" ".concat(o," racial")),i>0&&(l+=" +".concat(i," class")),i<0&&(l+=" ".concat(i," class")),l}(e,n.species,n.archetype);return(0,d.jsxs)("div",{style:{border:"1px solid #334155",borderRadius:10,padding:10},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)("strong",{children:e}),"POINT_BUY"===n.mode&&(0,d.jsxs)("span",{children:[(0,d.jsx)("button",{onClick:()=>{return t=e,void r(e=>{const n=e.stats[t];return"POINT_BUY"!==e.mode||n<=8?e:l(l({},e),{},{stats:l(l({},e.stats),{},{[t]:n-1})})});var t},disabled:n.stats[e]<=8,children:"\u2212"}),(0,d.jsx)("button",{onClick:()=>{return t=e,void r(e=>{const n=e.stats[t];return"POINT_BUY"!==e.mode||n>=H?e:B(n,a)?l(l({},e),{},{stats:l(l({},e.stats),{},{[t]:n+1})}):e});var t},disabled:n.stats[e]>=H||!B(n.stats[e],a),style:{marginLeft:6},children:"\uff0b"})]})]}),(0,d.jsx)("div",{style:{fontSize:28,textAlign:"center",marginTop:6},children:o!==t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{style:{opacity:.6},children:t}),(0,d.jsxs)("span",{style:{color:o>t?"#10b981":"#ef4444",marginLeft:4},children:["\u2192",o]})]}):o}),(0,d.jsxs)("div",{style:{fontSize:12,textAlign:"center",opacity:.8},children:["mod ",W(o)>=0?"+":"",W(o)]}),i&&(0,d.jsx)("div",{style:{fontSize:10,textAlign:"center",opacity:.6,marginTop:2},children:i})]},e)})})]}),(0,d.jsxs)("div",{style:O,children:[(0,d.jsxs)("h2",{style:D,children:["Traits ",(0,d.jsxs)("small",{style:{opacity:.7},children:["(choose up to ",3,")"]})]}),(0,d.jsx)("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(71, 85, 105, 0.1)",border:"1px solid #475569",borderRadius:"8px"},children:(0,d.jsxs)("div",{style:{display:"flex",gap:"24px",fontSize:"0.85em",color:"#94a3b8"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{style:{color:"#10b981",fontWeight:"bold"},children:"\u25cf"})," Automatic - Required by your species/class"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{style:{color:"#f59e0b",fontWeight:"bold"},children:"\u25cf"})," Recommended - Fits your background well"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{style:{color:"#ef4444",fontWeight:"bold"},children:"\u25cf"})," Forbidden - Conflicts with your nature"]})]})}),(n.species||n.archetype)&&(0,d.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(30, 41, 59, 0.5)",border:"1px solid #334155",borderRadius:"8px"},children:[n.species&&C[n.species]&&(0,d.jsxs)("div",{style:{marginBottom:n.archetype?"8px":"0"},children:[(0,d.jsxs)("strong",{style:{color:"#e2e8f0"},children:["Species - ",n.species,":"]}),(0,d.jsx)("div",{style:{color:"#94a3b8",marginLeft:"8px",fontSize:"0.9em",marginTop:"2px"},children:C[n.species].description})]}),n.archetype&&T[n.archetype]&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("strong",{style:{color:"#e2e8f0"},children:["Class - ",n.archetype,":"]}),(0,d.jsx)("div",{style:{color:"#94a3b8",marginLeft:"8px",fontSize:"0.9em",marginTop:"2px"},children:T[n.archetype].description})]})]}),(0,d.jsx)("div",{style:{display:"grid",gap:12},children:j.map(e=>{const t=S[e],a=n.traits.includes(e),o=i().includes(e),s=c(e),u=function(e){if(n.species){const t=C[n.species];if(null!==t&&void 0!==t&&t.preferred&&t.preferred.includes(e))return!0}if(n.archetype){const t=T[n.archetype];if(null!==t&&void 0!==t&&t.preferred&&t.preferred.includes(e))return!0}return!1}(e),p=!a&&n.traits.length>=3||s;let f="#374151",m="rgba(15, 23, 42, 0.5)",h="",g="";return o?(f="#10b981",m="rgba(16, 185, 129, 0.1)",h="AUTOMATIC",g="#10b981"):s?(f="#ef4444",m="rgba(239, 68, 68, 0.1)",h="FORBIDDEN",g="#ef4444"):a?(f="#3b82f6",m="rgba(59, 130, 246, 0.1)"):u&&(f="#f59e0b",m="rgba(245, 158, 11, 0.05)",h="RECOMMENDED",g="#f59e0b"),(0,d.jsxs)("label",{style:{display:"flex",gap:12,alignItems:"flex-start",padding:"12px",border:"2px solid ".concat(f),borderRadius:"8px",background:m,cursor:p&&!o?"not-allowed":"pointer",opacity:p&&!o?.5:1,position:"relative"},children:[(0,d.jsx)("input",{type:"checkbox",checked:a,onChange:()=>!o&&!s&&function(e){r(t=>t.traits.includes(e)?l(l({},t),{},{traits:t.traits.filter(t=>t!==e)}):t.traits.length>=3?t:l(l({},t),{},{traits:[...t.traits,e]}))}(e),disabled:o||s||!a&&n.traits.length>=3,style:{marginTop:"2px"}}),(0,d.jsxs)("div",{style:{flex:1},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)("div",{style:{fontWeight:"bold",color:"#f1f5f9"},children:t.name}),h&&(0,d.jsx)("span",{style:{fontSize:"0.7em",padding:"2px 6px",borderRadius:"4px",backgroundColor:g,color:"white",fontWeight:"bold"},children:h})]}),(0,d.jsx)("div",{style:{fontSize:"0.9em",color:"#94a3b8",marginTop:"4px"},children:t.description})]})]},e)})}),n.traits.length>0&&(0,d.jsxs)("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid #10b981",borderRadius:"8px"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 8px",color:"#10b981",fontSize:"1rem"},children:"Active Trait Benefits:"}),(p=n,p.traits.map(e=>{const t=S[e];return t?"".concat(t.name,": ").concat(t.description):"".concat(e,": Unknown effect")})).map((e,t)=>(0,d.jsxs)("div",{style:{fontSize:"0.9em",color:"#e5e7eb",marginBottom:"4px"},children:["\u2022 ",e]},t))]})]}),"none"!==k(n.archetype)&&(0,d.jsxs)("div",{style:O,children:[(0,d.jsx)("h2",{style:D,children:"Spells & Cantrips"}),(0,d.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid #3b82f6",borderRadius:"8px"},children:[(0,d.jsxs)("h3",{style:{margin:"0 0 8px",color:"#3b82f6",fontSize:"1rem"},children:["Spell Capacity (",k(n.archetype)," caster):"]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"0.9em"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Cantrips:"})," ",(null===(e=n.knownCantrips)||void 0===e?void 0:e.length)||0," / ",v(n.level||1,n.stats.INT,n.stats.WIS)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Spells:"})," ",(null===(t=n.knownSpells)||void 0===t?void 0:t.length)||0," / ",x(n.level||1,n.stats.INT,n.stats.WIS)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Max Spell Level:"})," ",w(n.level||1)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Primary Ability:"})," ","wizard"===k(n.archetype)?"INT (".concat(n.stats.INT,")"):"cleric"===k(n.archetype)?"WIS (".concat(n.stats.WIS,")"):"INT (".concat(n.stats.INT,") or WIS (").concat(n.stats.WIS,")")]})]})]}),(0,d.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 8px",color:"#8b5cf6",fontSize:"1.1rem"},children:"Known Cantrips:"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"8px"},children:(n.knownCantrips||[]).map((e,t)=>{const r=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]").find(t=>t.name===e&&0===t.level);return(0,d.jsxs)("span",{style:{background:"#1e293b",color:"#e2e8f0",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",border:"1px solid #8b5cf6",display:"flex",alignItems:"center",gap:"4px"},children:[(null===r||void 0===r?void 0:r.name)||e,(0,d.jsx)("button",{onClick:()=>{o("knownCantrips",(n.knownCantrips||[]).filter((e,n)=>n!==t))},style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0",fontSize:"12px"},children:"\u2715"})]},t)})}),(0,d.jsx)("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]").filter(e=>0===e.level&&!(n.knownCantrips||[]).includes(e.name));if(0===e.length)return void alert("No saved cantrips available! Create some cantrips in the Spell Generator first.");if((n.knownCantrips||[]).length>=v(n.level||1,n.stats.INT,n.stats.WIS))return void alert("Maximum cantrips reached! Increase level or ability scores for more.");const t=e[Math.floor(Math.random()*e.length)];o("knownCantrips",[...n.knownCantrips||[],t.name])},disabled:(n.knownCantrips||[]).length>=v(n.level||1,n.stats.INT,n.stats.WIS),style:{padding:"6px 12px",background:(n.knownCantrips||[]).length>=v(n.level||1,n.stats.INT,n.stats.WIS)?"#374151":"#8b5cf6",color:"#f9fafb",border:"none",borderRadius:"4px",cursor:(n.knownCantrips||[]).length>=v(n.level||1,n.stats.INT,n.stats.WIS)?"not-allowed":"pointer",fontSize:"12px"},children:"+ Add Random Cantrip"})]}),x(n.level||1,n.stats.INT,n.stats.WIS)>0&&(0,d.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 8px",color:"#8b5cf6",fontSize:"1.1rem"},children:"Known Spells:"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"8px"},children:(n.knownSpells||[]).map((e,t)=>{const r=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]").find(t=>t.name===e&&t.level>0);return(0,d.jsxs)("span",{style:{background:"#1e293b",color:"#e2e8f0",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",border:"1px solid #3b82f6",display:"flex",alignItems:"center",gap:"4px"},children:[(null===r||void 0===r?void 0:r.name)||e," ",r&&"(".concat(r.level,")"),(0,d.jsx)("button",{onClick:()=>{o("knownSpells",(n.knownSpells||[]).filter((e,n)=>n!==t))},style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0",fontSize:"12px"},children:"\u2715"})]},t)})}),(0,d.jsxs)("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]"),t=w(n.level||1),r=e.filter(e=>e.level>0&&e.level<=t&&!(n.knownSpells||[]).includes(e.name));if(0===r.length)return void alert("No saved spells available up to level ".concat(t,"! Create some spells in the Spell Generator first."));if((n.knownSpells||[]).length>=x(n.level||1,n.stats.INT,n.stats.WIS))return void alert("Maximum spells reached! Increase level or ability scores for more.");const a=r[Math.floor(Math.random()*r.length)];o("knownSpells",[...n.knownSpells||[],a.name])},disabled:(n.knownSpells||[]).length>=x(n.level||1,n.stats.INT,n.stats.WIS),style:{padding:"6px 12px",background:(n.knownSpells||[]).length>=x(n.level||1,n.stats.INT,n.stats.WIS)?"#374151":"#3b82f6",color:"#f9fafb",border:"none",borderRadius:"4px",cursor:(n.knownSpells||[]).length>=x(n.level||1,n.stats.INT,n.stats.WIS)?"not-allowed":"pointer",fontSize:"12px"},children:["+ Add Random Spell (max level ",w(n.level||1),")"]})]}),0===x(n.level||1,n.stats.INT,n.stats.WIS)&&(0,d.jsxs)("div",{style:{padding:"12px",background:"rgba(156, 163, 175, 0.1)",border:"1px solid #6b7280",borderRadius:"8px",textAlign:"center",color:"#9ca3af"},children:["No spells available at level ",n.level||1,". Reach level 2 to learn spells!"]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,d.jsx)("button",{onClick:function(){if(!n.name.trim())return void alert("Give your character a name before saving.");const e=l(l({},n),{},{createdAt:(new Date).toISOString()});localStorage.setItem("we:lastCharacter",JSON.stringify(e)),function(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=e,a.click(),URL.revokeObjectURL(r)}("".concat(n.name.replace(/\s+/g,"_"),".json"),e)},children:"Save (JSON + local)"}),(0,d.jsx)("button",{onClick:function(){if(n.name.trim()){console.log("Saving character to library:",n);try{const e=JSON.parse(localStorage.getItem("world-engine-characters")||"[]");console.log("Existing characters:",e);const t={id:"char-".concat(Date.now()),name:n.name,race:n.species,characterClass:n.archetype,level:n.level||1,createdAt:(new Date).toISOString(),data:l(l({},n),{},{createdAt:(new Date).toISOString()})};console.log("Character data to save:",t),e.push(t),localStorage.setItem("world-engine-characters",JSON.stringify(e)),localStorage.setItem("world-engine-characters-backup",JSON.stringify(e)),console.log("Saved to localStorage, total characters:",e.length),alert("".concat(n.name," has been saved to your character library!"))}catch(e){console.error("Error saving to library:",e),alert("Error saving character to library.")}}else alert("Give your character a name before saving.")},children:"Save to Library"}),(0,d.jsx)("button",{onClick:function(){const e=localStorage.getItem("we:lastCharacter");if(!e)return alert("No saved character found.");try{r(JSON.parse(e))}catch(t){alert("Save file corrupted.")}},children:"Load Last"}),(0,d.jsx)("button",{onClick:function(){r({name:"",pronouns:"",species:"",archetype:"",background:"",stats:l({},b),traits:[],portraitUrl:"",mode:"POINT_BUY"})},children:"Reset"})]}),(0,d.jsxs)("div",{style:O,children:[(0,d.jsx)("h2",{style:D,children:"Premade Characters"}),(0,d.jsx)("div",{style:{display:"grid",gap:8},children:z.map(e=>(0,d.jsxs)("div",{style:{border:"1px solid #334155",borderRadius:8,padding:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:(0,d.jsx)("strong",{children:e.name})}),(0,d.jsxs)("div",{style:{fontSize:"12px",opacity:.8},children:[e.species," ",e.archetype," \u2022 ",e.traits.join(", ")]})]}),(0,d.jsx)("button",{onClick:()=>function(e){r(l({},e))}(e),style:{padding:"6px 12px",background:"#059669",color:"#f9fafb",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Load"})]},e.name))})]})]}),(0,d.jsxs)("div",{style:O,children:[(0,d.jsx)("h2",{style:{marginTop:0},children:"Preview"}),n.portraitUrl?(0,d.jsx)("img",{src:n.portraitUrl,alt:"portrait",style:{width:"100%",borderRadius:12,marginBottom:8,objectFit:"cover"}}):(0,d.jsx)("div",{style:{border:"1px dashed #334155",borderRadius:12,padding:12,textAlign:"center",marginBottom:8,opacity:.7},children:"Add a portrait URL for preview"}),(0,d.jsx)("div",{children:(0,d.jsx)("strong",{children:n.name||"Unnamed Adventurer"})}),(0,d.jsx)("div",{style:{opacity:.8,marginBottom:8},children:[n.pronouns,n.species,n.archetype].filter(Boolean).join(" \u2022 ")}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:6,marginBottom:8},children:Object.keys(n.stats).map(e=>{const t=F(n.stats[e],e,n.species,n.archetype);return(0,d.jsxs)("div",{style:{background:"#0f172a",border:"1px solid #334155",borderRadius:8,padding:8,textAlign:"center"},children:[(0,d.jsx)("div",{style:{fontSize:12,opacity:.8},children:e}),(0,d.jsx)("div",{style:{fontSize:20},children:t}),(0,d.jsxs)("div",{style:{fontSize:12,opacity:.8},children:["(",W(t)>=0?"+":"",W(t),")"]})]},e)})}),(0,d.jsxs)("div",{style:{marginBottom:8},children:[(0,d.jsxs)("div",{children:["HP: ",(0,d.jsx)("strong",{children:u.hp})," \u2022 AC: ",(0,d.jsx)("strong",{children:u.ac})," \u2022 Carry: ",(0,d.jsx)("strong",{children:u.carry})]}),u.naturalACBonus>0&&(0,d.jsxs)("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:["Natural AC Bonus: +",u.naturalACBonus," (from level/class/race)"]}),(u.classHPBonus>0||0!==u.raceHPBonus||0!==u.traitHPBonus)&&(0,d.jsxs)("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:["HP per level: ",u.totalHPPerLevel," = ",W(F(n.stats.CON,"CON",n.species,n.archetype))," (CON)",u.classHPBonus>0&&" + ".concat(u.classHPBonus," (").concat(n.archetype,")"),0!==u.raceHPBonus&&" ".concat(u.raceHPBonus>=0?"+":"").concat(u.raceHPBonus," (").concat(n.species,")"),0!==u.traitHPBonus&&" ".concat(u.traitHPBonus>=0?"+":"").concat(u.traitHPBonus," (traits)")]}),n.traits.length>0&&(0,d.jsxs)("div",{style:{marginTop:6},children:["Traits: ",n.traits.join(", ")]})]}),n.background&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{style:D,children:"Background"}),(0,d.jsx)("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.35},children:n.background})]})]})]});var p}function V(e){const{label:t,value:n,onChange:r,placeholder:a}=e;return(0,d.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,d.jsx)("span",{children:t}),(0,d.jsx)("input",{value:n,onChange:e=>r(e.target.value),placeholder:a,style:{padding:8,borderRadius:8,border:"1px solid #334155",background:"#0f172a",color:"#e5e7eb"}})]})}function G(e){const{label:t,value:n,onChange:r,options:a}=e;return(0,d.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,d.jsx)("span",{children:t}),(0,d.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{padding:8,borderRadius:8,border:"1px solid #334155",background:"#0f172a",color:"#e5e7eb",cursor:"pointer"},children:[(0,d.jsxs)("option",{value:"",children:["Select ",t,"..."]}),a.map(e=>(0,d.jsx)("option",{value:e,children:e},e))]})]})}const Q={human:{male:{first:["Aiden","Aldric","Arthur","Bjorn","Caius","Damien","Edmund","Gareth","Hector","Ivan","Jasper","Kai","Leander","Marcus","Nolan","Owen","Pierce","Quinn","Rowan","Soren","Thane","Ulric","Victor","Willem","Xavier","Yorick","Zander"],last:["Blackwood","Brightblade","Stormwind","Ironforge","Goldleaf","Silverstone","Ravencrest","Drakemoor","Thornfield","Ashworth","Redmane","Whitehall","Greycastle","Bluestone","Greenwood"]},female:{first:["Aria","Brenna","Celeste","Diana","Elena","Freya","Gwen","Helena","Iris","Jade","Kira","Luna","Mira","Nora","Olivia","Petra","Quinn","Raven","Sera","Tara","Una","Vera","Willa","Xara","Yara","Zara"],last:["Blackwood","Brightblade","Stormwind","Ironforge","Goldleaf","Silverstone","Ravencrest","Drakemoor","Thornfield","Ashworth","Redmane","Whitehall","Greycastle","Bluestone","Greenwood"]}},elf:{male:{first:["Aelindra","Beiro","Celeborn","Daeron","Elrond","Faelar","Galinndan","Halimath","Ivellios","Jaelynn","Kelvhan","Lamlis","Mindartis","Naal","Otaehryn","Peren","Quarion","Riardon","Silvyr","Thamior","Uldreyin","Vanuath","Wranvyre","Xalvador","Yeshelne","Zoltan"],last:["Amakir","Amakir","Bereris","Cithreth","Enna","Galinndan","Hadarai","Immeral","Ivellios","Korfel","Lamlis","Mindartis","Naal","Nutae","Paelinn","Peren","Riardon","Rolen","Silvyr","Suhnaal","Thamior","Theriatis","Theriapis","Thervan","Uthemar","Vanuath","Varis"]},female:{first:["Adrie","Birel","Caelynn","Dara","Enna","Galinndan","Hadarai","Immeral","Ivellios","Jannalor","Korfel","Lamlis","Mialee","Nutae","Quelenna","Sariel","Shanairra","Shava","Silaqui","Suhnaal","Thamior","Theriatis","Theriapis","Thervan","Uthemar","Vanuath","Varis"],last:["Amakir","Bereris","Cithreth","Enna","Galinndan","Hadarai","Immeral","Ivellios","Korfel","Lamlis","Mindartis","Naal","Nutae","Paelinn","Peren","Riardon","Rolen","Silvyr","Suhnaal","Thamior","Theriatis","Theriapis","Thervan","Uthemar","Vanuath","Varis"]}},dwarf:{male:{first:["Adrik","Baern","Darrak","Eberk","Fargrim","Gardain","Harbek","Kildrak","Morgran","Orsik","Rangrim","Taklinn","Thorek","Ulfgar","Vondal","Balin","Dain","Dwalin","Gloin","Groin","Nain","Ori","Oin","Bifur","Bofur","Bombur","Dori"],last:["Battlehammer","Brawnanvil","Dankil","Fireforge","Frostbeard","Gorunn","Holderhek","Ironfist","Loderr","Lutgehr","Rumnaheim","Strakeln","Torunn","Ungart","Axebreaker","Battlehammer","Brawnanvil","Dankil","Fireforge","Frostbeard","Gorunn","Holderhek","Ironfist","Loderr","Lutgehr","Rumnaheim"]},female:{first:["Amber","Bardryn","Diesa","Eldeth","Gunnloda","Guthkea","Katernin","Liftrasa","Mardred","Riswynn","Sannl","Torbera","Torgga","Vistra","Kathra","Kristryd","Ilde","Liftrasa","Mardred","Riswynn","Sannl","Torbera","Torgga","Vistra","Welby","Darrak","Eberk"],last:["Battlehammer","Brawnanvil","Dankil","Fireforge","Frostbeard","Gorunn","Holderhek","Ironfist","Loderr","Lutgehr","Rumnaheim","Strakeln","Torunn","Ungart","Axebreaker","Battlehammer","Brawnanvil","Dankil","Fireforge","Frostbeard","Gorunn","Holderhek","Ironfist","Loderr","Lutgehr","Rumnaheim"]}},orc:{male:{first:["Grokk","Thokk","Uruk","Grash","Mokk","Drakk","Snagg","Gruul","Krusk","Thrag","Vrokk","Ghash","Brokk","Skarr","Gorthak","Mordak","Ughak","Grommash","Thrall","Garrosh","Durotan","Orgrim","Blackhand","Kilrogg","Kargath","Dentarg","Hurkan"],last:["Skullsplitter","Bloodfang","Ironjaw","Bonecrusher","Flameaxe","Stormrage","Shadowmoon","Frostwolf","Blackrock","Bleeding Hollow","Burning Blade","Dragonmaw","Laughing Skull","Shattered Hand","Twilight's Hammer","Warsong","Thunderlord","Red Walker","Whiteclaw","Redstone","Broken Bone","Burning Eye","Dark Spear","Death's Head","Frozen Rock","Lightning's Blade","Poisoned Spear"]},female:{first:["Baggi","Emen","Engong","Kansif","Myev","Neega","Ovak","Ownka","Shautha","Sutha","Vola","Volen","Yevelda","Grenda","Mokka","Urzul","Shra","Grakia","Vrokka","Thokka","Greshka","Mordka","Ughka","Snaggka","Kruska","Thraka","Vroska"],last:["Skullsplitter","Bloodfang","Ironjaw","Bonecrusher","Flameaxe","Stormrage","Shadowmoon","Frostwolf","Blackrock","Bleeding Hollow","Burning Blade","Dragonmaw","Laughing Skull","Shattered Hand","Twilight's Hammer","Warsong","Thunderlord","Red Walker","Whiteclaw","Redstone","Broken Bone","Burning Eye","Dark Spear","Death's Head","Frozen Rock","Lightning's Blade","Poisoned Spear"]}},places:{cities:["Ravenspire","Goldenhaven","Ironhold","Crystallake","Thornwall","Silverbrook","Dragonrest","Shadowmere","Brightwater","Stormhaven","Millbrook","Oakenford","Rosewood","Blackwater","Whitestone","Redmoor","Greenvale","Bluehaven","Yellowhill","Purplemist"],towns:["Millhaven","Brookshire","Oakheart","Pinewood","Willowdale","Maplegrove","Birchwood","Elmhurst","Cedarfall","Ashwood","Hickory Hill","Walnut Creek","Cherry Blossom","Apple Orchard","Pear Valley","Plum Grove","Peach Hollow","Berry Fields","Vine Ridge","Flower Meadow"],taverns:["The Prancing Pony","The Drunken Dragon","The Golden Griffin","The Silver Stag","The Red Rose","The Blue Moon","The Green Goblin","The Purple Parrot","The Black Swan","The White Wolf","The Rusty Anchor","The Broken Wheel","The Laughing Dwarf","The Singing Bard","The Dancing Bear","The Sleeping Giant","The Weeping Willow","The Howling Wolf","The Roaring Lion","The Soaring Eagle"]}},q=["Ae","Al","Am","An","Ar","Ba","Bel","Ber","Bra","Cal","Cel","Cor","Da","Del","Dra","El","Er","Fae","Gal","Gil","Hal","Ith","Kor","Lae","Lor","Mel","Mor","Nal","Nor","Quin","Ral","Sil","Tal","Thal","Val","Vel","Xan","Yor","Zel"],Y=["an","ar","as","en","er","eth","ia","iel","in","ion","is","ith","las","len","lin","lon","los","neth","oth","ran","ren","rin","ron","ros","san","sen","sin","son","sus","tan","ten","tin","ton","tus","van","ven","vin","von","vus"],$=["ael","aer","ah","al","an","ar","ath","el","en","er","eth","ia","ial","ian","iel","ien","ier","ies","in","ion","is","ith","las","len","lin","lon","los","neth","oth","ran","ren","rin","ron","ros","us","yn","yr","ys"];function K(e){let{onBack:t}=e;const[n,r]=(0,s.useState)("human"),[a,o]=(0,s.useState)("male"),[i,l]=(0,s.useState)("character"),[c,u]=(0,s.useState)([]),[p,f]=(0,s.useState)([]),m=e=>e[Math.floor(Math.random()*e.length)],h=()=>{const e=Q[n];if(e&&"object"===typeof e&&"male"in e){const t=e[a];if(t&&"object"===typeof t&&"first"in t){const e=m(t.first),n=m(t.last);return"".concat(e," ").concat(n)}}return"Unknown Name"},g=()=>{const e=Q.places[n];return m(e)},y=()=>{const e=Math.random()<.3?2:3;let t="";t+=m(q);for(let n=1;n<e-1;n++)t+=m(Y);return e>1&&(t+=m($)),t},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=[];for(let n=0;n<e;n++){let e;e="character"===i?h():"place"===i?g():y(),t.includes(e)?n--:t.push(e)}u(t)};return s.useEffect(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-saved-names")||"[]");f(e)}catch(e){console.error("Error loading saved names:",e)}},[]),(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"#e2e8f0"},children:[(0,d.jsxs)("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid #334155",background:"rgba(15, 23, 42, 0.8)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:"Name Generator"}),(0,d.jsx)("p",{style:{margin:"0.5rem 0 0",opacity:.8},children:"Generate fantasy names for characters and places"})]}),t&&(0,d.jsx)("button",{onClick:t,style:{padding:"0.75rem 1.5rem",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Back to Menu"})]}),(0,d.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 120px)"},children:[(0,d.jsxs)("div",{style:{flex:1,padding:"2rem",borderRight:"1px solid #334155",overflowY:"auto"},children:[(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{marginBottom:"1rem",color:"#f1f5f9"},children:"Name Type"}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:["character","place","fantasy"].map(e=>(0,d.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,d.jsx)("input",{type:"radio",name:"nameType",value:e,checked:i===e,onChange:e=>l(e.target.value),style:{accentColor:"#3b82f6"}}),(0,d.jsxs)("span",{style:{textTransform:"capitalize"},children:[e," Names"]})]},e))})]}),"character"===i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{marginBottom:"1rem",color:"#f1f5f9"},children:"Race"}),(0,d.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{width:"100%",padding:"0.75rem",background:"#1e293b",border:"1px solid #334155",borderRadius:"4px",color:"#e2e8f0",fontSize:"1rem"},children:[(0,d.jsx)("option",{value:"human",children:"Human"}),(0,d.jsx)("option",{value:"elf",children:"Elf"}),(0,d.jsx)("option",{value:"dwarf",children:"Dwarf"}),(0,d.jsx)("option",{value:"orc",children:"Orc"})]})]}),(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{marginBottom:"1rem",color:"#f1f5f9"},children:"Gender"}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,d.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,d.jsx)("input",{type:"radio",name:"gender",value:"male",checked:"male"===a,onChange:e=>o(e.target.value),style:{accentColor:"#3b82f6"}}),"Male"]}),(0,d.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,d.jsx)("input",{type:"radio",name:"gender",value:"female",checked:"female"===a,onChange:e=>o(e.target.value),style:{accentColor:"#3b82f6"}}),"Female"]})]})]})]}),"place"===i&&(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{marginBottom:"1rem",color:"#f1f5f9"},children:"Place Type"}),(0,d.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{width:"100%",padding:"0.75rem",background:"#1e293b",border:"1px solid #334155",borderRadius:"4px",color:"#e2e8f0",fontSize:"1rem"},children:[(0,d.jsx)("option",{value:"cities",children:"Cities"}),(0,d.jsx)("option",{value:"towns",children:"Towns"}),(0,d.jsx)("option",{value:"taverns",children:"Taverns"})]})]}),(0,d.jsx)("button",{onClick:()=>b(10),style:{width:"100%",padding:"1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",marginBottom:"1rem"},children:"Generate Names"}),(0,d.jsx)("button",{onClick:()=>b(25),style:{width:"100%",padding:"0.75rem",background:"#059669",color:"white",border:"none",borderRadius:"6px",fontSize:"1rem",cursor:"pointer"},children:"Generate More (25)"})]}),(0,d.jsxs)("div",{style:{flex:2,padding:"2rem",borderRight:"1px solid #334155"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,d.jsx)("h3",{style:{margin:0,color:"#f1f5f9"},children:"Generated Names"}),c.length>0&&(0,d.jsxs)("span",{style:{color:"#94a3b8",fontSize:"0.9rem"},children:[c.length," names"]})]}),0===c.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"3rem",color:"#64748b",fontStyle:"italic"},children:'Click "Generate Names" to get started!'}):(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem",maxHeight:"calc(100vh - 250px)",overflowY:"auto"},children:c.map((e,t)=>(0,d.jsxs)("div",{style:{padding:"1rem",background:"rgba(15, 23, 42, 0.5)",border:"1px solid #334155",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)("span",{style:{fontWeight:"500"},children:e}),(0,d.jsx)("button",{onClick:()=>(e=>{if(!p.includes(e)){const t=[...p,e];f(t),localStorage.setItem("world-engine-saved-names",JSON.stringify(t))}})(e),disabled:p.includes(e),style:{padding:"0.25rem 0.5rem",background:p.includes(e)?"#374151":"#059669",color:"white",border:"none",borderRadius:"4px",fontSize:"0.8rem",cursor:p.includes(e)?"not-allowed":"pointer"},children:p.includes(e)?"Saved":"Save"})]},t))})]}),(0,d.jsxs)("div",{style:{flex:1,padding:"2rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,d.jsx)("h3",{style:{margin:0,color:"#f1f5f9"},children:"Saved Names"}),p.length>0&&(0,d.jsx)("button",{onClick:()=>{const e=JSON.stringify(p,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="world-engine-names-".concat((new Date).toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(n)},style:{padding:"0.5rem",background:"#374151",color:"white",border:"none",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"},children:"Export"})]}),0===p.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontStyle:"italic"},children:"Save names you like here!"}):(0,d.jsx)("div",{style:{maxHeight:"calc(100vh - 250px)",overflowY:"auto"},children:p.map((e,t)=>(0,d.jsxs)("div",{style:{padding:"0.75rem",background:"rgba(15, 23, 42, 0.3)",border:"1px solid #334155",borderRadius:"6px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)("span",{children:e}),(0,d.jsx)("button",{onClick:()=>(e=>{const t=p.filter(t=>t!==e);f(t),localStorage.setItem("world-engine-saved-names",JSON.stringify(t))})(e),style:{padding:"0.25rem 0.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"4px",fontSize:"0.7rem",cursor:"pointer"},children:"\xd7"})]},t))})]})]})]})}const J={abjuration:[{name:"Ward",level:0,school:"Abjuration",castingTime:"1 action",range:"Touch",components:["V (protective word)","S (warding gesture)"],duration:"1 round",description:"Creates a shimmering barrier that provides +1 AC against the next attack.",color:"#3b82f6"},{name:"Resist",level:0,school:"Abjuration",castingTime:"1 reaction",range:"Self",components:["V (quick incantation)"],duration:"Instantaneous",description:"Reduces incoming damage by 1d4 points when cast as a reaction.",color:"#3b82f6"},{name:"Shield of Faith",level:1,school:"Abjuration",castingTime:"1 action",range:"60 feet",components:["V (prayer)","S (blessing gesture)","M (holy symbol)"],duration:"5 rounds",description:"Surrounds target with divine energy, granting +2 AC and resistance to the next spell.",color:"#3b82f6"},{name:"Dispel Minor Magic",level:1,school:"Abjuration",castingTime:"1 action",range:"60 feet",components:["V (dispelling word)","S (dismissive gesture)"],duration:"Instantaneous",description:"Ends one cantrip or 1st level spell effect on target creature or object.",color:"#3b82f6"},{name:"Arcane Lock",level:2,school:"Abjuration",castingTime:"2 actions",range:"Touch",components:["V (locking incantation)","S (sealing motions)","M (silver key worth 25 gp)"],duration:"Until dispelled",description:"Magically locks a door, chest, or portal. Only the caster or dispel magic can open it.",color:"#3b82f6"},{name:"Greater Ward",level:3,school:"Abjuration",castingTime:"1 action",range:"30 feet",components:["V (protective chant)","S (complex warding)","M (crystal focus)"],duration:"10 rounds",description:"Creates a 15-foot radius protective dome. Allies inside gain damage resistance and spell immunity.",color:"#3b82f6"}],conjuration:[{name:"Summon Spark",level:0,school:"Conjuration",castingTime:"1 action",range:"60 feet",components:["V (summoning word)","S (beckoning gesture)"],duration:"1 round",description:"Creates a tiny mote of light that can illuminate or distract. Deals 1d4 radiant damage.",color:"#10b981"},{name:"Conjure Weapon",level:1,school:"Conjuration",castingTime:"1 action",range:"Self",components:["V (weapon's name)","S (grasping motion)"],duration:"5 rounds",description:"Creates a simple melee weapon in your hand. Weapon deals 1d6 + spell modifier damage.",color:"#10b981"},{name:"Faithful Hound",level:1,school:"Conjuration",castingTime:"2 actions",range:"30 feet",components:["V (calling howl)","S (summoning ritual)","M (dog whistle)"],duration:"10 rounds",description:"Summons a spectral hound with 15 HP that follows your commands and alerts to enemies.",color:"#10b981"},{name:"Dimensional Door",level:2,school:"Conjuration",castingTime:"1 action",range:"500 feet",components:["V (travel word)","S (stepping motion)"],duration:"Instantaneous",description:"Instantly teleports you and one willing ally to a location you can see within range.",color:"#10b981"}],divination:[{name:"Detect",level:0,school:"Divination",castingTime:"1 action",range:"30 feet",components:["V (inquiry)","S (searching gesture)"],duration:"3 rounds",description:"Reveals the presence of magic, hidden objects, or creatures within range.",color:"#f59e0b"},{name:"True Sight",level:1,school:"Divination",castingTime:"1 action",range:"Self",components:["V (seeing word)","S (eye-opening gesture)","M (crystal lens)"],duration:"10 rounds",description:"See through illusions, detect invisible creatures, and perceive the true form of shapeshifters.",color:"#f59e0b"},{name:"Locate Object",level:1,school:"Divination",castingTime:"2 actions",range:"1 mile",components:["V (object's name)","S (searching motions)","M (lodestone)"],duration:"10 rounds",description:"Sense the direction and distance to a specific object you've seen before.",color:"#f59e0b"}],enchantment:[{name:"Charm",level:0,school:"Enchantment",castingTime:"1 action",range:"30 feet",components:["V (persuasive words)","S (friendly gesture)"],duration:"3 rounds",description:"Target views you as a friendly acquaintance. They won't attack you but aren't controlled.",color:"#ec4899"},{name:"Command",level:1,school:"Enchantment",castingTime:"1 action",range:"60 feet",components:["V (single word command)"],duration:"1 round",description:"Target must obey a one-word command: Approach, Drop, Flee, Grovel, or Halt.",color:"#ec4899"},{name:"Sleep",level:1,school:"Enchantment",castingTime:"1 action",range:"90 feet",components:["V (lullaby)","S (soothing gesture)","M (sand or rose petals)"],duration:"5 rounds",description:"Creatures in 20-foot radius fall unconscious. Affects 5d8 hit points worth of creatures.",color:"#ec4899"}],evocation:[{name:"Magic Missile",level:0,school:"Evocation",castingTime:"1 action",range:"120 feet",components:["V (targeting word)","S (pointing gesture)"],duration:"Instantaneous",description:"Creates 1 dart of pure force that automatically hits for 1d4+1 damage.",color:"#ef4444"},{name:"Spark",level:0,school:"Evocation",castingTime:"1 action",range:"60 feet",components:["V (crackling word)","S (snapping fingers)"],duration:"Instantaneous",description:"Target takes 1d6 lightning damage and must make a Constitution save or be stunned for 1 round.",color:"#ef4444"},{name:"Burning Hands",level:1,school:"Evocation",castingTime:"1 action",range:"15-foot cone",components:["V (fiery incantation)","S (spreading fingers)"],duration:"Instantaneous",description:"Flames shoot from your fingertips. Each creature in area takes 3d6 fire damage.",color:"#ef4444"},{name:"Lightning Bolt",level:1,school:"Evocation",castingTime:"1 action",range:"100 feet",components:["V (thunder word)","S (throwing motion)","M (copper wire)"],duration:"Instantaneous",description:"A bolt of lightning shoots in a line. Creatures in path take 2d8 lightning damage.",color:"#ef4444"}],healing:[{name:"Mend Wounds",level:0,school:"Healing",castingTime:"1 action",range:"Touch",components:["V (healing word)","S (gentle touch)"],duration:"Instantaneous",description:"Restores 1d4 hit points to a living creature. Cannot heal the same target twice per combat.",color:"#22c55e"},{name:"Stabilize",level:0,school:"Healing",castingTime:"1 action",range:"Touch",components:["V (life-binding word)","S (steadying touch)"],duration:"Instantaneous",description:"A dying creature becomes stable and regains 1 hit point.",color:"#22c55e"},{name:"Cure Light Wounds",level:1,school:"Healing",castingTime:"1 action",range:"Touch",components:["V (healing prayer)","S (laying on hands)"],duration:"Instantaneous",description:"Restores 1d8 + spellcasting modifier hit points to target creature.",color:"#22c55e"},{name:"Healing Word",level:1,school:"Healing",castingTime:"1 bonus action",range:"60 feet",components:["V (word of healing)"],duration:"Instantaneous",description:"Restores 1d4 + spellcasting modifier hit points. Can revive unconscious allies.",color:"#22c55e"},{name:"Prayer of Healing",level:2,school:"Healing",castingTime:"3 actions",range:"30-foot radius",components:["V (group prayer)","S (blessing gestures)","M (holy symbol)"],duration:"Instantaneous",description:"Up to 6 creatures regain 2d8 + spellcasting modifier hit points each.",color:"#22c55e"},{name:"Greater Heal",level:3,school:"Healing",castingTime:"1 action",range:"Touch",components:["V (major healing incantation)","S (powerful laying on hands)","M (diamond dust worth 100 gp)"],duration:"Instantaneous",description:"Restores 4d8 + spellcasting modifier hit points and removes one disease or poison.",color:"#22c55e"}],illusion:[{name:"Minor Illusion",level:0,school:"Illusion",castingTime:"1 action",range:"30 feet",components:["S (image-forming gesture)","M (bit of fleece)"],duration:"5 rounds",description:"Creates a sound or image no larger than a 5-foot cube. Can distract or deceive.",color:"#8b5cf6"},{name:"Disguise Self",level:1,school:"Illusion",castingTime:"1 action",range:"Self",components:["V (transformation word)","S (self-shaping gestures)"],duration:"10 rounds",description:"Change your appearance including clothing, armor, weapons, and other equipment.",color:"#8b5cf6"},{name:"Invisibility",level:1,school:"Illusion",castingTime:"1 action",range:"Touch",components:["V (vanishing word)","S (fading gesture)","M (eyelash in gum arabic)"],duration:"10 rounds",description:"Target becomes invisible until they attack, cast a spell, or duration ends.",color:"#8b5cf6"}],necromancy:[{name:"Chill Touch",level:0,school:"Necromancy",castingTime:"1 action",range:"120 feet",components:["V (death whisper)","S (grasping motion)"],duration:"1 round",description:"Spectral hand deals 1d8 necrotic damage and prevents healing until your next turn.",color:"#6b7280"},{name:"Speak with Dead",level:1,school:"Necromancy",castingTime:"3 actions",range:"10 feet",components:["V (death's language)","S (beckoning gesture)","M (burning incense)"],duration:"5 rounds",description:"Ask up to 5 questions of a corpse that died within the last week.",color:"#6b7280"},{name:"Vampiric Touch",level:1,school:"Necromancy",castingTime:"1 action",range:"Touch",components:["V (draining word)","S (life-stealing touch)"],duration:"Instantaneous",description:"Deal 2d6 necrotic damage and regain half as hit points.",color:"#6b7280"}],transmutation:[{name:"Mending",level:0,school:"Transmutation",castingTime:"1 action",range:"Touch",components:["V (repair word)","S (mending gesture)","M (two lodestones)"],duration:"Instantaneous",description:"Repairs a single break or tear in an object no larger than 1 foot.",color:"#06b6d4"},{name:"Alter Self",level:1,school:"Transmutation",castingTime:"1 action",range:"Self",components:["V (change word)","S (self-altering gestures)"],duration:"10 rounds",description:"Change your physical form: grow claws (+1d4 damage), gills (breathe water), or camouflage (+5 stealth).",color:"#06b6d4"},{name:"Enhance Ability",level:1,school:"Transmutation",castingTime:"1 action",range:"Touch",components:["V (empowering word)","S (enhancing touch)","M (hair or fur from a beast)"],duration:"10 rounds",description:"Target gains advantage on one type of ability check and +2 to that ability score.",color:"#06b6d4"}]},X=()=>Object.values(J).flat(),Z=e=>J[e.toLowerCase()]||[],ee=[{name:"Abjuration",description:"Protective magic",color:"#3b82f6"},{name:"Conjuration",description:"Summoning and creation",color:"#10b981"},{name:"Divination",description:"Information gathering",color:"#f59e0b"},{name:"Enchantment",description:"Mind control and charm",color:"#ec4899"},{name:"Evocation",description:"Destructive energy",color:"#ef4444"},{name:"Healing",description:"Restoration and recovery",color:"#22c55e"},{name:"Illusion",description:"Deception and trickery",color:"#8b5cf6"},{name:"Necromancy",description:"Death and undeath",color:"#6b7280"},{name:"Transmutation",description:"Transformation",color:"#06b6d4"}],te=["1 action","1 bonus action","1 reaction","2 actions","3 actions","1 full round","2 rounds","3 rounds","1 minute","10 minutes","1 hour"],ne=["Self","Touch","10 feet","30 feet","60 feet","120 feet","300 feet","500 feet","1 mile","Sight","Special"],re=["Instantaneous","1 round","2 rounds","3 rounds","5 rounds","10 rounds","1 minute (10 rounds)","10 minutes","1 hour","8 hours","24 hours","Until dispelled","Permanent","Concentration, up to 1 round","Concentration, up to 3 rounds","Concentration, up to 10 rounds","Concentration, up to 10 minutes","Concentration, up to 1 hour"],ae={verbal:["Simple word","Quick chant","Whispered phrase","Ancient incantation","Mystical chant","Power word","Arcane phrase","Sacred prayer","Elemental call","Divine invocation"],somatic:["Quick gesture","Simple motion","Finger snap","Hand wave","Precise gestures","Complex hand movements","Ritualistic dance","Finger patterns","Sweeping motions","Sacred signs"],material:["Small focus","Tiny crystal","Bit of string","Drop of water","Crystal focus","Rare herbs","Precious metals","Ancient runes","Elemental essence","Sacred symbols","Diamond dust","Silver wire"]},oe={0:{damage:"1d4 to 1d6",healing:"1d4",effects:"Minor utility, small bonuses (+1), brief duration",limitations:"Single target, short range, minimal impact"},1:{damage:"1d8 to 3d6",healing:"1d8 + modifier",effects:"Basic combat/utility, small area effects, moderate bonuses (+2)",limitations:"Limited targets, moderate range and duration"},2:{damage:"2d8 to 5d6",healing:"2d8 + modifier",effects:"Enhanced effects, larger areas, significant bonuses (+3-4)",limitations:"Multiple targets, good range and duration"},3:{damage:"3d8 to 8d6",healing:"3d8 + modifier",effects:"Powerful effects, condition removal, major bonuses (+4-5)",limitations:"Large areas, long duration, powerful utility"}};function ie(e){let{onBack:t,onSpellCreated:n}=e;const[r,a]=(0,s.useState)({name:"",level:0,school:"Evocation",castingTime:"1 action",range:"60 feet",duration:"Instantaneous",description:"",components:{verbal:!1,somatic:!1,material:!1,verbalDetail:"Ancient incantation",somaticDetail:"Precise gestures",materialDetail:"Crystal focus"}}),[o,i]=(0,s.useState)([]),[c,u]=(0,s.useState)(null),p=()=>{const e=(()=>{const e=[];return r.name.trim()||e.push("Spell name is required"),r.name.length>50&&e.push("Spell name too long (max 50 characters)"),r.description.trim()||e.push("Spell description is required"),r.description.length<20&&e.push("Spell description too short (minimum 20 characters)"),r.description.length>500&&e.push("Spell description too long (max 500 characters)"),r.components.verbal||r.components.somatic||r.components.material||e.push("Spell must have at least one component (Verbal, Somatic, or Material)"),0===r.level&&((r.duration.includes("hour")||r.duration.includes("day"))&&e.push("Cantrips cannot have durations longer than 10 minutes"),"1 mile"!==r.range&&"Sight"!==r.range||e.push("Cantrips should have limited range (max 120 feet)")),e})();if(e.length>0)return i(e),null;i([]);const t=[];r.components.verbal&&t.push("V (".concat(r.components.verbalDetail,")")),r.components.somatic&&t.push("S (".concat(r.components.somaticDetail,")")),r.components.material&&t.push("M (".concat(r.components.materialDetail,")"));const n=ee.find(e=>e.name===r.school)||ee[0];return{name:r.name,level:r.level,school:r.school,castingTime:r.castingTime,range:r.range,components:t,duration:r.duration,description:r.description,color:n.color}},f=()=>ee.find(e=>e.name===r.school)||ee[0],m=()=>oe[r.level]||oe[0];return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"#e2e8f0",padding:"2rem"},children:[(0,d.jsxs)("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid #334155",background:"rgba(15, 23, 42, 0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"8px",marginBottom:"2rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:"\u26a1 Custom Spell Creator"}),(0,d.jsx)("p",{style:{margin:"0.5rem 0 0",opacity:.8},children:"Create your own balanced spells with limitations and guidelines"})]}),t&&(0,d.jsx)("button",{onClick:t,style:{padding:"0.75rem 1.5rem",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Back"})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1.5rem",border:"1px solid #334155"},children:[(0,d.jsx)("h2",{style:{margin:"0 0 1.5rem",color:"#f1f5f9"},children:"\ud83d\udcdd Spell Details"}),(0,d.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"Spell Name"}),(0,d.jsx)("input",{type:"text",value:r.name,onChange:e=>a(l(l({},r),{},{name:e.target.value})),placeholder:"Enter spell name...",style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"1rem"}})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"Spell Level"}),(0,d.jsxs)("select",{value:r.level,onChange:e=>a(l(l({},r),{},{level:parseInt(e.target.value)})),style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"1rem"},children:[(0,d.jsx)("option",{value:0,children:"Cantrip"}),(0,d.jsx)("option",{value:1,children:"1st Level"}),(0,d.jsx)("option",{value:2,children:"2nd Level"}),(0,d.jsx)("option",{value:3,children:"3rd Level"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"School of Magic"}),(0,d.jsx)("select",{value:r.school,onChange:e=>a(l(l({},r),{},{school:e.target.value})),style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"1rem"},children:ee.map(e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.name))})]})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"Casting Time"}),(0,d.jsx)("select",{value:r.castingTime,onChange:e=>a(l(l({},r),{},{castingTime:e.target.value})),style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"0.9rem"},children:te.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"Range"}),(0,d.jsx)("select",{value:r.range,onChange:e=>a(l(l({},r),{},{range:e.target.value})),style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"0.9rem"},children:ne.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"Duration"}),(0,d.jsx)("select",{value:r.duration,onChange:e=>a(l(l({},r),{},{duration:e.target.value})),style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"0.9rem"},children:re.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]})]}),(0,d.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",color:"#cbd5e1"},children:"Components"}),(0,d.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,d.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[(0,d.jsx)("input",{type:"checkbox",checked:r.components.verbal,onChange:e=>a(l(l({},r),{},{components:l(l({},r.components),{},{verbal:e.target.checked})})),style:{marginRight:"0.5rem"}}),(0,d.jsx)("span",{style:{color:"#f9fafb"},children:"Verbal (V)"})]}),r.components.verbal&&(0,d.jsx)("select",{value:r.components.verbalDetail,onChange:e=>a(l(l({},r),{},{components:l(l({},r.components),{},{verbalDetail:e.target.value})})),style:{width:"100%",padding:"0.5rem",background:"#4b5563",border:"1px solid #6b7280",borderRadius:"4px",color:"#f9fafb",fontSize:"0.9rem"},children:ae.verbal.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,d.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[(0,d.jsx)("input",{type:"checkbox",checked:r.components.somatic,onChange:e=>a(l(l({},r),{},{components:l(l({},r.components),{},{somatic:e.target.checked})})),style:{marginRight:"0.5rem"}}),(0,d.jsx)("span",{style:{color:"#f9fafb"},children:"Somatic (S)"})]}),r.components.somatic&&(0,d.jsx)("select",{value:r.components.somaticDetail,onChange:e=>a(l(l({},r),{},{components:l(l({},r.components),{},{somaticDetail:e.target.value})})),style:{width:"100%",padding:"0.5rem",background:"#4b5563",border:"1px solid #6b7280",borderRadius:"4px",color:"#f9fafb",fontSize:"0.9rem"},children:ae.somatic.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[(0,d.jsx)("input",{type:"checkbox",checked:r.components.material,onChange:e=>a(l(l({},r),{},{components:l(l({},r.components),{},{material:e.target.checked})})),style:{marginRight:"0.5rem"}}),(0,d.jsx)("span",{style:{color:"#f9fafb"},children:"Material (M)"})]}),r.components.material&&(0,d.jsx)("input",{type:"text",value:r.components.materialDetail,onChange:e=>a(l(l({},r),{},{components:l(l({},r.components),{},{materialDetail:e.target.value})})),placeholder:"Describe material component...",style:{width:"100%",padding:"0.5rem",background:"#4b5563",border:"1px solid #6b7280",borderRadius:"4px",color:"#f9fafb",fontSize:"0.9rem"}})]})]}),(0,d.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#cbd5e1"},children:"Spell Description"}),(0,d.jsx)("textarea",{value:r.description,onChange:e=>a(l(l({},r),{},{description:e.target.value})),placeholder:"Describe what the spell does, its effects, damage, bonuses, etc...",rows:4,style:{width:"100%",padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",fontSize:"1rem",resize:"vertical"}}),(0,d.jsxs)("div",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:"0.25rem"},children:[r.description.length,"/500 characters"]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:()=>{const e=p();u(e)},style:{flex:1,padding:"0.75rem",background:f().color,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"\ud83d\udc41\ufe0f Preview Spell"}),(0,d.jsx)("button",{onClick:()=>{const e=p();e&&n&&n(e)},disabled:!c,style:{flex:1,padding:"0.75rem",background:c?"#059669":"#374151",color:"white",border:"none",borderRadius:"6px",cursor:c?"pointer":"not-allowed",fontSize:"1rem",fontWeight:"bold"},children:"\ud83d\udcbe Save Spell"})]}),o.length>0&&(0,d.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(220, 38, 38, 0.2)",border:"1px solid #dc2626",borderRadius:"6px"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.5rem",color:"#fca5a5"},children:"Validation Errors:"}),(0,d.jsx)("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#fca5a5"},children:o.map((e,t)=>(0,d.jsx)("li",{children:e},t))})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1.5rem",border:"2px solid ".concat(f().color)},children:[(0,d.jsxs)("h2",{style:{margin:"0 0 1rem",color:f().color},children:["\ud83d\udccb ",f().name," Guidelines"]}),(0,d.jsx)("p",{style:{margin:"0 0 1rem",color:"#cbd5e1",fontStyle:"italic"},children:f().description}),(0,d.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,d.jsxs)("h4",{style:{margin:"0 0 0.5rem",color:"#f1f5f9"},children:["Level ",r.level," ",0===r.level?"Cantrip":""," Limits:"]}),(0,d.jsxs)("div",{style:{fontSize:"0.9rem",color:"#94a3b8"},children:[(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Damage:"})," ",m().damage]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Healing:"})," ",m().healing]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Effects:"})," ",m().effects]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Limitations:"})," ",m().limitations]})]})]}),(0,d.jsxs)("div",{style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"6px",border:"1px solid #3b82f6"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.5rem",color:"#93c5fd"},children:"\ud83d\udca1 Design Tips:"}),(0,d.jsxs)("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#cbd5e1",fontSize:"0.9rem"},children:[(0,d.jsx)("li",{children:"Be specific about targets, ranges, and effects"}),(0,d.jsx)("li",{children:"Higher level spells should have more complex components"}),(0,d.jsx)("li",{children:"Balance damage with utility - not every spell needs to do damage"}),(0,d.jsx)("li",{children:"Consider what class would use this spell"}),(0,d.jsx)("li",{children:"Make effects interesting but not overpowered"})]})]})]}),c&&(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1.5rem",border:"2px solid ".concat(c.color)},children:[(0,d.jsx)("h2",{style:{margin:"0 0 1rem",color:"#f1f5f9"},children:"\ud83d\udc41\ufe0f Spell Preview"}),(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.8)",borderRadius:"6px",padding:"1.5rem",border:"1px solid ".concat(c.color)},children:[(0,d.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 0.25rem",color:c.color,fontSize:"1.5rem"},children:c.name}),(0,d.jsxs)("p",{style:{margin:0,color:"#94a3b8",fontSize:"0.9rem"},children:[0===c.level?"Cantrip":"".concat(c.level,"st Level")," ",c.school]})]}),(0,d.jsxs)("div",{style:{marginBottom:"1rem",fontSize:"0.9rem",color:"#cbd5e1"},children:[(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Casting Time:"})," ",c.castingTime]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Range:"})," ",c.range]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Components:"})," ",c.components.join(", ")]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Duration:"})," ",c.duration]})]}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{style:{margin:0,color:"#e2e8f0",lineHeight:"1.5"},children:c.description})})]})]})]})]})]})}const le={schools:[{name:"Abjuration",description:"Protective magic",color:"#3b82f6"},{name:"Conjuration",description:"Summoning and creation",color:"#10b981"},{name:"Divination",description:"Information gathering",color:"#f59e0b"},{name:"Enchantment",description:"Mind control and charm",color:"#ec4899"},{name:"Evocation",description:"Destructive energy",color:"#ef4444"},{name:"Healing",description:"Restoration and recovery",color:"#22c55e"},{name:"Illusion",description:"Deception and trickery",color:"#8b5cf6"},{name:"Necromancy",description:"Death and undeath",color:"#6b7280"},{name:"Transmutation",description:"Transformation",color:"#06b6d4"}]};function se(e){var t;let{onBack:n}=e;const[r,a]=(0,s.useState)("menu"),[o,i]=(0,s.useState)("any"),[l,c]=(0,s.useState)([]),[u,p]=(0,s.useState)([]);s.useEffect(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]");p(e)}catch(e){console.error("Error loading saved spells:",e),p([])}},[]);const f=e=>{c(t=>[e,...t]),console.log("\u2728 Created custom spell: ".concat(e.name)),a("menu")},m=e=>{let t=[];e&&"any"!==e?(t=Z(e),console.log("\ud83d\udcda Loaded ".concat(t.length," premade ").concat(e," spells"))):(t=X(),console.log("\ud83d\udcda Loaded ".concat(t.length," premade spells from all schools"))),c(t)};return"custom"===r?(0,d.jsx)(ie,{onBack:()=>a("menu"),onSpellCreated:f}):(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"#e2e8f0"},children:[(0,d.jsxs)("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid #334155",background:"rgba(15, 23, 42, 0.8)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:"\u26a1 Spell Workshop"}),(0,d.jsx)("p",{style:{margin:"0.5rem 0 0",opacity:.8},children:"menu"===r?"Choose your spell creation method":"premade"===r?"Browse curated spell collections":"Generate random magical spells"})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:["menu"!==r&&(0,d.jsx)("button",{onClick:()=>a("menu"),style:{padding:"0.75rem 1.5rem",background:"#6366f1",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"\ud83c\udfe0 Main Menu"}),n&&(0,d.jsx)("button",{onClick:n,style:{padding:"0.75rem 1.5rem",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Back to Game"})]})]}),"menu"===r&&(0,d.jsxs)("div",{style:{padding:"3rem 2rem"},children:[(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"12px",padding:"2rem",border:"2px solid #10b981",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>e.currentTarget.style.transform="translateY(-4px)",onMouseLeave:e=>e.currentTarget.style.transform="translateY(0px)",onClick:()=>a("premade"),children:[(0,d.jsx)("div",{style:{fontSize:"3rem",textAlign:"center",marginBottom:"1rem"},children:"\ud83d\udcda"}),(0,d.jsx)("h2",{style:{margin:"0 0 1rem",color:"#10b981",textAlign:"center",fontSize:"1.5rem"},children:"Premade Spell Collections"}),(0,d.jsx)("p",{style:{margin:"0 0 1.5rem",color:"#cbd5e1",textAlign:"center",lineHeight:"1.6"},children:"Browse carefully crafted spells for each school of magic. Perfect for quick gameplay and learning spell mechanics."}),(0,d.jsxs)("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"6px",padding:"1rem",border:"1px solid #10b981"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.5rem",color:"#6ee7b7"},children:"\u2728 Features:"}),(0,d.jsxs)("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#d1fae5"},children:[(0,d.jsx)("li",{children:"Balanced and tested spells"}),(0,d.jsx)("li",{children:"Organized by school and level"}),(0,d.jsx)("li",{children:"Rich flavor text and descriptions"}),(0,d.jsx)("li",{children:"Ready to use immediately"})]})]})]}),(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"12px",padding:"2rem",border:"2px solid #ef4444",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>e.currentTarget.style.transform="translateY(-4px)",onMouseLeave:e=>e.currentTarget.style.transform="translateY(0px)",onClick:()=>a("custom"),children:[(0,d.jsx)("div",{style:{fontSize:"3rem",textAlign:"center",marginBottom:"1rem"},children:"\u2692\ufe0f"}),(0,d.jsx)("h2",{style:{margin:"0 0 1rem",color:"#ef4444",textAlign:"center",fontSize:"1.5rem"},children:"Custom Spell Creator"}),(0,d.jsx)("p",{style:{margin:"0 0 1.5rem",color:"#cbd5e1",textAlign:"center",lineHeight:"1.6"},children:"Design your own spells from scratch with built-in balance guidelines. Perfect for experienced players who want full creative control."}),(0,d.jsxs)("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"6px",padding:"1rem",border:"1px solid #ef4444"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.5rem",color:"#fca5a5"},children:"\ud83d\udee0\ufe0f Features:"}),(0,d.jsxs)("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#fee2e2"},children:[(0,d.jsx)("li",{children:"Complete creative freedom"}),(0,d.jsx)("li",{children:"Balance guidelines and validation"}),(0,d.jsx)("li",{children:"Component customization"}),(0,d.jsx)("li",{children:"Real-time spell preview"})]})]}),(0,d.jsx)("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"6px",padding:"0.75rem",border:"1px solid #f59e0b",marginTop:"1rem"},children:(0,d.jsx)("div",{style:{color:"#fbbf24",fontSize:"0.9rem",textAlign:"center"},children:"\u26a0\ufe0f For Experienced Players"})})]})]}),(0,d.jsxs)("div",{style:{marginTop:"3rem",textAlign:"center",padding:"2rem",background:"rgba(15, 23, 42, 0.4)",borderRadius:"8px",border:"1px solid #334155"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 1rem",color:"#f1f5f9"},children:"\ud83d\udcca Spell Library Stats"}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",maxWidth:"800px",margin:"0 auto"},children:le.schools.map(e=>{const t=Z(e.name).length;return(0,d.jsxs)("div",{style:{padding:"1rem",background:"rgba(15, 23, 42, 0.6)",borderRadius:"6px",border:"1px solid ".concat(e.color)},children:[(0,d.jsx)("div",{style:{color:e.color,fontWeight:"bold"},children:e.name}),(0,d.jsxs)("div",{style:{color:"#94a3b8",fontSize:"0.9rem"},children:[t," spells"]})]},e.name)})})]})]}),"premade"===r&&(0,d.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 120px)"},children:[(0,d.jsxs)("div",{style:{width:"300px",padding:"2rem",borderRight:"1px solid #334155",overflowY:"auto",background:"rgba(15, 23, 42, 0.4)"},children:[(0,d.jsx)("h3",{style:{marginBottom:"1rem",color:"#f1f5f9"},children:"\ud83d\udcda Browse by School"}),(0,d.jsxs)("button",{onClick:()=>m("any"),style:{width:"100%",padding:"1rem",marginBottom:"0.5rem",background:"any"===o?"#374151":"rgba(15, 23, 42, 0.6)",border:"1px solid #4b5563",borderRadius:"6px",color:"#f9fafb",cursor:"pointer",textAlign:"left",fontSize:"1rem"},children:["\ud83c\udf1f All Schools (",X().length," spells)"]}),le.schools.map(e=>{const t=Z(e.name).length;return(0,d.jsxs)("button",{onClick:()=>{i(e.name.toLowerCase()),m(e.name)},style:{width:"100%",padding:"1rem",marginBottom:"0.5rem",background:o===e.name.toLowerCase()?e.color:"rgba(15, 23, 42, 0.6)",border:"1px solid ".concat(e.color),borderRadius:"6px",color:o===e.name.toLowerCase()?"#ffffff":e.color,cursor:"pointer",textAlign:"left",fontSize:"0.9rem",transition:"all 0.2s ease"},children:[(0,d.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),(0,d.jsxs)("div",{style:{fontSize:"0.8rem",opacity:.8},children:[e.description," (",t," spells)"]})]},e.name)})]}),(0,d.jsx)("div",{style:{flex:1,padding:"2rem",overflowY:"auto"},children:0===l.length?(0,d.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#94a3b8"},children:[(0,d.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83d\udcda"}),(0,d.jsx)("h3",{style:{margin:"0 0 1rem",color:"#cbd5e1"},children:"Select a School"}),(0,d.jsx)("p",{children:"Choose a school of magic from the left panel to browse curated spells."})]}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:{margin:"0 0 1.5rem",color:"#f1f5f9"},children:["any"===o?"All Schools":(null===(t=le.schools.find(e=>e.name.toLowerCase()===o))||void 0===t?void 0:t.name)||"Spells",(0,d.jsxs)("span",{style:{color:"#94a3b8",fontSize:"1rem",fontWeight:"normal",marginLeft:"1rem"},children:["(",l.length," spells)"]})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"1.5rem"},children:l.map((e,t)=>(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.8)",borderRadius:"8px",padding:"1.5rem",border:"2px solid ".concat(e.color),transition:"transform 0.2s ease"},children:[(0,d.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 0.25rem",color:e.color,fontSize:"1.3rem"},children:e.name}),(0,d.jsxs)("p",{style:{margin:0,color:"#94a3b8",fontSize:"0.9rem"},children:[0===e.level?"Cantrip":"Level ".concat(e.level)," ",e.school]})]}),(0,d.jsxs)("div",{style:{marginBottom:"1rem",fontSize:"0.9rem",color:"#cbd5e1"},children:[(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Casting Time:"})," ",e.castingTime]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Range:"})," ",e.range]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Components:"})," ",e.components.join(", ")]}),(0,d.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,d.jsx)("strong",{children:"Duration:"})," ",e.duration]})]}),(0,d.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,d.jsx)("p",{style:{margin:0,color:"#e2e8f0",lineHeight:"1.5"},children:e.description})}),(0,d.jsx)("button",{onClick:()=>(e=>{if(u.find(t=>t.name===e.name))return void alert("Spell already saved!");const t=[...u,e];p(t),localStorage.setItem("world-engine-saved-spells",JSON.stringify(t)),console.log("Spell saved:",e.name)})(e),style:{width:"100%",padding:"0.75rem",background:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"\ud83d\udcbe Save to Spellbook"})]},t))})]})})]}),u.length>0&&(0,d.jsxs)("div",{style:{position:"fixed",bottom:"2rem",right:"2rem",background:"rgba(15, 23, 42, 0.9)",border:"1px solid #334155",borderRadius:"8px",padding:"1rem",color:"#f1f5f9"},children:["\ud83d\udcbe ",u.length," spells saved"]})]})}function ce(e){let{onBack:t}=e;const[n,r]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[i,c]=(0,s.useState)(-1),[u,p]=(0,s.useState)(-1),f=e=>e.class||e.characterClass||"Unknown",m=e=>{var t;return e.level||(null===(t=e.data)||void 0===t?void 0:t.level)||1};(0,s.useEffect)(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-characters")||"[]"),t=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]"),n=[{id:"test-cleric",name:"Elara the Cleric",class:"Cleric",race:"Human",level:3,baseStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},finalStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},hitPoints:28,knownSpells:[],knownCantrips:[]},{id:"test-wizard",name:"Merlin the Wise",class:"Wizard",race:"Elf",level:4,baseStats:{strength:8,constitution:12,wisdom:13,intelligence:17,dexterity:14,charisma:10},finalStats:{strength:8,constitution:12,wisdom:13,intelligence:17,dexterity:14,charisma:10},hitPoints:24,knownSpells:[],knownCantrips:[]},{id:"test-paladin",name:"Sir Roland",class:"Paladin",race:"Human",level:3,baseStats:{strength:16,constitution:14,wisdom:11,intelligence:10,dexterity:10,charisma:15},finalStats:{strength:16,constitution:14,wisdom:11,intelligence:10,dexterity:10,charisma:15},hitPoints:32,knownSpells:[],knownCantrips:[]},{id:"test-sorcerer",name:"Luna Stormcaller",class:"Sorcerer",race:"Dragonborn",level:2,baseStats:{strength:10,constitution:13,wisdom:12,intelligence:11,dexterity:14,charisma:16},finalStats:{strength:10,constitution:13,wisdom:12,intelligence:11,dexterity:14,charisma:16},hitPoints:18,knownSpells:[],knownCantrips:[]},{id:"test-druid",name:"Thorn Earthwalker",class:"Druid",race:"Half-Elf",level:3,baseStats:{strength:11,constitution:14,wisdom:16,intelligence:12,dexterity:13,charisma:14},finalStats:{strength:11,constitution:14,wisdom:16,intelligence:12,dexterity:13,charisma:14},hitPoints:26,knownSpells:[],knownCantrips:[]}],a=[...n];e.forEach(e=>{n.find(t=>t.id===e.id)||a.push(e)}),r(a),o(t),console.log("Loaded characters:",a.length,"characters (",n.length,"test +",e.length,"saved)")}catch(e){console.error("Error loading data:",e),r([{id:"test-cleric",name:"Elara the Cleric",class:"Cleric",race:"Human",level:3,baseStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},finalStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},hitPoints:28,knownSpells:[],knownCantrips:[]},{id:"test-wizard",name:"Merlin the Wise",class:"Wizard",race:"Elf",level:4,baseStats:{strength:8,constitution:12,wisdom:13,intelligence:17,dexterity:14,charisma:10},finalStats:{strength:8,constitution:12,wisdom:13,intelligence:17,dexterity:14,charisma:10},hitPoints:24,knownSpells:[],knownCantrips:[]},{id:"test-paladin",name:"Sir Roland",class:"Paladin",race:"Human",level:3,baseStats:{strength:16,constitution:14,wisdom:11,intelligence:10,dexterity:10,charisma:15},finalStats:{strength:16,constitution:14,wisdom:11,intelligence:10,dexterity:10,charisma:15},hitPoints:32,knownSpells:[],knownCantrips:[]},{id:"test-sorcerer",name:"Luna Stormcaller",class:"Sorcerer",race:"Dragonborn",level:2,baseStats:{strength:10,constitution:13,wisdom:12,intelligence:11,dexterity:14,charisma:16},finalStats:{strength:10,constitution:13,wisdom:12,intelligence:11,dexterity:14,charisma:16},hitPoints:18,knownSpells:[],knownCantrips:[]},{id:"test-druid",name:"Thorn Earthwalker",class:"Druid",race:"Half-Elf",level:3,baseStats:{strength:11,constitution:14,wisdom:16,intelligence:12,dexterity:13,charisma:14},finalStats:{strength:11,constitution:14,wisdom:16,intelligence:12,dexterity:13,charisma:14},hitPoints:26,knownSpells:[],knownCantrips:[]}])}},[]);const h=(e,t)=>{const n=f(e),r=m(e),a={Wizard:{schools:["all"],maxLevel:Math.ceil(r/2)+1,stat:"intelligence"},Sorcerer:{schools:["all"],maxLevel:Math.ceil(r/2)+1,stat:"charisma"},Cleric:{schools:["Abjuration","Divination","Evocation","Healing"],maxLevel:Math.ceil(r/2)+1,stat:"wisdom"},Druid:{schools:["Conjuration","Divination","Evocation","Transmutation","Healing"],maxLevel:Math.ceil(r/2)+1,stat:"wisdom"},Paladin:{schools:["Abjuration","Evocation","Healing"],maxLevel:Math.max(1,Math.ceil((r-1)/4)),stat:"charisma"},Ranger:{schools:["Conjuration","Divination","Transmutation"],maxLevel:Math.max(1,Math.ceil((r-1)/4)),stat:"wisdom"},Bard:{schools:["all"],maxLevel:Math.ceil(r/2)+1,stat:"charisma"},Warlock:{schools:["all"],maxLevel:Math.min(5,Math.ceil(r/2)+1),stat:"charisma"}}[n];return!!a&&(!(t.level>a.maxLevel)&&(!("all"!==a.schools[0]&&!a.schools.includes(t.school))&&(0===t.level?!(null!==(o=e.knownCantrips)&&void 0!==o&&o.includes(t.name)):!(null!==(i=e.knownSpells)&&void 0!==i&&i.includes(t.name)))));var o,i},g=(e,t,a)=>{const o=n.map((n,r)=>{var o,i;return r===e?l(l({},n),{},a?{knownCantrips:(null===(o=n.knownCantrips)||void 0===o?void 0:o.filter(e=>e!==t))||[]}:{knownSpells:(null===(i=n.knownSpells)||void 0===i?void 0:i.filter(e=>e!==t))||[]}):n});r(o),localStorage.setItem("world-engine-characters",JSON.stringify(o))},y=e=>{const t=f(e),n=m(e);return{Wizard:{maxLevel:Math.ceil(n/2)+1,stat:"Intelligence"},Sorcerer:{maxLevel:Math.ceil(n/2)+1,stat:"Charisma"},Cleric:{maxLevel:Math.ceil(n/2)+1,stat:"Wisdom"},Druid:{maxLevel:Math.ceil(n/2)+1,stat:"Wisdom"},Paladin:{maxLevel:Math.max(1,Math.ceil((n-1)/4)),stat:"Charisma"},Ranger:{maxLevel:Math.max(1,Math.ceil((n-1)/4)),stat:"Wisdom"},Bard:{maxLevel:Math.ceil(n/2)+1,stat:"Charisma"},Warlock:{maxLevel:Math.min(5,Math.ceil(n/2)+1),stat:"Charisma"}}[t]};return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"#e2e8f0",padding:"2rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",padding:"1rem",background:"rgba(15, 23, 42, 0.8)",borderRadius:"8px",border:"1px solid #334155"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:"Spell Assignment"}),(0,d.jsx)("p",{style:{margin:"0.5rem 0 0",opacity:.8},children:"Assign spells to characters based on their class and abilities"})]}),t&&(0,d.jsx)("button",{onClick:t,style:{padding:"0.5rem 1rem",background:"#475569",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Back to Menu"})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,d.jsxs)("div",{style:{background:"rgba(30, 41, 59, 0.8)",border:"1px solid #334155",borderRadius:"8px",padding:"1.5rem"},children:[(0,d.jsx)("h2",{style:{margin:"0 0 1rem",color:"#3b82f6"},children:"Assign Spells"}),0===n.length&&(0,d.jsx)("p",{style:{color:"#94a3b8",fontStyle:"italic"},children:"No characters found. Create some characters first!"}),0===a.length&&(0,d.jsx)("p",{style:{color:"#94a3b8",fontStyle:"italic"},children:"No spells available. Generate some spells first!"}),n.length>0&&a.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Select Character:"}),(0,d.jsxs)("select",{value:i,onChange:e=>c(parseInt(e.target.value)),style:{width:"100%",padding:"0.5rem",background:"#1e293b",border:"1px solid #475569",borderRadius:"4px",color:"#e2e8f0"},children:[(0,d.jsx)("option",{value:-1,children:"Choose a character..."}),n.map((e,t)=>{const n=y(e),r=f(e),a=m(e);return(0,d.jsxs)("option",{value:t,children:[e.name," (",r,", Level ",a,n?" - Max Spell Level ".concat(n.maxLevel):" - No Spellcasting",")"]},t)})]})]}),(0,d.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Select Spell:"}),(0,d.jsxs)("select",{value:u,onChange:e=>p(parseInt(e.target.value)),style:{width:"100%",padding:"0.5rem",background:"#1e293b",border:"1px solid #475569",borderRadius:"4px",color:"#e2e8f0"},children:[(0,d.jsx)("option",{value:-1,children:"Choose a spell..."}),a.map((e,t)=>{const r=!(i>=0)||h(n[i],e);return(0,d.jsxs)("option",{value:t,disabled:!r,style:{color:r?"#e2e8f0":"#6b7280"},children:[e.name," (Level ",e.level,", ",e.school,")",r?"":" - Cannot Learn"]},t)})]})]}),(0,d.jsx)("button",{onClick:()=>{if(-1===i||-1===u)return;const e=n[i],t=a[u];if(!h(e,t))return void alert("".concat(e.name," cannot learn ").concat(t.name,"!"));const o=n.map((e,n)=>n===i?0===t.level?l(l({},e),{},{knownCantrips:[...e.knownCantrips||[],t.name]}):l(l({},e),{},{knownSpells:[...e.knownSpells||[],t.name]}):e);r(o),localStorage.setItem("world-engine-characters",JSON.stringify(o)),c(-1),p(-1)},disabled:-1===i||-1===u,style:{width:"100%",padding:"0.75rem",background:i>=0&&u>=0?"#3b82f6":"#475569",color:"white",border:"none",borderRadius:"6px",fontSize:"1rem",cursor:i>=0&&u>=0?"pointer":"not-allowed",fontWeight:"bold"},children:"Assign Spell"}),i>=0&&u>=0&&(0,d.jsx)("div",{style:{marginTop:"1rem",padding:"1rem",background:h(n[i],a[u])?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",border:"1px solid ".concat(h(n[i],a[u])?"#22c55e":"#ef4444"),borderRadius:"6px"},children:(0,d.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:h(n[i],a[u])?"\u2713 ".concat(n[i].name," can learn ").concat(a[u].name,"!"):"\u2717 ".concat(n[i].name," cannot learn ").concat(a[u].name,".")})})]})]}),(0,d.jsxs)("div",{style:{background:"rgba(30, 41, 59, 0.8)",border:"1px solid #334155",borderRadius:"8px",padding:"1.5rem"},children:[(0,d.jsx)("h2",{style:{margin:"0 0 1rem",color:"#22c55e"},children:"Character Spells"}),0===n.length?(0,d.jsx)("p",{style:{color:"#94a3b8",fontStyle:"italic"},children:"No characters to display."}):(0,d.jsx)("div",{style:{maxHeight:"70vh",overflowY:"auto"},children:n.map((e,t)=>{const n=y(e);return(0,d.jsxs)("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"rgba(15, 23, 42, 0.6)",border:"1px solid #475569",borderRadius:"6px"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)("h3",{style:{margin:0,color:"#f8fafc"},children:e.name}),(0,d.jsxs)("span",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:[f(e)," Level ",m(e)]})]}),n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{style:{margin:"0.5rem 0",fontSize:"0.8rem",color:"#94a3b8"},children:["Spellcasting Stat: ",n.stat," | Max Spell Level: ",n.maxLevel]}),e.knownCantrips&&e.knownCantrips.length>0&&(0,d.jsxs)("div",{style:{marginBottom:"0.5rem"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.25rem",fontSize:"0.9rem",color:"#60a5fa"},children:"Cantrips:"}),e.knownCantrips.map((e,n)=>(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.25rem 0.5rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid #3b82f6",borderRadius:"4px",margin:"0.25rem 0",fontSize:"0.8rem"},children:[(0,d.jsx)("span",{children:e}),(0,d.jsx)("button",{onClick:()=>g(t,e,!0),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"3px",padding:"0.125rem 0.25rem",fontSize:"0.7rem",cursor:"pointer"},children:"Remove"})]},n))]}),e.knownSpells&&e.knownSpells.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.25rem",fontSize:"0.9rem",color:"#34d399"},children:"Spells:"}),e.knownSpells.map((e,n)=>(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.25rem 0.5rem",background:"rgba(34, 197, 94, 0.1)",border:"1px solid #22c55e",borderRadius:"4px",margin:"0.25rem 0",fontSize:"0.8rem"},children:[(0,d.jsx)("span",{children:e}),(0,d.jsx)("button",{onClick:()=>g(t,e,!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"3px",padding:"0.125rem 0.25rem",fontSize:"0.7rem",cursor:"pointer"},children:"Remove"})]},n))]}),(!e.knownSpells||0===e.knownSpells.length)&&(!e.knownCantrips||0===e.knownCantrips.length)&&(0,d.jsx)("p",{style:{fontSize:"0.8rem",color:"#6b7280",fontStyle:"italic"},children:"No spells learned yet."})]}):(0,d.jsx)("p",{style:{fontSize:"0.8rem",color:"#6b7280",fontStyle:"italic"},children:"This class cannot cast spells."})]},t)})})]})]})]})}function de(e){let{onBack:t}=e;const[n,r]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[i,c]=(0,s.useState)([]);s.useEffect(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-characters")||"[]"),t=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]");console.log("Raw saved characters:",e);const n=[{name:"Elara the Cleric",class:"Cleric",baseStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},finalStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},hitPoints:32,level:3,knownSpells:["Cure Light Wounds","Healing Word","Prayer of Healing"]},{name:"Thorin Ironbeard",class:"Fighter",baseStats:{strength:16,constitution:15,wisdom:11,intelligence:9,dexterity:12,charisma:10},finalStats:{strength:16,constitution:15,wisdom:11,intelligence:9,dexterity:12,charisma:10},hitPoints:18,level:2},{name:"Luna Shadowstep",class:"Rogue",baseStats:{strength:10,constitution:12,wisdom:14,intelligence:13,dexterity:17,charisma:11},finalStats:{strength:10,constitution:12,wisdom:14,intelligence:13,dexterity:17,charisma:11},hitPoints:22,level:2}],a=[...n];e.forEach(e=>{if(e.characterClass&&e.name&&!a.find(t=>t.name===e.name)){var t;const n=e.data||e,r=n.constitution||(null===(t=n.baseStats)||void 0===t?void 0:t.constitution)||14,o=e.level||n.level||1,i=10+Math.floor((r-10)/2)*o,l=Math.max(i+6*o,20),s={name:e.name,class:e.characterClass,baseStats:{strength:n.strength||10,constitution:r,wisdom:n.wisdom||12,intelligence:n.intelligence||11,dexterity:n.dexterity||13,charisma:n.charisma||10},finalStats:{strength:n.strength||10,constitution:r,wisdom:n.wisdom||12,intelligence:n.intelligence||11,dexterity:n.dexterity||13,charisma:n.charisma||10},hitPoints:l,level:o,knownSpells:n.knownSpells||[],knownCantrips:n.knownCantrips||[]};a.push(s)}}),r(a),u("Loaded ".concat(a.length," characters for healing system (").concat(n.length," test + ").concat(a.length-n.length," saved)"));const i=a.filter(e=>!n.find(t=>t.name===e.name));i.length>0&&u("Custom characters loaded: ".concat(i.map(e=>"".concat(e.name," (").concat(e.hitPoints," HP)")).join(", "))),o(t)}catch(e){console.error("Error loading data:",e);r([{name:"Elara the Cleric",class:"Cleric",baseStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},finalStats:{strength:12,constitution:14,wisdom:16,intelligence:10,dexterity:13,charisma:15},hitPoints:32,level:3,knownSpells:["Cure Light Wounds","Healing Word","Prayer of Healing"]}]),u("Loaded fallback test characters")}},[]);const u=e=>{c(t=>[...t,e])},p=e=>Math.floor(Math.random()*e)+1,f=e=>Math.floor((e-10)/2),m=e=>e<=0?"#991b1b":e<=25?"#dc2626":e<=50?"#f59e0b":e<=75?"#eab308":"#10b981",h=a.filter(e=>e.description.toLowerCase().includes("heal")||e.description.toLowerCase().includes("restore"));return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"#e2e8f0",padding:"2rem"},children:[(0,d.jsxs)("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid #334155",background:"rgba(15, 23, 42, 0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"8px",marginBottom:"2rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:"\u2695\ufe0f Healing & Recovery System"}),(0,d.jsx)("p",{style:{margin:"0.5rem 0 0",opacity:.8},children:"Manage your party's health and use healing magic"})]}),t&&(0,d.jsx)("button",{onClick:t,style:{padding:"0.75rem 1.5rem",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Back to Menu"})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1.5rem",border:"1px solid #334155"},children:[(0,d.jsx)("h2",{style:{margin:"0 0 1.5rem",color:"#f1f5f9"},children:"\ud83d\udc65 Party Health Status"}),0===n.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontStyle:"italic"},children:"No characters found. Create some characters first!"}):(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map((e,t)=>{return(0,d.jsxs)("div",{style:{padding:"1rem",background:"rgba(15, 23, 42, 0.8)",border:"2px solid ".concat(m(e.hitPoints)),borderRadius:"6px"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{margin:"0 0 0.25rem",color:"#f1f5f9"},children:e.name}),(0,d.jsxs)("p",{style:{margin:0,color:"#94a3b8",fontSize:"0.9rem"},children:[e.class," \u2022 Level ",e.level]})]}),(0,d.jsxs)("div",{style:{textAlign:"right"},children:[(0,d.jsxs)("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:m(e.hitPoints)},children:[e.hitPoints,"/100 HP"]}),(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:m(e.hitPoints)},children:(n=e.hitPoints,n<=0?"Unconscious":n<=25?"Critical":n<=50?"Injured":n<=75?"Wounded":"Healthy")})]})]}),(0,d.jsx)("div",{style:{marginTop:"0.75rem",width:"100%",height:"8px",background:"#374151",borderRadius:"4px",overflow:"hidden"},children:(0,d.jsx)("div",{style:{width:"".concat(e.hitPoints,"%"),height:"100%",background:m(e.hitPoints),transition:"width 0.3s ease"}})}),(0,d.jsxs)("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,d.jsx)("button",{onClick:()=>(e=>{const t=f(e.finalStats.constitution),n=Math.max(1,p(4)+t),a=e.hitPoints,o=Math.min(e.hitPoints+n,100);r(t=>t.map(t=>t.name===e.name?l(l({},t),{},{hitPoints:o}):t));const i=o-a;u("\ud83d\udee1\ufe0f ".concat(e.name," takes a rest and recovers naturally")),u("\ud83d\udc9a Natural healing: ".concat(i," HP (").concat(a," \u2192 ").concat(o,")"))})(e),style:{padding:"0.5rem 1rem",background:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udecf\ufe0f Natural Rest"}),(0,d.jsx)("button",{onClick:()=>(e=>{if(isNaN(e.hitPoints)||void 0===e.hitPoints)return void u("\u274c Error: ".concat(e.name," has invalid HP data. Cannot simulate injury."));const t=p(20)+p(6),n=e.hitPoints,a=Math.max(0,e.hitPoints-t);r(t=>t.map(t=>t.name===e.name?l(l({},t),{},{hitPoints:a}):t)),u("\ud83d\udca5 ".concat(e.name," suffers an injury: ").concat(t," damage (").concat(n," \u2192 ").concat(a,")")),0===a&&u("\ud83d\udc80 ".concat(e.name," is unconscious and needs immediate healing!"))})(e),style:{padding:"0.5rem 1rem",background:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udca5 Simulate Injury"})]})]},t);var n})})]}),(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1.5rem",border:"1px solid #334155"},children:[(0,d.jsx)("h2",{style:{margin:"0 0 1.5rem",color:"#f1f5f9"},children:"\u2728 Healing Magic"}),0===h.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontStyle:"italic"},children:"No healing spells found. Generate some healing spells in the Spell Generator!"}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{style:{color:"#94a3b8",marginBottom:"1rem"},children:["Available healing spells: ",h.length]}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:h.map((e,t)=>(0,d.jsxs)("div",{style:{padding:"1rem",background:"rgba(15, 23, 42, 0.8)",border:"2px solid ".concat(e.color),borderRadius:"6px"},children:[(0,d.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.25rem",color:e.color},children:e.name}),(0,d.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#94a3b8"},children:[0===e.level?"Cantrip":"Level ".concat(e.level)," \u2022 ",e.school]}),(0,d.jsx)("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#cbd5e1"},children:e.description})]}),(0,d.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,d.jsx)("label",{style:{fontSize:"0.9rem",color:"#94a3b8",marginBottom:"0.5rem",display:"block"},children:"Choose caster:"}),(0,d.jsxs)("select",{style:{width:"100%",padding:"0.5rem",background:"#374151",border:"1px solid #6b7280",borderRadius:"4px",color:"#f9fafb"},children:[(0,d.jsx)("option",{value:"",children:"Select a character..."}),n.map((e,t)=>(0,d.jsxs)("option",{value:t,children:[e.name," (Level ",e.level," ",e.class,")"]},t))]})]}),(0,d.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,d.jsx)("label",{style:{fontSize:"0.9rem",color:"#94a3b8",marginBottom:"0.5rem",display:"block"},children:"Choose target:"}),(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map((t,a)=>(0,d.jsxs)("button",{onClick:()=>{const a=document.querySelector("select"),o=parseInt((null===a||void 0===a?void 0:a.value)||"0");null!==a&&void 0!==a&&a.value&&n[o]?((e,t,n)=>{const a=t.description.toLowerCase();if(!a.includes("heal")&&!a.includes("restore"))return void u("\u274c ".concat(t.name," is not a healing spell!"));let o=0;const i=f(e.finalStats.wisdom);o=0===t.level?p(4)+i:p(8)*t.level+i,o=Math.max(1,o);const s=n.hitPoints,c=Math.min(n.hitPoints+o,100);r(e=>e.map(e=>e.name===n.name?l(l({},e),{},{hitPoints:c}):e));const d=c-s;u("\u2728 ".concat(e.name," casts ").concat(t.name," on ").concat(n.name)),u("\ud83d\udc9a ".concat(n.name," heals ").concat(d," HP (").concat(s," \u2192 ").concat(c,")")),0===d&&u("".concat(n.name," is already at full health!"))})(n[o],e,t):u("\u274c Please select a caster first!")},style:{padding:"0.5rem 0.75rem",background:t.hitPoints<100?"#3b82f6":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:t.hitPoints<100?"pointer":"not-allowed",fontSize:"0.8rem"},disabled:t.hitPoints>=100,children:[t.name," (",t.hitPoints,"/100)"]},a))})]})]},t))})]})]})]}),(0,d.jsxs)("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",border:"1px solid #334155"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 1rem",color:"#f1f5f9"},children:"\ud83d\udcdc Healing Log"}),(0,d.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",padding:"1rem",maxHeight:"200px",overflowY:"auto",fontSize:"0.9rem"},children:0===i.length?(0,d.jsx)("p",{style:{color:"#64748b",fontStyle:"italic"},children:"No healing actions yet..."}):i.slice(-10).map((e,t)=>(0,d.jsx)("div",{style:{marginBottom:"0.5rem",color:"#d1d5db"},children:e},t))}),(0,d.jsx)("button",{onClick:()=>c([]),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Clear Log"})]})]})}class ue{constructor(e){this.seed=void 0,this.seed=this.hashString(e)}hashString(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)}next(){return this.seed=(1664525*this.seed+1013904223)%4294967296,this.seed/4294967296}nextInt(e,t){return Math.floor(this.next()*(t-e))+e}pick(e){return e[this.nextInt(0,e.length)]}shuffle(e){const t=[...e];for(let n=t.length-1;n>0;n--){const e=this.nextInt(0,n+1);[t[n],t[e]]=[t[e],t[n]]}return t}chance(e){return this.next()<e}}const pe={types:["delivery","rescue","elimination","exploration","escort","collection","investigation","diplomatic"],objectives:{delivery:["Deliver a package","Transport goods","Carry a message","Bring supplies"],rescue:["Save the prisoner","Rescue the merchant","Find the missing child","Free the captives"],elimination:["Eliminate the threat","Clear the monsters","Defeat the bandit leader","Stop the cult"],exploration:["Map the area","Find the ancient ruins","Discover the secret","Explore the dungeon"],escort:["Protect the caravan","Guard the diplomat","Escort the noble","Safeguard the witness"],collection:["Gather rare herbs","Collect magical components","Retrieve stolen items","Find the artifacts"],investigation:["Solve the mystery","Uncover the truth","Find the culprit","Investigate the disappearance"],diplomatic:["Negotiate peace","Establish trade","Arrange alliance","Mediate dispute"]},locations:["ancient ruins","dark forest","abandoned mine","mountain pass","haunted mansion","bandit camp","mystical grove","underground cavern"],rewards:["gold coins","magical item","rare weapon","ancient scroll","precious gems","land deed","noble title","magical knowledge"],complications:["time limit","rival party","dangerous weather","political intrigue","cursed location","false information","hostile locals","ancient guardian"]},fe=["friendly","suspicious","helpful","greedy","wise","eccentric","stern","cheerful","mysterious","ambitious"],me=["merchant","guard","scholar","priest","blacksmith","innkeeper","farmer","noble","thief","hunter"],he=["has hidden wealth","knows ancient lore","is secretly noble","has criminal past","possesses magic item","owes large debt","is hiding identity","has powerful enemy"];class ge{constructor(e,t,n){this.rng=void 0,this.rng=new ue("".concat(e,"-settlement-").concat(t,"-").concat(n))}generate(){const e=this.rng.pick(["city","town","village","outpost","trading_post"]),t=["Iron","Gold","Silver","Stone","Wood","River","Hill","Vale","North","South","East","West"],n=["hold","haven","ford","bury","ton","ham","stead","bridge","gate","peak","dale","brook"],r=this.rng.pick(t)+this.rng.pick(n),a=this.generateServices(e),o=this.generateNPCs(e);return{name:r,type:e,population:this.getPopulation(e),services:a,npcs:o,description:this.generateDescription(r,e)}}getPopulation(e){const t={city:[5e3,2e4],town:[1e3,5e3],village:[100,1e3],outpost:[20,100],trading_post:[50,200]}[e]||[100,1e3];return this.rng.nextInt(t[0],t[1])}generateServices(e){const t="city"===e?8:"town"===e?6:"village"===e?4:2;return this.rng.shuffle(["inn","blacksmith","general_store","temple","market","barracks","library","alchemist","stable","bank"]).slice(0,t)}generateNPCs(e){const t="city"===e?5:"town"===e?3:2,n=[];for(let r=0;r<t;r++)n.push({name:this.generateNPCName(),occupation:this.rng.pick(me),personality:this.rng.pick(fe),secret:this.rng.chance(.3)?this.rng.pick(he):void 0});return n}generateNPCName(){return this.rng.pick(["Gareth","Elena","Marcus","Aria","Thane","Vera","Aldric","Kira","Owen","Luna"])+" "+this.rng.pick(["Blackwood","Silverstone","Ironforge","Goldleaf","Stormwind","Ravencrest","Thornfield","Ashworth"])}generateDescription(e,t){return{city:"".concat(e," is a bustling metropolis with towering walls and busy markets."),town:"".concat(e," is a prosperous town known for its skilled craftsmen and trade."),village:"".concat(e," is a quiet village where everyone knows each other."),outpost:"".concat(e," is a frontier outpost guarding the wilderness."),trading_post:"".concat(e," is a vital trading post connecting distant regions.")}[t]||"".concat(e," is a settlement of some renown.")}}class ye{constructor(e,t,n){this.rng=void 0,this.rng=new ue("".concat(e,"-quest-").concat(t,"-").concat(n))}generate(){const e=this.rng.pick(pe.types),t=this.rng.pick(pe.objectives[e]),n=this.rng.pick(pe.locations),r=this.rng.pick(pe.rewards),a=this.rng.chance(.4)?this.rng.pick(pe.complications):null;return{title:this.generateTitle(t,n),type:e,objective:t,location:n,reward:r,complication:a,description:this.generateDescription(t,n,r,a),difficulty:this.rng.pick(["easy","medium","hard","epic"])}}generateTitle(e,t){const n=["The ".concat(t," ").concat(e.split(" ").slice(-1)[0]),"".concat(e," at the ").concat(t),"Quest for the ".concat(t),"The ".concat(t," Mystery")];return this.rng.pick(n)}generateDescription(e,t,n,r){let a="".concat(e," in the ").concat(t,". ");return a+="Success will be rewarded with ".concat(n,". "),r&&(a+="However, beware of ".concat(r,".")),a}}function be(e){let{playerCharacters:t,encounter:n,onBattleEnd:r,onBack:a}=e;const[o,i]=(0,s.useState)("setup"),[c,u]=(0,s.useState)(0),[p,f]=(0,s.useState)(1),[m,h]=(0,s.useState)([]),[g,y]=(0,s.useState)([]),[b,v]=(0,s.useState)(null),[x,w]=(0,s.useState)(null),[k,S]=(0,s.useState)([]),[j,C]=(0,s.useState)([]);(0,s.useEffect)(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-saved-spells")||"[]");C(e)}catch(e){console.error("Error loading saved spells:",e)}},[]),(0,s.useEffect)(()=>{const e=[...t.map((e,t)=>({id:"player-".concat(t),name:e.name,type:"player",character:e,currentHP:e.hitPoints,maxHP:e.hitPoints,armorClass:10+T(e.finalStats.dexterity),initiative:E(e.finalStats.dexterity),statusEffects:[]})),...n.enemies.map((e,t)=>({id:"enemy-".concat(t),name:e.name,type:"enemy",enemy:e,currentHP:e.hitPoints,maxHP:e.hitPoints,armorClass:e.armorClass,initiative:E(12),statusEffects:[]}))],r=e.sort((e,t)=>t.initiative-e.initiative),a=r.map(e=>e.id);h(e),y(a),i("active"),R("\u2694\ufe0f Battle begins! ".concat(n.name)),R("Terrain: ".concat(n.terrain)),R("Initiative order: "+r.map(e=>"".concat(e.name," (").concat(e.initiative,")")).join(", "))},[t,n]);const T=e=>Math.floor((e-10)/2),E=e=>Math.floor(20*Math.random())+1+T(e),P=e=>{const t=e.match(/(\d+)d(\d+)(?:\+(\d+))?/);if(!t)return 1;const n=parseInt(t[1]),r=parseInt(t[2]);let a=parseInt(t[3]||"0");for(let o=0;o<n;o++)a+=Math.floor(Math.random()*r)+1;return a},R=e=>{S(t=>[...t,e])},N=()=>{if(0===g.length)return null;const e=g[c];return m.find(t=>t.id===e)||null},M=e=>{const t=e.description.toLowerCase();if("self"===e.range.toLowerCase())return"self";if(t.includes("heal")||t.includes("restore")||t.includes("protect"))return"ally";if(t.includes("damage")||t.includes("attack")||t.includes("harm"))return"enemy";const n=e.school.toLowerCase();return["evocation","necromancy","enchantment"].includes(n)?"enemy":["abjuration","divination"].includes(n)?"ally":"enemy"},L=(e,t)=>{switch(t.target){case"self":return[e];case"ally":case"all-allies":return m.filter(t=>t.type===e.type&&t.currentHP>0);case"enemy":case"all-enemies":return m.filter(t=>t.type!==e.type&&t.currentHP>0);default:return[]}},I=(e,t,n)=>{switch(t.type){case"attack":z(e,n[0]);break;case"cast-cantrip":case"cast-spell":B(e,t,n);break;case"defend":O(e);break;case"move":D(e)}},z=(e,t)=>{var n;const r=Math.floor(20*Math.random())+1,a=e.character?T(e.character.finalStats.strength):(null===(n=e.enemy)||void 0===n?void 0:n.attack)||0,o=r+a;if(R("".concat(e.name," attacks ").concat(t.name,"! (").concat(r," + ").concat(a," = ").concat(o," vs AC ").concat(t.armorClass,")")),o>=t.armorClass){var i;const n=e.character?P("1d6")+T(e.character.finalStats.strength):P((null===(i=e.enemy)||void 0===i?void 0:i.damage)||"1d6"),r=Math.max(1,n);h(e=>e.map(e=>e.id===t.id?l(l({},e),{},{currentHP:Math.max(0,e.currentHP-r)}):e)),R("\ud83c\udfaf Hit! ".concat(t.name," takes ").concat(r," damage.")),t.currentHP-r<=0&&R("\ud83d\udc80 ".concat(t.name," is defeated!"))}else R("\u274c Miss!")},B=(e,t,n)=>{const r=t.name.replace("Cast ",""),a=j.find(e=>e.name===r);if(a){if(R("\u2728 ".concat(e.name," casts ").concat(a.name,"!")),n.forEach(t=>{A(e,t,a)}),a.duration.toLowerCase().includes("concentration")){const t=a.duration.match(/(\d+)\s*rounds?/),n=t?parseInt(t[1]):3;h(t=>t.map(t=>t.id===e.id?l(l({},t),{},{concentrationSpell:{name:a.name,duration:n,effect:a.description}}):t))}}else R("\u274c ".concat(e.name," failed to cast ").concat(r," - spell not found!"))},A=(e,t,n)=>{const r=n.description.toLowerCase(),a=n.school.toLowerCase(),o=n.level;let i="damage",s=0===o?4:Math.max(4,3*o);switch(r.includes("heal")||r.includes("restore")?(i="heal",s=0===o?3:Math.max(3,2*o)):r.includes("protect")||r.includes("barrier")||r.includes("shield")?(i="protection",s=2+o):(r.includes("damage")||r.includes("harm")||"evocation"===a)&&(i="damage",s=0===o?4:Math.max(4,3*o)),i){case"heal":const e=P("1d".concat(s+2))+(o>0?o:1);h(n=>n.map(n=>n.id===t.id?l(l({},n),{},{currentHP:Math.min(n.maxHP,n.currentHP+e)}):n)),R("\ud83d\udc9a ".concat(t.name," heals ").concat(e," HP!"));break;case"damage":const r=P("1d".concat(s))+(o>0?o:0);h(e=>e.map(e=>e.id===t.id?l(l({},e),{},{currentHP:Math.max(0,e.currentHP-r)}):e)),R("\ud83d\udca5 ".concat(t.name," takes ").concat(r," magical damage!")),t.currentHP-r<=0&&R("\ud83d\udc80 ".concat(t.name," is defeated by magic!"));break;case"protection":const a=Math.max(1,Math.floor(s/2));h(e=>e.map(e=>e.id===t.id?l(l({},e),{},{statusEffects:[...e.statusEffects,{name:"".concat(n.name," Protection"),duration:a,effect:"+".concat(s," AC"),color:n.color}]}):e)),R("\ud83d\udee1\ufe0f ".concat(t.name," gains magical protection (+").concat(s," AC for ").concat(a," rounds)!"))}},O=e=>{h(t=>t.map(t=>t.id===e.id?l(l({},t),{},{statusEffects:[...t.statusEffects,{name:"Defending",duration:1,effect:"+2 AC",color:"#10b981"}]}):t)),R("\ud83d\udee1\ufe0f ".concat(e.name," takes a defensive stance."))},D=e=>{R("\ud83c\udfc3 ".concat(e.name," moves to a better position."))},_=()=>{h(e=>e.map(e=>l(l({},e),{},{statusEffects:e.statusEffects.map(e=>l(l({},e),{},{duration:e.duration-1})).filter(e=>e.duration>0),concentrationSpell:e.concentrationSpell&&e.concentrationSpell.duration>1?l(l({},e.concentrationSpell),{},{duration:e.concentrationSpell.duration-1}):void 0})));let e=(c+1)%g.length;0===e&&(f(e=>e+1),R("\n--- Round ".concat(p+1," ---"))),u(e),v(null),w(null);const t=m.filter(e=>"player"===e.type&&e.currentHP>0),a=m.filter(e=>"enemy"===e.type&&e.currentHP>0);0===t.length?(i("defeat"),r("defeat")):0===a.length&&(i("victory"),r("victory",{experience:100*n.enemies.length,gold:Math.floor(50*Math.random())+10}))},W=e=>{if(!b)return;const t=N();if(!t)return;const n=m.find(t=>t.id===e);n&&(I(t,b,[n]),setTimeout(()=>{_()},1500))},F=()=>{const e=N();"enemy"===(null===e||void 0===e?void 0:e.type)&&((e=>{const t=m.filter(e=>"player"===e.type&&e.currentHP>0);if(0===t.length)return;const n=t[Math.floor(Math.random()*t.length)];I(e,{type:"attack",name:"Attack",description:"Enemy attack",target:"enemy"},[n])})(e),setTimeout(()=>{_()},2e3))};if((0,s.useEffect)(()=>{const e=N();if("enemy"===(null===e||void 0===e?void 0:e.type)&&"active"===o){const e=setTimeout(()=>{F()},1e3);return()=>clearTimeout(e)}},[c,o]),"setup"===o)return(0,d.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"#f1f5f9",padding:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsx)("h2",{children:"\u2694\ufe0f Preparing for Battle..."}),(0,d.jsx)("p",{children:"Rolling initiative and setting up the encounter"})]})});const H=N(),U="player"===(null===H||void 0===H?void 0:H.type);return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"#f1f5f9",padding:"1rem"},children:[(0,d.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem",padding:"1rem",background:"rgba(15, 23, 42, 0.8)",borderRadius:"8px",border:"1px solid #334155"},children:[(0,d.jsxs)("h1",{style:{margin:"0 0 0.5rem",fontSize:"1.8rem"},children:["\u2694\ufe0f ",n.name]}),(0,d.jsxs)("p",{style:{margin:0,color:"#94a3b8"},children:["Round ",p," \u2022 ",null===H||void 0===H?void 0:H.name,"'s Turn (",null===H||void 0===H?void 0:H.type,")"]}),a&&(0,d.jsx)("button",{onClick:a,style:{position:"absolute",top:"1rem",left:"1rem",padding:"0.5rem 1rem",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u2190 Back"})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 300px",gap:"1rem",height:"calc(100vh - 200px)"},children:[(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1rem",border:"2px solid #059669"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 1rem",color:"#10b981"},children:"\ud83d\udc65 Player Characters"}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:m.filter(e=>"player"===e.type).map(e=>{var t;return(0,d.jsxs)("div",{onClick:()=>b&&L(H,b).some(t=>t.id===e.id)&&W(e.id),style:{padding:"0.75rem",background:(null===H||void 0===H?void 0:H.id)===e.id?"rgba(59, 130, 246, 0.3)":"rgba(15, 23, 42, 0.8)",border:(null===H||void 0===H?void 0:H.id)===e.id?"2px solid #3b82f6":b&&L(H,b).some(t=>t.id===e.id)?"2px solid #f59e0b":"1px solid #334155",borderRadius:"6px",cursor:b&&L(H,b).some(t=>t.id===e.id)?"pointer":"default"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:e.name}),(0,d.jsxs)("span",{style:{color:"#94a3b8",fontSize:"0.9rem",marginLeft:"0.5rem"},children:["(",null===(t=e.character)||void 0===t?void 0:t.class,")"]})]}),(0,d.jsxs)("div",{style:{textAlign:"right"},children:[(0,d.jsxs)("div",{style:{color:e.currentHP<=.3*e.maxHP?"#ef4444":"#10b981"},children:["HP: ",e.currentHP,"/",e.maxHP]}),(0,d.jsxs)("div",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:["AC: ",e.armorClass]})]})]}),e.statusEffects.length>0&&(0,d.jsx)("div",{style:{marginTop:"0.5rem",display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:e.statusEffects.map((e,t)=>(0,d.jsxs)("span",{style:{background:e.color,color:"white",fontSize:"0.7rem",padding:"0.2rem 0.4rem",borderRadius:"3px"},children:[e.name," (",e.duration,"r)"]},t))}),e.concentrationSpell&&(0,d.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#a78bfa",fontStyle:"italic"},children:["Concentrating: ",e.concentrationSpell.name," (",e.concentrationSpell.duration,"r)"]})]},e.id)})})]}),(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1rem",border:"2px solid #dc2626"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 1rem",color:"#ef4444"},children:"\ud83d\udc79 Enemies"}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:m.filter(e=>"enemy"===e.type).map(e=>(0,d.jsxs)("div",{onClick:()=>b&&L(H,b).some(t=>t.id===e.id)&&W(e.id),style:{padding:"0.75rem",background:(null===H||void 0===H?void 0:H.id)===e.id?"rgba(239, 68, 68, 0.3)":"rgba(15, 23, 42, 0.8)",border:(null===H||void 0===H?void 0:H.id)===e.id?"2px solid #ef4444":b&&L(H,b).some(t=>t.id===e.id)?"2px solid #f59e0b":"1px solid #334155",borderRadius:"6px",cursor:b&&L(H,b).some(t=>t.id===e.id)?"pointer":"default",opacity:e.currentHP<=0?.5:1},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:e.name}),e.currentHP<=0&&(0,d.jsx)("span",{style:{color:"#6b7280",marginLeft:"0.5rem"},children:"\ud83d\udc80 Defeated"})]}),(0,d.jsxs)("div",{style:{textAlign:"right"},children:[(0,d.jsxs)("div",{style:{color:e.currentHP<=.3*e.maxHP?"#ef4444":"#10b981"},children:["HP: ",e.currentHP,"/",e.maxHP]}),(0,d.jsxs)("div",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:["AC: ",e.armorClass]})]})]}),e.enemy&&(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:"0.25rem"},children:e.enemy.description})]},e.id))})]}),(0,d.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"8px",padding:"1rem",border:"1px solid #334155"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 1rem",color:"#f1f5f9"},children:U?"\ud83c\udfb2 Your Actions":"\u23f3 Enemy Turn"}),U?(0,d.jsx)("div",{children:b?(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{style:{color:"#3b82f6"},children:["Selected: ",b.name]}),(0,d.jsx)("p",{style:{fontSize:"0.9rem",color:"#94a3b8",margin:"0.5rem 0"},children:b.description}),"self"!==b.target?(0,d.jsx)("p",{style:{color:"#f59e0b",fontSize:"0.9rem"},children:"Click a target to continue..."}):(0,d.jsx)("button",{onClick:()=>W(H.id),style:{padding:"0.75rem",background:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",width:"100%"},children:"Execute Action"}),(0,d.jsx)("button",{onClick:()=>v(null),style:{padding:"0.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",marginTop:"0.5rem"},children:"Cancel"})]}):(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:(e=>{const t=[{type:"attack",name:"Attack",description:"Make a basic weapon or unarmed attack",target:"enemy"},{type:"defend",name:"Defend",description:"Gain +2 AC until your next turn",target:"self"},{type:"move",name:"Move",description:"Change position or take cover",target:"self"}];if(e.character){const n=e.character;n.knownCantrips&&n.knownCantrips.length>0&&n.knownCantrips.forEach(e=>{const n=j.find(t=>t.name===e&&0===t.level);n&&t.push({type:"cast-cantrip",name:"Cast ".concat(n.name),description:n.description,target:M(n)})}),n.knownSpells&&n.knownSpells.length>0&&n.knownSpells.forEach(e=>{const n=j.find(t=>t.name===e&&t.level>0);n&&t.push({type:"cast-spell",name:"Cast ".concat(n.name),description:n.description,target:M(n)})})}return t})(H).map((e,t)=>(0,d.jsxs)("button",{onClick:()=>(e=>{v(e),w(null)})(e),style:{padding:"0.75rem",background:"#374151",color:"#f9fafb",border:"1px solid #6b7280",borderRadius:"6px",cursor:"pointer",textAlign:"left"},children:[(0,d.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:"#9ca3af"},children:e.description})]},t))})}):(0,d.jsx)("div",{style:{textAlign:"center",color:"#94a3b8"},children:(0,d.jsx)("p",{children:"Enemy is deciding their action..."})}),(0,d.jsxs)("div",{style:{marginTop:"1.5rem",padding:"0.75rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",maxHeight:"200px",overflowY:"auto",fontSize:"0.8rem",border:"1px solid #334155"},children:[(0,d.jsx)("h4",{style:{margin:"0 0 0.5rem",color:"#94a3b8"},children:"Battle Log"}),k.slice(-8).map((e,t)=>(0,d.jsx)("div",{style:{marginBottom:"0.25rem",color:"#d1d5db"},children:e},t))]})]})]})]})}function ve(e){let{encounter:t,playerCharacters:n,onEncounterEnd:r,onBack:a}=e;const[o,i]=(0,s.useState)("approaching"),[c,u]=(0,s.useState)(null),[p,f]=(0,s.useState)(""),[m,h]=(0,s.useState)(null),[g,y]=(0,s.useState)(""),b=()=>{const e=["Dense Forest","Rocky Outcrop","Misty Clearing","Ancient Ruins","Thorny Undergrowth","Crystal Cave","Moonlit Grove","Shadow-touched Hollow"];return e[Math.floor(Math.random()*e.length)]},v=e=>{switch(y(e),e){case"investigate":x();break;case"combat":w();break;case"flee":r("fled")}},x=()=>{i("investigating");let e="",n=null;switch(t.type){case"mystery":if("safe"!==t.danger&&"low"!==t.danger)return e="As you investigate, you trigger ancient defenses! The mystery guardians awaken...",void setTimeout(()=>w(),2e3);e="Your careful investigation reveals hidden secrets. You successfully solve the mystery without danger!",n={experience:150,gold:Math.floor(30*Math.random())+10,special:"Ancient Knowledge: +1 to your next spell attack roll"};break;case"treasure":e="You carefully examine the area and discover valuable treasures hidden from plain sight!",n={gold:Math.floor(100*Math.random())+50,items:["Magical Component Pouch","Healing Potion"],experience:100};break;case"event":e="You take time to properly assess the situation. Your wisdom grants you insight and safe passage.",n={experience:75,buff:"Well-Rested: +2 to all rolls for the next encounter"};break;case"quest":e="You gather information and clues about this quest. Your investigation reveals the best course of action.",n={experience:125,questProgress:"Gained valuable quest information"};break;default:if("safe"!==t.danger)return e="Your investigation alerts the hostile creatures! Prepare for battle!",void setTimeout(()=>w(),2e3);e="Your cautious approach pays off. You handle the situation peacefully.",n={experience:50}}f(e),h(n),setTimeout(()=>{i("resolved"),r("completed",n)},3e3)},w=()=>{const e=(e=>{const t={"Wild Beasts":{name:"Wild Wolf",hitPoints:11,maxHitPoints:11,armorClass:13,attack:4,damage:"2d4+2",abilities:["Pack Tactics"],description:"A fierce predator with sharp fangs"},Bandits:{name:"Bandit",hitPoints:15,maxHitPoints:15,armorClass:12,attack:3,damage:"1d6+1",abilities:["Sneak Attack"],description:"A desperate criminal looking for easy targets"},"Ancient Guardian":{name:"Stone Guardian",hitPoints:35,maxHitPoints:35,armorClass:17,attack:6,damage:"2d8+4",abilities:["Magic Resistance","Slam"],description:"An ancient construct awakened to defend sacred grounds"},"Lost Spirits":{name:"Wandering Spirit",hitPoints:22,maxHitPoints:22,armorClass:14,attack:5,damage:"2d6+3",abilities:["Ethereal","Life Drain"],description:"A tormented soul seeking peace or revenge"},"Corrupted Dryad":{name:"Twisted Dryad",hitPoints:30,maxHitPoints:30,armorClass:15,attack:7,damage:"1d8+4",abilities:["Nature Magic","Entangle","Barkskin"],description:"Once a protector of nature, now corrupted by dark magic"},"Thornbeast Pack":{name:"Thornbeast",hitPoints:18,maxHitPoints:18,armorClass:14,attack:5,damage:"1d8+3",abilities:["Thorned Hide","Pounce"],description:"A predator with living vines as armor"}};if("creature"!==e.type||"safe"===e.danger)return[];const n=t[e.name]||t["Wild Beasts"],r={safe:0,low:1,medium:2,high:3,extreme:4}[e.danger],a=[],o=Math.max(1,r);for(let i=0;i<o;i++)a.push(l(l({},n),{},{name:o>1?"".concat(n.name," ").concat(i+1):n.name,hitPoints:n.hitPoints+5*r,maxHitPoints:n.maxHitPoints+5*r,attack:n.attack+Math.floor(r/2),armorClass:n.armorClass+Math.floor(r/3)}));return a})(t);if(0===e.length)return f("There are no hostile creatures here. You approach safely."),h({experience:25}),void setTimeout(()=>{i("resolved"),r("completed",{experience:25})},2e3);const n={name:t.name,description:t.description,enemies:e,terrain:b()};u(n),i("combat")},k=(e,t)=>{"victory"===e?r("completed",t):r("defeat"===e?"failed":"fled")};return"combat"===o&&c?(0,d.jsx)(be,{playerCharacters:n,encounter:c,onBattleEnd:k,onBack:a}):(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"#f1f5f9",padding:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,d.jsxs)("div",{style:{maxWidth:"800px",background:"rgba(15, 23, 42, 0.8)",borderRadius:"12px",padding:"2rem",border:"2px solid ".concat(xe(t.danger)),textAlign:"center"},children:["approaching"===o&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h1",{style:{margin:"0 0 1rem",fontSize:"2.5rem",color:xe(t.danger)},children:[t.emoji," ",t.name]}),(0,d.jsx)("div",{style:{margin:"1rem 0",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",fontSize:"1.1rem",lineHeight:"1.6"},children:t.description}),(0,d.jsxs)("div",{style:{margin:"1rem 0",padding:"0.75rem",background:xe(t.danger)+"20",border:"1px solid ".concat(xe(t.danger)),borderRadius:"6px",fontSize:"1rem",fontWeight:"bold"},children:["Danger Level: ",t.danger.charAt(0).toUpperCase()+t.danger.slice(1)]}),(0,d.jsxs)("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,d.jsx)("button",{onClick:()=>v("investigate"),style:{padding:"1rem 2rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"bold"},children:"\ud83d\udd0d Investigate Carefully"}),(0,d.jsx)("button",{onClick:()=>v("combat"),style:{padding:"1rem 2rem",background:"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"bold"},children:"\u2694\ufe0f Attack Directly"}),(0,d.jsx)("button",{onClick:()=>v("flee"),style:{padding:"1rem 2rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1.1rem"},children:"\ud83c\udfc3 Avoid and Leave"})]}),a&&(0,d.jsx)("button",{onClick:a,style:{position:"absolute",top:"2rem",left:"2rem",padding:"0.75rem 1.5rem",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"\u2190 Back to Map"})]}),"investigating"===o&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{style:{color:"#3b82f6"},children:"\ud83d\udd0d Investigation in Progress..."}),(0,d.jsxs)("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",fontSize:"1.1rem"},children:[(0,d.jsxs)("p",{children:["You carefully examine the ",t.name.toLowerCase(),"..."]}),(0,d.jsx)("p",{children:"Your party moves with caution, using wisdom and experience to navigate the situation."}),(0,d.jsxs)("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("div",{style:{width:"20px",height:"20px",border:"3px solid #3b82f6",borderTop:"3px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,d.jsx)("span",{children:"Investigating..."})]})]})]}),"resolved"===o&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{style:{color:"#10b981"},children:"\u2705 Encounter Resolved"}),(0,d.jsx)("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",fontSize:"1.1rem",lineHeight:"1.6"},children:p}),m&&(0,d.jsxs)("div",{style:{margin:"1rem 0",padding:"1rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid #10b981",borderRadius:"8px"},children:[(0,d.jsx)("h3",{style:{color:"#10b981",margin:"0 0 1rem"},children:"\ud83c\udf81 Rewards Gained"}),m.experience&&(0,d.jsxs)("p",{children:["Experience: +",m.experience," XP"]}),m.gold&&(0,d.jsxs)("p",{children:["Gold: +",m.gold," coins"]}),m.items&&(0,d.jsxs)("p",{children:["Items: ",m.items.join(", ")]}),m.special&&(0,d.jsxs)("p",{style:{color:"#a78bfa"},children:["Special: ",m.special]}),m.buff&&(0,d.jsxs)("p",{style:{color:"#f59e0b"},children:["Buff: ",m.buff]}),m.questProgress&&(0,d.jsx)("p",{style:{color:"#3b82f6"},children:m.questProgress})]})]})]}),(0,d.jsx)("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})}function xe(e){switch(e){case"safe":return"#10b981";case"low":return"#f59e0b";case"medium":return"#f97316";case"high":return"#ef4444";case"extreme":return"#991b1b";default:return"#6b7280"}}function we(e){let{seedStr:t="verdance-seed-001",onBack:n}=e;const[r,a]=(0,s.useState)({x:0,y:0}),[o,i]=(0,s.useState)(null),[l,c]=(0,s.useState)({x:-7,y:-7}),[u,p]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)([]);(0,s.useEffect)(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-saved-characters")||"[]");b(e.slice(0,4))}catch(e){console.error("Error loading saved characters:",e),b([{name:"Adventurer",class:"Fighter",baseStats:{strength:15,constitution:14,wisdom:12,intelligence:10,dexterity:13,charisma:11},finalStats:{strength:15,constitution:14,wisdom:12,intelligence:10,dexterity:13,charisma:11},hitPoints:20,level:1,knownSpells:[],knownCantrips:[]}])}},[]);const v=15,x=(e,t,n)=>{const r="".concat(n,"-").concat(e,"-").concat(t);let a=0;for(let o=0;o<r.length;o++){a=(a<<5)-a+r.charCodeAt(o),a&=a}return Math.abs(a)/2147483647},w=(e,n)=>{const r=[{name:"Ocean",color:"#0ea5e9",emoji:"\ud83c\udf0a"},{name:"Coast",color:"#38bdf8",emoji:"\ud83c\udfd6\ufe0f"},{name:"Desert",color:"#eab308",emoji:"\ud83c\udfdc\ufe0f"},{name:"Grass",color:"#84cc16",emoji:"\ud83c\udf31"},{name:"Forest",color:"#16a34a",emoji:"\ud83c\udf32"},{name:"Mountain",color:"#64748b",emoji:"\u26f0\ufe0f"},{name:"Swamp",color:"#10b981",emoji:"\ud83e\udeb5"},{name:"Jungle",color:"#065f46",emoji:"\ud83c\udf34"},{name:"Taiga",color:"#0e7490",emoji:"\ud83c\udf32"},{name:"Tundra",color:"#94a3b8",emoji:"\ud83e\uddca"},{name:"Savanna",color:"#f59e0b",emoji:"\ud83c\udf3e"},{name:"Snow",color:"#e2e8f0",emoji:"\u2744\ufe0f"}],a=2*x(e,n,t+"n1")-1,o=2*x(Math.floor(.5*e),Math.floor(.5*n),t+"n2")-1,i=1.5*(a+.5*o),l=Math.sqrt(e*e+n*n)+i,s=n+2*i;if(l>25)return r[0];if(l>22)return r[1];if(s<-15)return l>12?r[9]:r[11];if(s>15)return Math.abs(e+3*a)>8?r[2]:r[7];if(x(Math.floor(.3*e),Math.floor(.3*n),t+"mtn")>.7||Math.abs(e+2*o)>18)return r[5];if(Math.abs(s)<5){if(Math.abs(e+a)<3)return r[3];if(Math.abs(e)<12)return r[4]}return s>5&&s<15?e+2*o>0?r[10]:r[6]:s<-5&&s>-15?r[8]:r[3]},k={roads:[{from:{x:0,y:0},to:{x:-5,y:0},name:"West Road"},{from:{x:-5,y:0},to:{x:-5,y:3},name:"Shadow Road"},{from:{x:0,y:0},to:{x:4,y:0},name:"East Road"},{from:{x:4,y:0},to:{x:4,y:-2},name:"Bright Way"},{from:{x:0,y:0},to:{x:0,y:-6},name:"South Road"},{from:{x:0,y:-6},to:{x:-2,y:-6},name:"Thorn Path"},{from:{x:-5,y:3},to:{x:-8,y:3},name:"Umbral Trail"},{from:{x:-8,y:3},to:{x:-8,y:-1},name:"Umbral Trail"},{from:{x:4,y:-2},to:{x:6,y:-2},name:"Brook Trail"},{from:{x:6,y:-2},to:{x:6,y:5},name:"Brook Trail"},{from:{x:0,y:0},to:{x:0,y:7},name:"Pilgrimage Path"},{from:{x:0,y:7},to:{x:3,y:7},name:"Pilgrimage Path"},{from:{x:-2,y:-6},to:{x:4,y:-6},name:"Merchant's Route"},{from:{x:4,y:-6},to:{x:4,y:-2},name:"Merchant's Route"}],settlements:[{x:0,y:0,type:"city",name:"Rootspire",population:12e3,faction:"The Rootspeakers",description:"The great tree-city where ancient roots form living architecture. Center of Verdance civilization.",emoji:"\ud83c\udff0",services:["Market","Inn","Temple","Guild Hall","Library"]},{x:-5,y:3,type:"town",name:"Shadowvale",population:2500,faction:"Hollowshade Clan",description:"A town built within the hollow of a massive dead tree, shrouded in perpetual twilight.",emoji:"\ud83c\udfd8\ufe0f",services:["Market","Inn","Shadow Temple"]},{x:4,y:-2,type:"town",name:"Brightmeadow",population:3200,faction:"Valebright Court",description:"A gleaming settlement of crystal greenhouses and manicured gardens.",emoji:"\ud83c\udfd8\ufe0f",services:["Market","Inn","Temple","Botanical Gardens"]},{x:-2,y:-6,type:"village",name:"Thornwall",population:450,faction:"Thornweave Syndicate",description:"A fortified trading post surrounded by massive thorn barriers.",emoji:"\ud83c\udfe1",services:["Trading Post","Armory"]},{x:6,y:5,type:"village",name:"Mistbrook",population:280,faction:"The Rootspeakers",description:"A peaceful fishing village by a spirit-touched stream.",emoji:"\ud83c\udfe1",services:["Inn","Shrine"]},{x:-8,y:-1,type:"outpost",name:"Umbral Watch",population:45,faction:"Hollowshade Clan",description:"A remote watchtower monitoring the deep shadow forests.",emoji:"\u2694\ufe0f",services:["Armory","Supplies"]},{x:3,y:7,type:"shrine",name:"Grove of First Growth",population:12,faction:"The Rootspeakers",description:"The sacred site where the first spirit plant bloomed.",emoji:"\ud83c\udf33",services:["Sacred Grove","Pilgrimage"]}],roadEncounters:[{x:-2,y:1,type:"faction",name:"Rootspeaker Patrol",description:"Friendly guards ensuring safe passage along the main roads.",emoji:"\ud83d\udee1\ufe0f",danger:"safe"},{x:2,y:-1,type:"faction",name:"Traveling Merchants",description:"A caravan of traders with goods from distant settlements.",emoji:"\ud83c\udf92",danger:"safe"},{x:-3,y:2,type:"event",name:"Road Shrine",description:"A small wayside shrine where travelers leave offerings.",emoji:"\u26e9\ufe0f",danger:"safe"},{x:1,y:-3,type:"faction",name:"Courier Station",description:"A rest stop where messages are exchanged between settlements.",emoji:"\ud83d\udceb",danger:"safe"}],wildernessEncounters:[{x:1,y:2,type:"mystery",name:"The Whispering Oak",description:"An ancient oak that speaks in riddles about the old times. Its advice is cryptic but valuable.",emoji:"\ud83c\udf32",danger:"medium"},{x:2,y:-4,type:"creature",name:"Luminous Stag",description:"A magnificent deer whose antlers glow with spirit energy. A good omen if encountered.",emoji:"\ud83e\udd8c",danger:"safe"},{x:-6,y:1,type:"mystery",name:"Shadow Hollow",description:"A clearing where shadows move independently. Hollowshade Clan secrets lie hidden here.",emoji:"\ud83d\udd73\ufe0f",danger:"high"},{x:5,y:0,type:"treasure",name:"Blooming Crystal",description:"A rare crystal formation that enhances plant growth. Valuable to all factions.",emoji:"\ud83d\udc8e",danger:"medium"},{x:0,y:-5,type:"creature",name:"Thornbeast Pack",description:"Predators covered in living vines. They guard ancient Syndicate territories.",emoji:"\ud83d\udc3a",danger:"extreme"},{x:-4,y:4,type:"event",name:"Spirit Plant Grove",description:"A grove where spirit plants pulse in harmony. Their light reveals hidden truths.",emoji:"\u2728",danger:"low"},{x:7,y:-3,type:"mystery",name:"Abandoned Greenhouse",description:"A ruined Valebright facility overgrown with wild plants. What experiments happened here?",emoji:"\ud83c\udfda\ufe0f",danger:"high"},{x:-1,y:6,type:"creature",name:"Ancient Treant",description:"An old tree-guardian that has awakened from its slumber. Unpredictable.",emoji:"\ud83c\udf33",danger:"extreme"},{x:4,y:4,type:"creature",name:"Will-o-Wisp Cluster",description:"Dancing lights that lead travelers astray... or to hidden treasures.",emoji:"\ud83d\udca1",danger:"medium"},{x:-7,y:-3,type:"creature",name:"Corrupted Dryad",description:"A nature spirit twisted by dark magic. Extremely hostile to all travelers.",emoji:"\ud83e\uddda\u200d\u2640\ufe0f",danger:"extreme"}]},S=(e,t)=>k.roads.some(n=>{const{from:r,to:a}=n;if(r.x===a.x){const n=Math.min(r.y,a.y),o=Math.max(r.y,a.y);return e===r.x&&t>=n&&t<=o}if(r.y===a.y){const n=Math.min(r.x,a.x),o=Math.max(r.x,a.x);return t===r.y&&e>=n&&e<=o}return!1}),j=(e,t)=>{const n=k.roads.find(n=>{const{from:r,to:a}=n;if(r.x===a.x){const n=Math.min(r.y,a.y),o=Math.max(r.y,a.y);return e===r.x&&t>=n&&t<=o}if(r.y===a.y){const n=Math.min(r.x,a.x),o=Math.max(r.x,a.x);return t===r.y&&e>=n&&e<=o}return!1});return n?n.name:null},C=(e,n)=>{if("Ocean"===w(e,n).name)return null;if(!new ue("".concat(t,"-settlement-check-").concat(e,"-").concat(n,"-").concat(Math.abs(e*n))).chance(.03))return null;const r=new ge(t,e,n).generate();return{type:r.type,name:r.name,population:r.population,description:r.description,emoji:{city:"\ud83c\udff0",town:"\ud83c\udfd8\ufe0f",village:"\ud83c\udfe1",outpost:"\u26fa",trading_post:"\ud83c\udfea"}[r.type]||"\ud83c\udfd8\ufe0f",services:r.services,npcs:r.npcs}},T=(e,n)=>{if(C(e,n))return null;if("Ocean"===w(e,n).name){return new ue("".concat(t,"-ocean-encounter-").concat(e,"-").concat(n,"-").concat(Math.abs(e+3*n))).chance(.002)?R(e,n):null}const r=new ue("".concat(t,"-encounter-check-").concat(e,"-").concat(n,"-").concat(Math.abs(e+3*n)));return S(e,n)?r.chance(.015)?E(e,n):null:r.chance(.03)?P(e,n):null},E=(e,n)=>{const r=new ue("".concat(t,"-road-encounter-").concat(e,"-").concat(n)),a=r.pick(["quest","mystery","creature","event"]);if("quest"===a){const r=new ye(t,e,n).generate();return{type:"quest",name:r.title,description:r.description,emoji:"\ud83d\udcdc",danger:"safe",quest:r}}if("mystery"===a){const e=["Ancient Riddle Stone","Cryptic Map Fragment","Puzzle Box","Mysterious Inscription","Locked Chest with Riddle","Weathered Treasure Map"],t=r.pick(e);return{type:"mystery",name:t,description:"You find a ".concat(t.toLowerCase(),". It seems to hold secrets, but requires wit to unlock."),emoji:"\ufffd\ufe0f",danger:"safe"}}if("creature"===a){const e=["Traveling Merchant","Lost Pilgrim","Wandering Minstrel","Road Patrol"],t=["safe","safe","safe","low"],n=r.nextInt(0,e.length);return{type:"creature",name:e[n],description:"You encounter a ".concat(e[n].toLowerCase()," on the road."),emoji:"\ud83d\udc64",danger:t[n]}}{const e=["Bridge Out","Caravan Rest","Crossroads Marker","Old Shrine"],t=r.pick(e);return{type:"event",name:t,description:"You come across: ".concat(t),emoji:"\ud83d\udee4\ufe0f",danger:"safe"}}},P=(e,n)=>{const r=new ue("".concat(t,"-wild-encounter-").concat(e,"-").concat(n)),a=r.pick(["creature","mystery","quest"]);if("quest"===a){const a=new ye(t,e,n).generate();return{type:"quest",name:a.title,description:a.description,emoji:"\u2694\ufe0f",danger:r.pick(["medium","high","extreme"]),quest:a}}if("creature"===a){const e=["Wild Beasts","Bandits","Mysterious Figure","Ancient Guardian","Lost Spirits"],t=["medium","high","medium","extreme","high"],n=r.nextInt(0,e.length);return{type:"creature",name:e[n],description:"Dangerous encounter: ".concat(e[n]),emoji:"\ud83d\udc3a",danger:t[n]}}{const e=["Ancient Temple with Sealed Door","Ruined Observatory with Star Puzzle","Forgotten Shrine with Symbol Lock","Crystal Cave with Harmonic Puzzle","Stone Circle with Elemental Trial","Buried Vault with Riddle Guardian"],t=r.pick(e);return{type:"mystery",name:t,description:"You discover a ".concat(t.toLowerCase(),". Ancient magic protects its secrets - only the clever may claim its treasures."),emoji:"\ud83c\udfdb\ufe0f",danger:r.pick(["medium","high"])}}},R=(e,n)=>{const r=new ue("".concat(t,"-maritime-encounter-").concat(e,"-").concat(n)),a=r.pick(["creature","mystery","event"]);if("creature"===a){const e=["Sea Serpent","Merchant Ship","Pirate Vessel","Whale Pod","Mysterious Fog"],t=["extreme","safe","high","safe","medium"],n=r.nextInt(0,e.length);return{type:"creature",name:e[n],description:"Maritime encounter: ".concat(e[n]),emoji:"\ud83d\udea2",danger:t[n]}}if("mystery"===a){const e=["Siren's Song Echo","Ancient Sea Chart Fragment","Mysterious Island Mirage","Floating Witch's Bottle","Ghostly Ship Sighting"],t=r.pick(e);return{type:"mystery",name:t,description:"A rare oceanic phenomenon: ".concat(t,". The sea holds its secrets well."),emoji:"\ud83d\udd31",danger:r.pick(["safe","low"])}}{const e=["Storm Clouds","Calm Waters","Dolphin Pod","Seabird Flock","Coral Reef"],t=r.pick(e);return{type:"event",name:t,description:"The ocean shows: ".concat(t),emoji:"\ud83c\udf0a",danger:"safe"}}},N=(e,t)=>{if(g(!1),p(null),"completed"===e&&t){let e="\u2705 Encounter completed successfully!\n\n";t.experience&&(e+="Experience gained: ".concat(t.experience," XP\n")),t.gold&&(e+="Gold found: ".concat(t.gold," coins\n")),t.items&&(e+="Items found: ".concat(t.items.join(", "),"\n")),t.special&&(e+="Special reward: ".concat(t.special,"\n")),t.buff&&(e+="Temporary effect: ".concat(t.buff,"\n")),t.questProgress&&(e+="Quest progress: ".concat(t.questProgress,"\n")),alert(e)}else"fled"===e?alert("\ud83c\udfc3 Your party fled from the encounter safely."):"failed"===e&&alert("\ud83d\udc80 The encounter ended badly for your party...")};(0,s.useEffect)(()=>{const e=e=>{let t=r.x,n=r.y;switch(e.key.toLowerCase()){case"w":case"arrowup":n-=1;break;case"s":case"arrowdown":n+=1;break;case"a":case"arrowleft":t-=1;break;case"d":case"arrowright":t+=1;break;default:return}e.preventDefault(),a({x:t,y:n});const o=Math.floor(7.5);c({x:t-o,y:n-o})};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,v]);const M=(()=>{const e=[];for(let t=0;t<v;t++){const n=[];for(let e=0;e<v;e++){const a=l.x+e,o=l.y+t,i=a===r.x&&o===r.y,s=w(a,o),c=C(a,o),d=c?null:T(a,o);n.push({x:a,y:o,biome:s,settlement:c,encounter:d,isPlayer:i})}e.push(n)}return e})(),L=e=>{switch(e){case"safe":return"#10b981";case"low":return"#f59e0b";case"medium":return"#f97316";case"high":return"#ef4444";case"extreme":return"#991b1b";default:return"#6b7280"}};return h&&u&&y.length>0?(0,d.jsx)(ve,{encounter:u,playerCharacters:y,onEncounterEnd:N,onBack:()=>g(!1)}):(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",padding:"20px"},children:[(0,d.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[(0,d.jsx)("h1",{children:"The Verdance \u2014 Campaign Map"}),(0,d.jsxs)("p",{children:["Position: ",r.x,", ",r.y," | Current: ",w(r.x,r.y).name]}),(0,d.jsx)("p",{style:{fontSize:"14px",color:"#94a3b8"},children:"Use WASD or arrow keys to explore \u2022 Click tiles for encounters"}),(0,d.jsx)("button",{onClick:()=>a({x:0,y:0}),style:{padding:"6px 12px",background:"#1e40af",color:"#f9fafb",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"8px",marginRight:"10px",fontSize:"12px"},children:"\ud83d\udccd Return to Origin (0,0)"}),n&&(0,d.jsx)("button",{onClick:n,style:{padding:"8px 16px",background:"#059669",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer",marginTop:"10px"},children:"\u2190 Back to Menu"})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(v,", 24px)"),gap:"1px",padding:"16px",background:"#1e293b",borderRadius:"12px",margin:"0 auto",width:"fit-content"},children:M.flat().map(e=>{let{x:t,y:n,biome:r,settlement:a,encounter:l,isPlayer:s}=e;const c=(null===o||void 0===o?void 0:o.x)===t&&(null===o||void 0===o?void 0:o.y)===n,u=S(t,n);return(0,d.jsxs)("div",{onClick:()=>((e,t)=>{i({x:e,y:t});const n=C(e,t),r=n?null:T(e,t);n?(m(n),p(null)):r?(p(r),m(null)):(m(null),p(null))})(t,n),title:"".concat(r.name," (").concat(t,", ").concat(n,")").concat(s?" - You are here!":"").concat(u?" - On ".concat(j(t,n)):"").concat(a?" - ".concat(a.name):"").concat(l?" - ".concat(l.name):""),style:{width:"24px",height:"24px",background:r.color,border:c?"2px solid #fff":s?"2px solid #ffd93d":a?"2px solid #8b5cf6":l?"2px solid ".concat(L(l.danger)):u?"2px solid #D2691E":"1px solid rgba(0,0,0,0.2)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",borderRadius:"2px",position:"relative",boxShadow:s?"inset 0 0 12px rgba(255, 107, 107, 0.4)":a?"inset 0 0 8px rgba(139, 92, 246, 0.3)":l?"inset 0 0 8px ".concat(L(l.danger),"40"):u?"inset 0 0 6px rgba(210, 105, 30, 0.3)":"none"},children:[s?"\ud83d\udc64":a?a.emoji:l?l.emoji:r.emoji," "]},"".concat(t,",").concat(n))})}),f&&(0,d.jsxs)("div",{style:{textAlign:"center",marginTop:"20px",padding:"16px",background:"#1e293b",borderRadius:"12px",maxWidth:"500px",margin:"20px auto"},children:[(0,d.jsxs)("h3",{style:{margin:"0 0 10px 0",color:"#8b5cf6"},children:[f.emoji," ",f.name]}),(0,d.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px",color:"#94a3b8"},children:[f.type.charAt(0).toUpperCase()+f.type.slice(1)," \u2022 Population: ",f.population.toLocaleString()]}),(0,d.jsx)("p",{style:{margin:"10px 0",color:"#d1d5db"},children:f.description}),(0,d.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,d.jsx)("strong",{children:"Controlled by:"})," ",f.faction]}),f.services&&f.services.length>0&&(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,d.jsx)("p",{style:{fontSize:"14px",margin:"5px 0"},children:(0,d.jsx)("strong",{children:"Services:"})}),(0,d.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"8px",flexWrap:"wrap"},children:f.services.map(e=>(0,d.jsx)("span",{style:{background:"#374151",padding:"2px 8px",borderRadius:"4px",fontSize:"12px"},children:e},e))})]}),(0,d.jsxs)("div",{style:{marginTop:"15px",display:"flex",gap:"10px",justifyContent:"center"},children:[(0,d.jsx)("button",{onClick:()=>alert("Entering ".concat(f.name,"... (Campaign features coming soon!)")),style:{padding:"8px 16px",background:"#8b5cf6",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Enter Settlement"}),(0,d.jsx)("button",{onClick:()=>{a({x:o.x,y:o.y});const e=Math.floor(7.5);c({x:o.x-e,y:o.y-e})},style:{padding:"6px 12px",background:"#374151",color:"#9ca3af",border:"1px solid #6b7280",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Developer tool - breaks immersion",children:"[DEV] Fast Travel"})]})]}),u&&(0,d.jsxs)("div",{style:{textAlign:"center",marginTop:"20px",padding:"16px",background:"#1e293b",borderRadius:"12px",maxWidth:"500px",margin:"20px auto",border:"2px solid ".concat(L(u.danger))},children:[(0,d.jsxs)("h3",{style:{margin:"0 0 10px 0",color:L(u.danger)},children:[u.emoji," ",u.name]}),(0,d.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px",color:"#94a3b8"},children:[u.type.charAt(0).toUpperCase()+u.type.slice(1)," \u2022 Danger: ",(0,d.jsx)("span",{style:{color:L(u.danger)},children:u.danger.charAt(0).toUpperCase()+u.danger.slice(1)})]}),(0,d.jsx)("p",{style:{margin:"10px 0",color:"#d1d5db"},children:u.description}),(0,d.jsxs)("div",{style:{marginTop:"15px",display:"flex",gap:"10px",justifyContent:"center"},children:[(0,d.jsx)("button",{onClick:()=>(p(u),void g(!0)),style:{padding:"8px 16px",background:L(u.danger),color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Investigate"}),(0,d.jsx)("button",{onClick:()=>{a({x:o.x,y:o.y});const e=Math.floor(7.5);c({x:o.x-e,y:o.y-e})},style:{padding:"6px 12px",background:"#374151",color:"#9ca3af",border:"1px solid #6b7280",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Developer tool - breaks immersion",children:"[DEV] Fast Travel"})]})]}),o&&!f&&!u&&(0,d.jsxs)("div",{style:{textAlign:"center",marginTop:"20px",padding:"16px",background:"#1e293b",borderRadius:"12px",maxWidth:"400px",margin:"20px auto"},children:[(0,d.jsx)("h3",{style:{margin:"0 0 10px 0"},children:"Selected Location"}),(0,d.jsxs)("p",{children:["Biome: ",w(o.x,o.y).name," ",w(o.x,o.y).emoji]}),(0,d.jsxs)("p",{children:["Coordinates: ",o.x,", ",o.y]}),(0,d.jsx)("button",{onClick:()=>{a(o);const e=Math.floor(7.5);c({x:o.x-e,y:o.y-e})},style:{padding:"6px 12px",background:"#374151",color:"#9ca3af",border:"1px solid #6b7280",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Developer tool - use WASD to explore naturally",children:"[DEV] Fast Travel Here"})]}),(0,d.jsxs)("div",{style:{textAlign:"center",marginTop:"30px",fontSize:"14px",color:"#94a3b8"},children:[(0,d.jsx)("p",{children:"\ud83c\udff0 Purple borders = Settlements \u2022 \ud83c\udfb2 Colored borders = Encounters \u2022 \ufffd Orange borders = Roads"}),(0,d.jsxs)("p",{children:["\ud83d\udee1\ufe0f ",(0,d.jsx)("strong",{children:"Stay on roads for safety"})," - scripted encounters, friendly patrols"]}),(0,d.jsxs)("p",{children:["\u2694\ufe0f ",(0,d.jsx)("strong",{children:"Venture into wilderness"})," - dangerous creatures, valuable treasures"]}),(0,d.jsx)("p",{children:"The spirit plants of Verdance pulse with life across this realm. Choose your path wisely."}),(0,d.jsxs)("p",{style:{fontSize:"12px",marginTop:"10px"},children:["Seed: ",t]})]})]})}class ke{constructor(e){this.seed=void 0,this.seed=ke.hash(e)}static hash(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}next(){let e=this.seed+2654435769;return e^=e<<13,e^=e>>>17,e^=e<<5,this.seed=e>>>0,(this.seed>>>0)/4294967296}int(e,t){return Math.floor(this.next()*(t-e+1))+e}pick(e){return e[this.int(0,e.length-1)]}}const Se={Rootspeakers:{primary:"#84cc16",secondary:"#16a34a",metal:"#8b8b8b",leather:"#6b4f29",cloth:"#e2e8f0",accent:"#22c55e"},Thornweave:{primary:"#14532d",secondary:"#4d7c0f",metal:"#9ca3af",leather:"#5b4322",cloth:"#0f172a",accent:"#84cc16"},Valebright:{primary:"#f59e0b",secondary:"#fef3c7",metal:"#cbd5e1",leather:"#7c3e00",cloth:"#fafaf9",accent:"#eab308"},Skyvault:{primary:"#38bdf8",secondary:"#0ea5e9",metal:"#94a3b8",leather:"#334155",cloth:"#e2f2ff",accent:"#7dd3fc"},Ashenreach:{primary:"#9ca3af",secondary:"#374151",metal:"#d1d5db",leather:"#4b5563",cloth:"#111827",accent:"#f87171"}},je={Human:{slim:{scale:.95,shoulder:36,waist:24},standard:{scale:1,shoulder:40,waist:28},heavy:{scale:1.05,shoulder:46,waist:36}},Draken:{slim:{scale:1,shoulder:42,waist:26},standard:{scale:1.06,shoulder:48,waist:32},heavy:{scale:1.12,shoulder:56,waist:40}},Elf:{slim:{scale:.96,shoulder:38,waist:22},standard:{scale:1,shoulder:40,waist:26},heavy:{scale:1.04,shoulder:44,waist:30}},Dwarf:{slim:{scale:.9,shoulder:46,waist:34},standard:{scale:.95,shoulder:50,waist:38},heavy:{scale:1,shoulder:56,waist:44}},Orc:{slim:{scale:1,shoulder:44,waist:30},standard:{scale:1.06,shoulder:50,waist:36},heavy:{scale:1.12,shoulder:58,waist:44}},Halfling:{slim:{scale:.8,shoulder:30,waist:22},standard:{scale:.85,shoulder:32,waist:24},heavy:{scale:.9,shoulder:36,waist:30}},Automaton:{slim:{scale:1,shoulder:44,waist:26},standard:{scale:1.04,shoulder:48,waist:30},heavy:{scale:1.08,shoulder:54,waist:36}},Fae:{slim:{scale:.9,shoulder:32,waist:20},standard:{scale:.94,shoulder:34,waist:22},heavy:{scale:.98,shoulder:36,waist:24}}};function Ce(e,t,n,r,a,o,i){const l=n/2,s=r/2,c=t-a/2+36,u=t+a/2-20,p="M ".concat(e-l," ").concat(c," Q ").concat(e," ").concat(c-14," ").concat(e+l," ").concat(c," L ").concat(e+s," ").concat(u," Q ").concat(e," ").concat(u+10," ").concat(e-s," ").concat(u," Z");return(0,d.jsx)("path",{d:p,fill:o,stroke:i,strokeWidth:2})}function Te(e,t,n,r,a){switch(e){case"Mage":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-8," L ").concat(n+a/2," ").concat(r-8," L ").concat(n+a/3," ").concat(r+74," L ").concat(n-a/3," ").concat(r+74," Z"),fill:t.cloth,stroke:t.accent,strokeWidth:2}),(0,d.jsx)("rect",{x:n+a/2+8,y:r-38,width:6,height:140,fill:t.metal}),(0,d.jsx)("circle",{cx:n+a/2+11,cy:r-46,r:10,fill:t.primary})]});case"Elementalist":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-10," L ").concat(n+a/2," ").concat(r-10," L ").concat(n+a/3," ").concat(r+78," L ").concat(n-a/3," ").concat(r+78," Z"),fill:t.secondary,opacity:.35}),(0,d.jsx)("circle",{cx:n,cy:r,r:16,fill:t.primary,opacity:.4}),(0,d.jsx)("circle",{cx:n,cy:r,r:10,fill:t.accent,opacity:.6})]});case"Warrior":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," Q ").concat(n," ").concat(r-22," ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/2-8," ").concat(r+20," L ").concat(n-a/2+8," ").concat(r+20," Z"),fill:t.metal,stroke:"#111827",strokeWidth:2}),(0,d.jsx)("ellipse",{cx:n-a/2,cy:r-8,rx:14,ry:10,fill:t.metal}),(0,d.jsx)("ellipse",{cx:n+a/2,cy:r-8,rx:14,ry:10,fill:t.metal}),(0,d.jsx)("rect",{x:n-a/2-18,y:r+4,width:8,height:80,fill:t.metal}),(0,d.jsx)("circle",{cx:n+a/2+18,cy:r+20,r:18,fill:t.metal,stroke:"#111827"})]});case"Ranger":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-4," L ").concat(n+a/2," ").concat(r-4," L ").concat(n+a/3," ").concat(r+70," L ").concat(n-a/3," ").concat(r+70," Z"),fill:t.leather,stroke:t.metal,strokeWidth:2}),(0,d.jsx)("path",{d:"M ".concat(n-12," ").concat(r-2," L ").concat(n+12," ").concat(r+40),stroke:t.metal,strokeWidth:2}),(0,d.jsx)("path",{d:"M ".concat(n-12," ").concat(r-2," L ").concat(n-30," ").concat(r+18),stroke:t.metal,strokeWidth:2})]});case"Rogue":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," L ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/3," ").concat(r+68," L ").concat(n-a/3," ").concat(r+68," Z"),fill:t.cloth}),(0,d.jsx)("rect",{x:n-a/2-10,y:r+6,width:6,height:40,fill:t.metal}),(0,d.jsx)("rect",{x:n+a/2+4,y:r+6,width:6,height:40,fill:t.metal})]});case"Cleric":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-8," L ").concat(n+a/2," ").concat(r-8," L ").concat(n+a/3," ").concat(r+76," L ").concat(n-a/3," ").concat(r+76," Z"),fill:t.cloth,stroke:t.accent,strokeWidth:2}),(0,d.jsx)("path",{d:"M ".concat(n," ").concat(r-20," l -8 16 l 16 0 Z"),fill:t.accent}),(0,d.jsx)("rect",{x:n+a/2+10,y:r-30,width:6,height:120,fill:t.metal})]});case"Paladin":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," Q ").concat(n," ").concat(r-24," ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/2-10," ").concat(r+22," L ").concat(n-a/2+10," ").concat(r+22," Z"),fill:t.metal,stroke:t.accent,strokeWidth:2}),(0,d.jsx)("rect",{x:n-4,y:r-16,width:8,height:50,fill:t.accent})]});case"Bard":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-8," L ").concat(n+a/2," ").concat(r-8," L ").concat(n+a/3," ").concat(r+72," L ").concat(n-a/3," ").concat(r+72," Z"),fill:t.cloth}),(0,d.jsx)("path",{d:"M ".concat(n-6," ").concat(r+6," q 10 12 18 0"),stroke:t.accent,strokeWidth:4})]});case"Necromancer":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-10," L ").concat(n+a/2," ").concat(r-10," L ").concat(n+a/3," ").concat(r+78," L ").concat(n-a/3," ").concat(r+78," Z"),fill:"#111827",stroke:t.metal,strokeWidth:2}),(0,d.jsx)("circle",{cx:n,cy:r-4,r:10,fill:t.accent,opacity:.4})]});case"Alchemist":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," L ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/3," ").concat(r+68," L ").concat(n-a/3," ").concat(r+68," Z"),fill:t.cloth}),(0,d.jsx)("circle",{cx:n-a/2-8,cy:r+6,r:6,fill:t.accent}),(0,d.jsx)("circle",{cx:n-a/2-22,cy:r+10,r:4,fill:t.primary})]});case"Greenwarden":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," Q ").concat(n-12," ").concat(r+10," ").concat(n," ").concat(r+4," Q ").concat(n+12," ").concat(r-10," ").concat(n+a/2," ").concat(r-6),fill:"none",stroke:t.primary,strokeWidth:6,strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M ".concat(n-a/4," ").concat(r+12," Q ").concat(n," ").concat(r+28," ").concat(n+a/4," ").concat(r+12),fill:"none",stroke:t.secondary,strokeWidth:5,strokeLinecap:"round"}),(0,d.jsx)("rect",{x:n+a/2+8,y:r-28,width:6,height:130,fill:t.leather}),(0,d.jsx)("circle",{cx:n+a/2+11,cy:r-34,r:9,fill:t.primary})]});case"Thorn Knight":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-8," Q ").concat(n," ").concat(r-26," ").concat(n+a/2," ").concat(r-8," L ").concat(n+a/2-8," ").concat(r+22," L ").concat(n-a/2+8," ").concat(r+22," Z"),fill:t.metal,stroke:t.secondary,strokeWidth:2}),(0,d.jsx)("path",{d:"M ".concat(n-a/2+4," ").concat(r-4," q 12 10 22 0"),stroke:t.primary,strokeWidth:6})]});case"Sapling Adept":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-10," L ").concat(n+a/2," ").concat(r-10," L ").concat(n+a/3," ").concat(r+74," L ").concat(n-a/3," ").concat(r+74," Z"),fill:t.cloth}),(0,d.jsx)("circle",{cx:n,cy:r+6,r:8,fill:t.primary})]});case"Bloomcaller":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," L ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/3," ").concat(r+70," L ").concat(n-a/3," ").concat(r+70," Z"),fill:t.cloth}),(0,d.jsx)("path",{d:"M ".concat(n-12," ").concat(r," q 12 -16 24 0"),stroke:t.accent,strokeWidth:4})]});case"Stormsinger":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-8," L ").concat(n+a/2," ").concat(r-8," L ").concat(n+a/3," ").concat(r+76," L ").concat(n-a/3," ").concat(r+76," Z"),fill:t.secondary,opacity:.3}),(0,d.jsx)("path",{d:"M ".concat(n-18," ").concat(r-4," q 18 -20 36 0"),stroke:t.primary,strokeWidth:4})]});case"Shadowblade":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," L ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/3," ").concat(r+68," L ").concat(n-a/3," ").concat(r+68," Z"),fill:"#0b1220"}),(0,d.jsx)("rect",{x:n-a/2-10,y:r+6,width:6,height:40,fill:t.metal})]});case"Skyspear":return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(n-a/2," ").concat(r-6," L ").concat(n+a/2," ").concat(r-6," L ").concat(n+a/3," ").concat(r+74," L ").concat(n-a/3," ").concat(r+74," Z"),fill:t.cloth}),(0,d.jsx)("rect",{x:n+a/2+12,y:r-46,width:6,height:150,fill:t.metal}),(0,d.jsx)("path",{d:"M ".concat(n+a/2+15," ").concat(r-50," l 0 -16 l 6 8 Z"),fill:t.primary})]})}}function Ee(e,t,n,r,a,o){const i=["#f1d3b8","#e6b999","#cfa07b","#a7775a","#7a4f34"],l="Human"===e?t.pick(i):"Draken"===e?t.pick(["#7cc4a3","#7fb6d9","#a09bd6","#cfa07b"]):"Dwarf"===e?t.pick(["#e5c29f","#c9986c","#8e5b3c"]):t.pick(i),s=t.pick(["#0f172a","#1f2937","#b45309","#6b21a8","#a16207","#9ca3af"]),c=t.pick(["#4b5563","#1f2937","#6b7280"]),u=l,p=[];return p.push(function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return(0,d.jsx)("circle",{cx:e,cy:t,r:n,fill:r,stroke:a,strokeWidth:o})}(n,r,a,l,"#111827",2)),"Elf"===e&&p.push(function(e,t,n,r){return(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M ".concat(e-n-6," ").concat(t-6," L ").concat(e-n-28," ").concat(t-12," L ").concat(e-n-6," ").concat(t+4," Z"),fill:r}),(0,d.jsx)("path",{d:"M ".concat(e+n+6," ").concat(t-6," L ").concat(e+n+28," ").concat(t-12," L ").concat(e+n+6," ").concat(t+4," Z"),fill:r})]})}(n,r,a,u)),"Dwarf"===e&&p.push(function(e,t,n,r,a){const o=e.int(2,4),i=(0,d.jsx)("path",{d:"M ".concat(t-r/2," ").concat(n+8," Q ").concat(t," ").concat(n+28," ").concat(t+r/2," ").concat(n+8," L ").concat(t+r/3," ").concat(n+42," Q ").concat(t," ").concat(n+54," ").concat(t-r/3," ").concat(n+42," Z"),fill:a}),l=Array.from({length:o},(e,r)=>(0,d.jsx)("circle",{cx:t-6*(o-1)/2+6*r,cy:n+36,r:2,fill:"#fbd38d"},r));return(0,d.jsxs)("g",{children:[i,l]})}(t,n,r,a,s)),"Orc"===e&&p.push(function(e,t,n){return(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M ".concat(e-8," ").concat(t+8," q -6 8 0 12"),stroke:n,strokeWidth:4}),(0,d.jsx)("path",{d:"M ".concat(e+8," ").concat(t+8," q 6 8 0 12"),stroke:n,strokeWidth:4})]})}(n,r,"#e5e7eb")),"Draken"===e&&p.push(function(e,t,n,r){const a=e.pick(["swept","spiral","short","crown"]);return"swept"===a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(t-22," ").concat(n-30," C ").concat(t-36," ").concat(n-54,", ").concat(t-54," ").concat(n-46,", ").concat(t-60," ").concat(n-28),fill:"none",stroke:r,strokeWidth:5}),(0,d.jsx)("path",{d:"M ".concat(t+22," ").concat(n-30," C ").concat(t+36," ").concat(n-54,", ").concat(t+54," ").concat(n-46,", ").concat(t+60," ").concat(n-28),fill:"none",stroke:r,strokeWidth:5})]}):"spiral"===a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(t-18," ").concat(n-34," q -22 -18 -26 0 q 6 16 18 10"),fill:"none",stroke:r,strokeWidth:5}),(0,d.jsx)("path",{d:"M ".concat(t+18," ").concat(n-34," q 22 -18 26 0 q -6 16 -18 10"),fill:"none",stroke:r,strokeWidth:5})]}):"crown"===a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(t-24," ").concat(n-36," L ").concat(t-8," ").concat(n-44),stroke:r,strokeWidth:6}),(0,d.jsx)("path",{d:"M ".concat(t+24," ").concat(n-36," L ").concat(t+8," ").concat(n-44),stroke:r,strokeWidth:6})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(t-18," ").concat(n-28," L ").concat(t-28," ").concat(n-18),stroke:r,strokeWidth:6}),(0,d.jsx)("path",{d:"M ".concat(t+18," ").concat(n-28," L ").concat(t+28," ").concat(n-18),stroke:r,strokeWidth:6})]})}(t,n,r,c)),"Automaton"===e&&p.push(function(e,t,n,r){return(0,d.jsxs)("g",{children:[(0,d.jsx)("circle",{cx:e,cy:t,r:n,fill:r,opacity:.1}),(0,d.jsx)("rect",{x:e-n/2,y:t-6,width:n,height:8,fill:r,opacity:.3,rx:3}),(0,d.jsx)("rect",{x:e-n/3,y:t-18,width:2*n/3,height:6,fill:r,opacity:.3,rx:3})]})}(n,r,a,o.metal)),"Fae"===e&&p.push(function(e,t,n,r){return(0,d.jsxs)("g",{opacity:.5,children:[(0,d.jsx)("circle",{cx:e,cy:t,r:n+12,fill:r,opacity:.15}),(0,d.jsx)("circle",{cx:e,cy:t,r:n+22,fill:r,opacity:.08})]})}(n,r,a,o.accent)),"Draken"!==e&&"Automaton"!==e&&"Fae"!==e&&p.push(function(e,t,n,r,a){switch(e.pick(["short","bob","long","mohawk","braid","sidecut"])){case"short":return(0,d.jsx)("path",{d:"M ".concat(t-r/2," ").concat(n-28," Q ").concat(t," ").concat(n-36," ").concat(t+r/2," ").concat(n-28," L ").concat(t+r/2," ").concat(n-10," Q ").concat(t," ").concat(n-22," ").concat(t-r/2," ").concat(n-10," Z"),fill:a});case"bob":return(0,d.jsx)("path",{d:"M ".concat(t-r/2," ").concat(n-26," Q ").concat(t," ").concat(n-40," ").concat(t+r/2," ").concat(n-26," L ").concat(t+r/2," ").concat(n," Q ").concat(t," ").concat(n+8," ").concat(t-r/2," ").concat(n," Z"),fill:a});case"long":return(0,d.jsx)("path",{d:"M ".concat(t-r/2," ").concat(n-28," Q ").concat(t," ").concat(n-40," ").concat(t+r/2," ").concat(n-28," L ").concat(t+r/2," ").concat(n+28," Q ").concat(t," ").concat(n+40," ").concat(t-r/2," ").concat(n+28," Z"),fill:a});case"mohawk":return(0,d.jsx)("path",{d:"M ".concat(t," ").concat(n-42," L ").concat(t+4," ").concat(n+6," L ").concat(t-4," ").concat(n+6," Z"),fill:a});case"braid":return(0,d.jsx)("path",{d:"M ".concat(t-6," ").concat(n-28," Q ").concat(t," ").concat(n-40," ").concat(t+6," ").concat(n-28," L ").concat(t+6," ").concat(n+30," Q ").concat(t," ").concat(n+40," ").concat(t-6," ").concat(n+30," Z"),fill:a});case"sidecut":return(0,d.jsx)("path",{d:"M ".concat(t-r/2," ").concat(n-26," Q ").concat(t-4," ").concat(n-44," ").concat(t+r/2," ").concat(n-30," L ").concat(t+r/2," ").concat(n-6," Q ").concat(t," ").concat(n-14," ").concat(t-r/2," ").concat(n-10," Z"),fill:a})}}(t,n,r,1.6*a,s)),{skin:l,hair:s,layers:p}}function Pe(e){let{opts:t,palette:n}=e;const r=(0,s.useMemo)(()=>{var e;return new ke("".concat(t.seed,":").concat(t.race,":").concat(t.archetype,":").concat(t.body,":").concat(null!==(e=t.variant)&&void 0!==e?e:0))},[t]),a=300,o=380,i=150,l=200,c=je[t.race][t.body],u=180*c.scale,p=(f=26*c.scale,m=22,h=34,Math.max(m,Math.min(h,f)));var f,m,h;const g=c.shoulder,y=c.waist,b="radial-gradient(circle at 50% 30%, ".concat(n.secondary,"22, transparent 60%)"),v=l-u/2+24,{layers:x}=Ee(t.race,r,i,v,p,n);return(0,d.jsxs)("svg",{id:"portrait-svg",viewBox:"0 0 ".concat(a," ").concat(o),width:a,height:o,style:{background:b,borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.2)"},children:[(0,d.jsx)("rect",{x:12,y:12,width:276,height:356,rx:14,ry:14,fill:"#111827",opacity:.35}),["Mage","Elementalist","Necromancer","Bloomcaller"].includes(t.archetype)&&(0,d.jsx)("path",{d:"M ".concat(i-g," ").concat(184," Q ").concat(i," ").concat(290," ").concat(i+g," ").concat(184," L ").concat(i+g," ").concat(320," L ").concat(i-g," ").concat(320," Z"),fill:"".concat(n.secondary,"55")}),Ce(i,l,g,y,u,"#e5e7eb","#1f2937"),x,Te(t.archetype,n,i,l,g),(0,d.jsx)("circle",{cx:i,cy:308,r:14,fill:n.accent}),(0,d.jsx)("rect",{x:140,y:304,width:20,height:8,rx:2,fill:n.cloth,opacity:.8})]})}function Re(e){var t,n,r,a;let{external:o}=e;const i=function(){const[e,t]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(async()=>{try{const e=await import("../defaultWorlds").catch(()=>null),n=e&&e.CLASS_DEFINITIONS||null;if(n)return void t(Object.keys(n))}catch(e){}t([])})()},[]),e}(),c=null!==o&&void 0!==o&&null!==(t=o.races)&&void 0!==t&&t.length?o.races:["Human","Draken","Elf","Dwarf","Orc","Halfling","Automaton","Fae"],u=null!==o&&void 0!==o&&null!==(n=o.classes)&&void 0!==n&&n.length?o.classes:i.length?i:["Mage","Warrior","Ranger","Rogue","Cleric","Paladin","Bard","Necromancer","Elementalist","Alchemist","Greenwarden","Thorn Knight","Sapling Adept","Bloomcaller","Stormsinger","Shadowblade","Skyspear"],p=Object.keys(null!==(r=null===o||void 0===o?void 0:o.palettes)&&void 0!==r?r:Se),f=null!==(a=null===o||void 0===o?void 0:o.palettes)&&void 0!==a?a:Se,[m,h]=(0,s.useState)("verdance-001"),[g,y]=(0,s.useState)(c[0]),[b,v]=(0,s.useState)(u[0]),[x,w]=(0,s.useState)("standard"),[k,S]=(0,s.useState)(p[0]),[j,C]=(0,s.useState)(0),T=((0,s.useRef)(null),f[k]),E=(0,s.useMemo)(()=>{const e=b.toLowerCase();return e.includes("thorn")?"Thorn Knight":e.includes("warden")||e.includes("green")?"Greenwarden":e.includes("sapling")?"Sapling Adept":e.includes("bloom")?"Bloomcaller":e.includes("paladin")?"Paladin":e.includes("cleric")?"Cleric":e.includes("ranger")?"Ranger":e.includes("rogue")||e.includes("shadow")?"Shadowblade":e.includes("necrom")?"Necromancer":e.includes("element")?"Elementalist":e.includes("alchem")?"Alchemist":e.includes("storm")||e.includes("singer")?"Stormsinger":e.includes("sky")||e.includes("spear")?"Skyspear":e.includes("war")?"Warrior":e.includes("mage")||e.includes("wizard")||e.includes("sorcer")?"Mage":"Warrior"},[b]),P={seed:m,race:g,archetype:E,body:x,faction:k,variant:j};return(0,d.jsxs)("div",{className:"min-h-screen bg-slate-900 text-slate-100 p-6",children:[(0,d.jsxs)("div",{className:"max-w-6xl mx-auto grid md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold",children:"Character Portrait Studio"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("label",{className:"text-sm opacity-80",children:["Seed",(0,d.jsx)("input",{value:m,onChange:e=>h(e.target.value),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded px-2 py-1"})]}),(0,d.jsx)("button",{onClick:()=>h(Math.random().toString(36).slice(2,10)),className:"self-end bg-slate-700 hover:bg-slate-600 rounded px-3 py-2",children:"Randomize Seed"}),(0,d.jsxs)("label",{className:"text-sm opacity-80",children:["Race",(0,d.jsx)("select",{value:g,onChange:e=>y(e.target.value),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded px-2 py-1",children:c.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("label",{className:"text-sm opacity-80",children:["Class",(0,d.jsx)("select",{value:b,onChange:e=>v(e.target.value),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded px-2 py-1",children:u.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("label",{className:"text-sm opacity-80",children:["Body",(0,d.jsx)("select",{value:x,onChange:e=>w(e.target.value),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded px-2 py-1",children:["slim","standard","heavy"].map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("label",{className:"text-sm opacity-80",children:["Faction/Theme",(0,d.jsx)("select",{value:k,onChange:e=>S(e.target.value),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded px-2 py-1",children:p.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("label",{className:"text-sm opacity-80",children:["Variant",(0,d.jsx)("input",{type:"number",value:j,onChange:e=>C(parseInt(e.target.value||"0")),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded px-2 py-1"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("button",{className:"bg-emerald-600 hover:bg-emerald-500 rounded px-4 py-2",onClick:()=>{const e=document.getElementById("portrait-svg");e&&async function(e,t){const n=(new XMLSerializer).serializeToString(e),r=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(r),o=new Image,i=await new Promise(e=>{o.onload=()=>e(o),o.src=a}),l=document.createElement("canvas");l.width=i.width,l.height=i.height;const s=l.getContext("2d");s&&(s.drawImage(i,0,0),l.toBlob(e=>{if(!e)return;const n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=t,n.click(),URL.revokeObjectURL(n.href)})),URL.revokeObjectURL(a)}(e,"".concat(g,"-").concat(E,"-").concat(m,".png"))},children:"Export PNG"}),(0,d.jsx)("span",{className:"text-xs opacity-70",children:"Deterministic: same seed + settings \u21d2 identical image"})]})]}),(0,d.jsx)("div",{className:"flex items-center justify-center p-4 bg-slate-800/40 rounded-2xl",children:(0,d.jsx)("div",{className:"shadow-2xl rounded-xl overflow-hidden",children:(0,d.jsx)(Pe,{opts:P,palette:T})})})]}),(0,d.jsxs)("div",{className:"max-w-6xl mx-auto mt-8",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Sprite Sheet"}),(0,d.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[...Array(12)].map((e,t)=>{const n="".concat(m,"-v").concat(t),r=l(l({},P),{},{seed:n,variant:t});return(0,d.jsx)("div",{className:"bg-slate-800/60 rounded-xl p-2 flex items-center justify-center",children:(0,d.jsx)(Pe,{opts:r,palette:T})},t)})})]})]})}function Ne(){var e,t;const[n,r]=s.useState("menu"),[a,o]=s.useState([]),[i,c]=s.useState(null),[,f]=s.useReducer(e=>e+1,0);s.useEffect(()=>{const e=sessionStorage.getItem("world-engine-emergency-save");if(e)try{const t=JSON.parse(e);console.log("Found emergency save, attempting recovery...");const n=JSON.parse(localStorage.getItem("world-engine-campaigns")||"[]"),r=n.findIndex(e=>e.id===t.id);r>=0?n[r]=t:n.push(t),localStorage.setItem("world-engine-campaigns",JSON.stringify(n)),sessionStorage.removeItem("world-engine-emergency-save"),alert("\ud83d\udea8 Emergency save recovered from previous session!")}catch(n){console.error("Failed to recover emergency save:",n)}const t=setInterval(()=>{try{const e=JSON.parse(localStorage.getItem("world-engine-campaigns")||"[]");e.length>0&&(sessionStorage.setItem("world-engine-campaigns-session",JSON.stringify(e)),console.log("Periodic session backup completed"))}catch(n){console.error("Periodic backup failed:",n)}},3e5);return()=>clearInterval(t)},[]);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"world-engine-campaigns-backup";try{const n={campaigns:e,exportDate:(new Date).toISOString(),version:"2.0",worldEngineVersion:"v1.0.0"},r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download="".concat(t,"-").concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),console.log("Campaign backup downloaded")}catch(n){console.error("Error downloading backup:",n)}},y={state:{meta:{seed:"undefined"!==typeof window&&window.localStorage.getItem("world-seed")||void 0,presets:{list:[],loaded:"undefined"!==typeof window&&window.localStorage.getItem("world-preset")||void 0}}},applyPresetByName:e=>{console.log("applyPresetByName",e),y.state=l(l({},y.state),{},{meta:l(l({},y.state.meta),{},{presets:l(l({},y.state.meta.presets),{},{loaded:e})})});try{window.localStorage.setItem("world-preset",e)}catch(t){}f()},setSeed:e=>{console.log("setSeed",e),y.state=l(l({},y.state),{},{meta:l(l({},y.state.meta),{},{seed:e})});try{window.localStorage.setItem("world-seed",e)}catch(t){}f()},loadWorldPresets:async function(){console.log("loadWorldPresets called");const e="worlds.json";try{console.log("Fetching",e,"...");const t=await fetch(e,{cache:"no-store"});if(console.log("Fetch response:",t.status,t.statusText),!t.ok)throw new Error("HTTP ".concat(t.status));const n=await t.json();console.log("Raw JSON data:",n);const r=n&&Array.isArray(n.list)?n.list:[];y.state=l(l({},y.state),{},{meta:l(l({},y.state.meta),{},{presets:{list:r,loaded:y.state.meta.presets.loaded}})}),console.log("World presets loaded:",r.map(e=>e.name)),f()}catch(t){console.error("Failed to load world presets from",e,":",t),y.state=l(l({},y.state),{},{meta:l(l({},y.state.meta),{},{presets:{list:g,loaded:y.state.meta.presets.loaded}})}),console.warn("Using DEFAULT_WORLDS fallback (",g.length,")"),f()}}};return(0,d.jsxs)(d.Fragment,{children:["menu"===n&&(0,d.jsx)(u,{onNewCampaign:()=>{const e={id:"campaign-".concat(Date.now()),name:"Campaign ".concat(Date.now().toString().slice(-4)),worldPreset:"",seed:"",characters:[]};c(e),r("world")},onLoadCampaign:e=>{var t,n;(c(e),e.worldPreset)&&(null===(t=y.applyPresetByName)||void 0===t||t.call(y,e.worldPreset));e.seed&&(null===(n=y.setSeed)||void 0===n||n.call(y,e.seed));r("character")},onCharacterCreator:()=>{c(null),r("character")},onNameGenerator:()=>{r("namegen")},onSpellGenerator:()=>{r("spellgen")},onSpellAssignment:()=>{r("spellassign")},onHealingSystem:()=>{r("healing")},onPortraitStudio:()=>r("portrait")}),"world"===n&&(0,d.jsx)(p,{eng:y,onNext:()=>{if(i){var e,t,n,a,o;const r=l(l({},i),{},{worldPreset:(null===y||void 0===y||null===(e=y.state)||void 0===e||null===(t=e.meta)||void 0===t||null===(n=t.presets)||void 0===n?void 0:n.loaded)||"",seed:(null===y||void 0===y||null===(a=y.state)||void 0===a||null===(o=a.meta)||void 0===o?void 0:o.seed)||""});c(r),(e=>{try{const t=(new Date).toISOString(),n=JSON.parse(localStorage.getItem("world-engine-campaigns")||"[]"),r=n.findIndex(t=>t.id===e.id),a=l(l({},e),{},{lastPlayed:t,saveVersion:"2.0"},r<0&&{createdAt:t});r>=0?n[r]=a:n.push(a),localStorage.setItem("world-engine-campaigns",JSON.stringify(n)),localStorage.setItem("world-engine-campaigns-backup",JSON.stringify({campaigns:n,backupTime:t,version:"2.0"})),sessionStorage.setItem("world-engine-campaigns-session",JSON.stringify(n)),localStorage.setItem("world-engine-campaign-".concat(e.id),JSON.stringify(a));const o=parseInt(localStorage.getItem("world-engine-save-count")||"0")+1;localStorage.setItem("world-engine-save-count",o.toString()),o%10===0&&h(n,"auto-backup-".concat(o)),console.log("Campaign saved with ".concat(n.length," total campaigns (save #").concat(o,")"))}catch(t){console.error("Error saving campaign:",t);try{sessionStorage.setItem("world-engine-emergency-save",JSON.stringify(e)),alert("Primary save failed, but emergency backup created. Please export your campaign manually.")}catch(n){console.error("Emergency save also failed:",n),alert("Critical: All save attempts failed. Please export your campaign data immediately.")}}})(r)}r("party")}}),"party"===n&&(0,d.jsx)(m,{eng:y,party:a,setParty:o,onStart:()=>r("worldmap"),onCreateNew:()=>r("character")}),"character"===n&&(0,d.jsxs)("div",{style:{background:"#030712",minHeight:"100vh"},children:[(0,d.jsxs)("nav",{style:{padding:"16px 24px",borderBottom:"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#111827"},children:[(0,d.jsx)("h1",{style:{margin:0,color:"#f9fafb"},children:"World Engine - Character Creator"}),(0,d.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,d.jsx)("button",{onClick:()=>r("menu"),style:{padding:"8px 16px",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Back to Menu"}),i&&(0,d.jsx)("button",{onClick:()=>r("world"),style:{padding:"8px 16px",background:"#374151",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"World Setup"}),(0,d.jsx)("button",{onClick:()=>r("worldmap"),style:{padding:"8px 16px",background:"#059669",color:"#f9fafb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Enter World"})]})]}),(0,d.jsx)(U,{})]}),"namegen"===n&&(0,d.jsx)(K,{onBack:()=>r("menu")}),"spellgen"===n&&(0,d.jsx)(se,{onBack:()=>r("menu")}),"spellassign"===n&&(0,d.jsx)(ce,{onBack:()=>r("menu")}),"healing"===n&&(0,d.jsx)(de,{onBack:()=>r("menu")}),"worldmap"===n&&(0,d.jsx)(we,{seedStr:null===y||void 0===y||null===(e=y.state)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.seed,onBack:()=>r("menu")}),"portrait"===n&&(0,d.jsxs)("div",{style:{position:"relative"},children:[(0,d.jsx)("button",{onClick:()=>r("menu"),style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3,background:"#374151",color:"#f8fafc",border:"none",borderRadius:"8px",padding:"10px 15px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"\u2190 Back to Menu"}),(0,d.jsx)(Re,{})]})]})}(0,c.H)(document.getElementById("root")).render((0,d.jsx)(Ne,{}))})();
//# sourceMappingURL=main.b2b77c06.js.map